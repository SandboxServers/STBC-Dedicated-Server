// 18_data_tables.c - Decompiled from stbc.exe
// Generated by decompile_all.py


// ====== 0x00860305  FUN_00860305 ======
uint __cdecl FUN_00860305(uint param_1,int *param_2)

{
  uint uVar1;
  
  FUN_0085bf73((uint)param_2);
  uVar1 = FUN_0086032e(param_1,param_2);
  FUN_0085bfc5((uint)param_2);
  return uVar1;
}

// ====== 0x0086032e  FUN_0086032e ======
uint __cdecl FUN_0086032e(uint param_1,int *param_2)

{
  uint uVar1;
  
  if ((param_1 != 0xffffffff) &&
     ((uVar1 = param_2[3], (uVar1 & 1) != 0 || (((uVar1 & 0x80) != 0 && ((uVar1 & 2) == 0)))))) {
    if (param_2[2] == 0) {
      FUN_0086b817(param_2);
    }
    if (*param_2 == param_2[2]) {
      if (param_2[1] != 0) {
        return 0xffffffff;
      }
      *param_2 = *param_2 + 1;
    }
    if ((*(byte *)(param_2 + 3) & 0x40) == 0) {
      *param_2 = *param_2 + -1;
      *(char *)*param_2 = (char)param_1;
    }
    else {
      *param_2 = *param_2 + -1;
      if (*(char *)*param_2 != (char)param_1) {
        *param_2 = (int)((char *)*param_2 + 1);
        return 0xffffffff;
      }
    }
    param_2[1] = param_2[1] + 1;
    param_2[3] = param_2[3] & 0xffffffefU | 1;
    return param_1 & 0xff;
  }
  return 0xffffffff;
}

// ====== 0x0086039c  FUN_0086039c ======
undefined4 __cdecl FUN_0086039c(char *param_1,ulonglong *param_2)

{
  undefined4 uVar1;
  ulonglong uVar2;
  
  uVar2 = FUN_0086b85b(param_1);
  *param_2 = uVar2;
  uVar1 = 0xffffffff;
  if (((uint)*param_2 & *(uint *)((int)param_2 + 4)) != 0xffffffff) {
    uVar1 = 0;
  }
  return uVar1;
}

// ====== 0x008603be  FUN_008603be ======
void __cdecl FUN_008603be(int *param_1,LONG *param_2)

{
  FUN_0086ba13(param_1,*param_2,param_2[1],0);
  return;
}

// ====== 0x008603e0  _memset ======
/* Library Function - Single Match
    _memset
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

void * __cdecl _memset(void *_Dst,int _Val,size_t _Size)

{
  uint uVar1;
  uint uVar2;
  size_t sVar3;
  uint *puVar4;
  
  if (_Size == 0) {
    return _Dst;
  }
  uVar1 = _Val & 0xff;
  puVar4 = (uint *)_Dst;
  if (3 < _Size) {
    uVar2 = -(int)_Dst & 3;
    sVar3 = _Size;
    if (uVar2 != 0) {
      sVar3 = _Size - uVar2;
      do {
        *(undefined1 *)puVar4 = (undefined1)_Val;
        puVar4 = (uint *)((int)puVar4 + 1);
        uVar2 = uVar2 - 1;
      } while (uVar2 != 0);
    }
    uVar1 = uVar1 * 0x1010101;
    _Size = sVar3 & 3;
    uVar2 = sVar3 >> 2;
    if (uVar2 != 0) {
      for (; uVar2 != 0; uVar2 = uVar2 - 1) {
        *puVar4 = uVar1;
        puVar4 = puVar4 + 1;
      }
      if (_Size == 0) {
        return _Dst;
      }
    }
  }
  do {
    *(char *)puVar4 = (char)uVar1;
    puVar4 = (uint *)((int)puVar4 + 1);
    _Size = _Size - 1;
  } while (_Size != 0);
  return _Dst;
}

// ====== 0x00860440  _strlen ======
/* Library Function - Single Match
    _strlen
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

size_t __cdecl _strlen(char *_Str)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  
  uVar1 = (uint)_Str & 3;
  puVar2 = (uint *)_Str;
  while (uVar1 != 0) {
    uVar1 = *puVar2;
    puVar2 = (uint *)((int)puVar2 + 1);
    if ((char)uVar1 == '\0') goto LAB_00860493;
    uVar1 = (uint)puVar2 & 3;
  }
  do {
    do {
      puVar3 = puVar2;
      puVar2 = puVar3 + 1;
    } while (((*puVar3 ^ 0xffffffff ^ *puVar3 + 0x7efefeff) & 0x81010100) == 0);
    uVar1 = *puVar3;
    if ((char)uVar1 == '\0') {
      return (int)puVar3 - (int)_Str;
    }
    if ((char)(uVar1 >> 8) == '\0') {
      return (size_t)((int)puVar3 + (1 - (int)_Str));
    }
    if ((uVar1 & 0xff0000) == 0) {
      return (size_t)((int)puVar3 + (2 - (int)_Str));
    }
  } while ((uVar1 & 0xff000000) != 0);
LAB_00860493:
  return (size_t)((int)puVar2 + (-1 - (int)_Str));
}

// ====== 0x008604bb  FUN_008604bb ======
uint __cdecl FUN_008604bb(uint param_1,int *param_2)

{
  uint uVar1;
  undefined2 extraout_var;
  
  FUN_0085bf73((uint)param_2);
  uVar1 = FUN_008604e5(param_1,param_2);
  FUN_0085bfc5((uint)param_2);
  return CONCAT22(extraout_var,(short)uVar1);
}

// ====== 0x008604e5  FUN_008604e5 ======
uint __cdecl FUN_008604e5(uint param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  byte bVar3;
  uint uVar4;
  undefined *puVar5;
  LPSTR pCVar6;
  DWORD *pDVar7;
  
  piVar2 = param_2;
  if ((*(byte *)(param_2 + 3) & 0x40) != 0) {
LAB_008605bb:
    piVar2 = param_2 + 1;
    *piVar2 = *piVar2 + -2;
    if (*piVar2 < 0) {
      param_1 = FUN_0086bad3(param_1 & 0xffff,param_2);
    }
    else {
      *(WCHAR *)*param_2 = (WCHAR)param_1;
      *param_2 = *param_2 + 2;
    }
    return param_1;
  }
  uVar4 = param_2[4];
  if (uVar4 == 0xffffffff) {
    puVar5 = &DAT_0097ad98;
  }
  else {
    puVar5 = (undefined *)((&DAT_009b4000)[(int)uVar4 >> 5] + (uVar4 & 0x1f) * 0x24);
  }
  if ((puVar5[4] & 0x80) == 0) goto LAB_008605bb;
  pCVar6 = FUN_0086bbfa((LPSTR)&param_2,(WCHAR)param_1);
  if (pCVar6 == (LPSTR)0xffffffff) {
    pDVar7 = FUN_0085cbd7();
    *pDVar7 = 0x2a;
    goto LAB_00860542;
  }
  if (pCVar6 == (LPSTR)0x1) {
    piVar1 = piVar2 + 1;
    *piVar1 = *piVar1 + -1;
    bVar3 = (byte)param_2;
    if (-1 < *piVar1) {
      *(byte *)*piVar2 = (byte)param_2;
      goto LAB_00860560;
    }
LAB_00860569:
    pDVar7 = (DWORD *)FUN_00861b50((int)(char)bVar3,piVar2);
  }
  else {
    piVar1 = piVar2 + 1;
    *piVar1 = *piVar1 + -1;
    if (*piVar1 < 0) {
      pDVar7 = (DWORD *)FUN_00861b50((int)(char)(byte)param_2,piVar2);
    }
    else {
      *(byte *)*piVar2 = (byte)param_2;
      *piVar2 = *piVar2 + 1;
      pDVar7 = (DWORD *)((uint)param_2 & 0xff);
    }
    if (pDVar7 == (DWORD *)0xffffffff) goto LAB_00860542;
    piVar1 = piVar2 + 1;
    *piVar1 = *piVar1 + -1;
    bVar3 = param_2._1_1_;
    if (*piVar1 < 0) goto LAB_00860569;
    *(byte *)*piVar2 = param_2._1_1_;
    param_2._0_1_ = param_2._1_1_;
LAB_00860560:
    pDVar7 = (DWORD *)(uint)(byte)param_2;
    *piVar2 = *piVar2 + 1;
  }
  if (pDVar7 != (DWORD *)0xffffffff) {
    return CONCAT22((short)((uint)pDVar7 >> 0x10),(WCHAR)param_1);
  }
LAB_00860542:
  return CONCAT22((short)((uint)pDVar7 >> 0x10),0xffff);
}

// ====== 0x008605ee  FUN_008605ee ======
uint __cdecl FUN_008605ee(uint param_1,int *param_2)

{
  uint uVar1;
  undefined2 extraout_var;
  
  FUN_0085bf73((uint)param_2);
  uVar1 = FUN_00860618(param_1,param_2);
  FUN_0085bfc5((uint)param_2);
  return CONCAT22(extraout_var,(short)uVar1);
}

// ====== 0x00860705  FUN_00860705 ======
undefined2 __cdecl FUN_00860705(int *param_1)

{
  undefined2 uVar1;
  void *this;
  
  FUN_0085bf73((uint)param_1);
  uVar1 = FUN_00860728(this,param_1);
  FUN_0085bfc5((uint)param_1);
  return uVar1;
}

// ====== 0x00860618  FUN_00860618 ======
uint __cdecl FUN_00860618(uint param_1,int *param_2)

{
  uint uVar1;
  int *piVar2;
  DWORD *in_EAX;
  undefined *puVar3;
  WCHAR WVar4;
  
  piVar2 = param_2;
  WVar4 = (WCHAR)param_1;
  if ((WVar4 == L'\xffff') ||
     ((in_EAX = (DWORD *)param_2[3], ((uint)in_EAX & 1) == 0 &&
      ((((uint)in_EAX & 0x80) == 0 || (((uint)in_EAX & 2) != 0)))))) goto LAB_00860697;
  if (param_2[2] == 0) {
    FUN_0086b817(param_2);
  }
  in_EAX = (DWORD *)piVar2[3];
  if (((uint)in_EAX & 0x40) == 0) {
    uVar1 = piVar2[4];
    if (uVar1 == 0xffffffff) {
      puVar3 = &DAT_0097ad98;
    }
    else {
      puVar3 = (undefined *)((&DAT_009b4000)[(int)uVar1 >> 5] + (uVar1 & 0x1f) * 0x24);
    }
    if ((puVar3[4] & 0x80) != 0) {
      in_EAX = (DWORD *)FUN_0086bbfa((LPSTR)&param_1,WVar4);
      if (in_EAX != (DWORD *)0xffffffff) {
        if (*piVar2 == piVar2[2]) {
          if (piVar2[1] != 0) goto LAB_00860697;
          *piVar2 = (int)(*piVar2 + (int)in_EAX);
        }
        if (in_EAX != (DWORD *)0x1) {
          *piVar2 = *piVar2 + -1;
          *(undefined1 *)*piVar2 = param_1._1_1_;
        }
        *piVar2 = *piVar2 + -1;
        *(undefined1 *)*piVar2 = (undefined1)param_1;
        piVar2[1] = (int)(piVar2[1] + (int)in_EAX);
        uVar1 = piVar2[3];
        piVar2[3] = uVar1 & 0xffffffef | 1;
        return CONCAT22((short)((uVar1 & 0xffffffef) >> 0x10),WVar4);
      }
      in_EAX = FUN_0085cbd7();
      *in_EAX = 0x2a;
      goto LAB_00860697;
    }
  }
  if (*piVar2 == piVar2[2]) {
    if (piVar2[1] != 0) {
LAB_00860697:
      return CONCAT22((short)((uint)in_EAX >> 0x10),0xffff);
    }
    *piVar2 = *piVar2 + 2;
  }
  piVar2[1] = piVar2[1] + 2;
  *piVar2 = *piVar2 + -2;
  piVar2[3] = (uint)in_EAX & 0xffffffef | 1;
  *(WCHAR *)*piVar2 = WVar4;
  return CONCAT22((short)((uint)*piVar2 >> 0x10),*(undefined2 *)*piVar2);
}

// ====== 0x00860835  FUN_00860835 ======
exception * __thiscall FUN_00860835(void *this,byte param_1)

{
  exception::~exception((exception *)this);
  if ((param_1 & 1) != 0) {
    FUN_00718cf0((int)this);
  }
  return (exception *)this;
}

// ====== 0x00860728  FUN_00860728 ======
undefined2 __thiscall FUN_00860728(void *this,int *param_1)

{
  int *piVar1;
  int *piVar2;
  undefined2 uVar3;
  undefined *puVar4;
  uint uVar5;
  uint uVar6;
  DWORD *pDVar7;
  undefined4 local_8;
  
  piVar2 = param_1;
  local_8 = this;
  if ((*(byte *)(param_1 + 3) & 0x40) == 0) {
    uVar6 = param_1[4];
    if (uVar6 == 0xffffffff) {
      puVar4 = &DAT_0097ad98;
    }
    else {
      puVar4 = (undefined *)((&DAT_009b4000)[(int)uVar6 >> 5] + (uVar6 & 0x1f) * 0x24);
    }
    if ((puVar4[4] & 0x80) != 0) {
      piVar1 = param_1 + 1;
      *piVar1 = *piVar1 + -1;
      uVar6 = 1;
      if (*piVar1 < 0) {
        uVar5 = FUN_0086788f(param_1);
      }
      else {
        uVar5 = (uint)*(byte *)*param_1;
        *param_1 = (int)((byte *)*param_1 + 1);
      }
      if (uVar5 != 0xffffffff) {
        local_8 = (void *)CONCAT31(local_8._1_3_,(char)uVar5);
        if ((PTR_DAT_0097a134[(uVar5 & 0xff) * 2 + 1] & 0x80) != 0) {
          piVar1 = piVar2 + 1;
          *piVar1 = *piVar1 + -1;
          if (*piVar1 < 0) {
            uVar6 = FUN_0086788f(piVar2);
          }
          else {
            uVar6 = (uint)*(byte *)*piVar2;
            *piVar2 = (int)((byte *)*piVar2 + 1);
          }
          if (uVar6 == 0xffffffff) {
            FUN_00860305((int)(char)(byte)local_8,piVar2);
            return 0xffff;
          }
          local_8._0_2_ = CONCAT11((char)uVar6,(byte)local_8);
          uVar6 = 2;
        }
        uVar6 = FUN_0086bda3((LPWSTR)((int)&param_1 + 2),(byte *)&local_8,uVar6);
        if (uVar6 != 0xffffffff) {
          return param_1._2_2_;
        }
        pDVar7 = FUN_0085cbd7();
        *pDVar7 = 0x2a;
      }
      return 0xffff;
    }
  }
  piVar2 = param_1 + 1;
  *piVar2 = *piVar2 + -2;
  if (*piVar2 < 0) {
    uVar3 = FUN_0086bcbc(param_1);
  }
  else {
    uVar3 = *(undefined2 *)*param_1;
    *param_1 = (int)((undefined2 *)*param_1 + 1);
  }
  return uVar3;
}

// ====== 0x00860851  FUN_00860851 ======
undefined4 * __thiscall FUN_00860851(void *this,undefined4 *param_1)

{
  size_t sVar1;
  uint *puVar2;
  
  *(undefined ***)this = &PTR_FUN_0089b4b8;
  sVar1 = _strlen((char *)*param_1);
  puVar2 = (uint *)FUN_00718cb0(sVar1 + 1);
  *(uint **)((int)this + 4) = puVar2;
  if (puVar2 != (uint *)0x0) {
    FUN_00863840(puVar2,(uint *)*param_1);
  }
  *(undefined4 *)((int)this + 8) = 1;
  return (undefined4 *)this;
}

// ====== 0x0086088e  FUN_0086088e ======
undefined4 * __thiscall FUN_0086088e(void *this,int param_1)

{
  int iVar1;
  size_t sVar2;
  uint *puVar3;
  
  *(undefined ***)this = &PTR_FUN_0089b4b8;
  iVar1 = *(int *)(param_1 + 8);
  *(int *)((int)this + 8) = iVar1;
  if (iVar1 == 0) {
    *(undefined4 *)((int)this + 4) = *(undefined4 *)(param_1 + 4);
  }
  else {
    sVar2 = _strlen(*(char **)(param_1 + 4));
    puVar3 = (uint *)FUN_00718cb0(sVar2 + 1);
    *(uint **)((int)this + 4) = puVar3;
    if (puVar3 != (uint *)0x0) {
      FUN_00863840(puVar3,*(uint **)(param_1 + 4));
    }
  }
  return (undefined4 *)this;
}

// ====== 0x008608d8  operator= ======
/* Library Function - Single Match
    public: class exception & __thiscall exception::operator=(class exception const &)
   
   Libraries: Visual Studio 2003 Release, Visual Studio 2005 Release */

exception * __thiscall exception::operator=(exception *this,exception *param_1)

{
  if (this != param_1) {
    ~exception(this);
    FUN_0086088e(this,(int)param_1);
  }
  return this;
}

// ====== 0x008608f7  ~exception ======
/* Library Function - Single Match
    public: virtual __thiscall exception::~exception(void)
   
   Libraries: Visual Studio 2003 Release, Visual Studio 2005 Release */

void __thiscall exception::~exception(exception *this)

{
  *(undefined ***)this = &PTR_FUN_0089b4b8;
  if (*(int *)(this + 8) != 0) {
    FUN_00718cf0(*(int *)(this + 4));
  }
  return;
}

// ====== 0x00860920  _memcmp ======
/* Library Function - Single Match
    _memcmp
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

int __cdecl _memcmp(void *_Buf1,void *_Buf2,size_t _Size)

{
  uint uVar1;
  size_t sVar2;
  int iVar3;
  byte bVar4;
  uint uVar5;
  byte bVar6;
  uint *puVar7;
  uint *puVar8;
  bool bVar9;
  
  sVar2 = _Size;
  if (_Size != 0) {
    if ((((uint)_Buf1 | (uint)_Buf2) & 3) == 0) {
      sVar2 = _Size & 3;
      uVar5 = _Size >> 2;
      bVar9 = uVar5 == 0;
      puVar7 = (uint *)_Buf1;
      puVar8 = (uint *)_Buf2;
      if (!bVar9) {
        do {
          _Buf1 = puVar7;
          _Buf2 = puVar8;
          if (uVar5 == 0) break;
          uVar5 = uVar5 - 1;
          _Buf2 = puVar8 + 1;
          _Buf1 = puVar7 + 1;
          bVar9 = *puVar7 == *puVar8;
          puVar7 = (uint *)_Buf1;
          puVar8 = (uint *)_Buf2;
        } while (bVar9);
        if (!bVar9) {
          uVar5 = *(uint *)((int)_Buf1 + -4);
          uVar1 = *(uint *)((int)_Buf2 + -4);
          bVar9 = (byte)uVar5 < (byte)uVar1;
          if ((((byte)uVar5 == (byte)uVar1) &&
              (bVar4 = (byte)(uVar5 >> 8), bVar6 = (byte)(uVar1 >> 8), bVar9 = bVar4 < bVar6,
              bVar4 == bVar6)) &&
             (bVar4 = (byte)(uVar5 >> 0x10), bVar6 = (byte)(uVar1 >> 0x10), bVar9 = bVar4 < bVar6,
             bVar4 == bVar6)) {
            bVar9 = (byte)(uVar5 >> 0x18) < (byte)(uVar1 >> 0x18);
          }
          goto LAB_0086099a;
        }
      }
      if (sVar2 != 0) {
                    /* WARNING: Load size is inaccurate */
        uVar5 = *_Buf1;
                    /* WARNING: Load size is inaccurate */
        uVar1 = *_Buf2;
        bVar9 = (byte)uVar5 < (byte)uVar1;
        if ((byte)uVar5 != (byte)uVar1) {
LAB_0086099a:
          return (1 - (uint)bVar9) - (uint)(bVar9 != 0);
        }
        iVar3 = sVar2 - 1;
        if (iVar3 != 0) {
          bVar6 = (byte)(uVar5 >> 8);
          bVar4 = (byte)(uVar1 >> 8);
          bVar9 = bVar6 < bVar4;
          if (bVar6 != bVar4) goto LAB_0086099a;
          iVar3 = sVar2 - 2;
          if (iVar3 != 0) {
            bVar9 = (uVar5 & 0xff0000) < (uVar1 & 0xff0000);
            if ((uVar5 & 0xff0000) != (uVar1 & 0xff0000)) goto LAB_0086099a;
            iVar3 = sVar2 - 3;
          }
        }
        return iVar3;
      }
    }
    else {
      if ((_Size & 1) == 0) goto LAB_0086094d;
                    /* WARNING: Load size is inaccurate */
                    /* WARNING: Load size is inaccurate */
      bVar9 = *_Buf1 < *_Buf2;
      if (*_Buf1 != *_Buf2) goto LAB_0086099a;
      _Buf1 = (void *)((int)_Buf1 + 1);
      _Buf2 = (void *)((int)_Buf2 + 1);
      for (_Size = _Size - 1; sVar2 = _Size, _Size != 0; _Size = _Size - 2) {
LAB_0086094d:
                    /* WARNING: Load size is inaccurate */
                    /* WARNING: Load size is inaccurate */
        bVar9 = *_Buf1 < *_Buf2;
        if ((*_Buf1 != *_Buf2) ||
           (bVar9 = *(byte *)((int)_Buf1 + 1) < *(byte *)((int)_Buf2 + 1),
           *(byte *)((int)_Buf1 + 1) != *(byte *)((int)_Buf2 + 1))) goto LAB_0086099a;
        _Buf2 = (void *)((int)_Buf2 + 2);
        _Buf1 = (void *)((int)_Buf1 + 2);
      }
    }
  }
  return sVar2;
}

// ====== 0x008609cc  FUN_008609cc ======
void FUN_008609cc(void)

{
  InitializeCriticalSection((LPCRITICAL_SECTION)lpCriticalSection_0097a7c4);
  InitializeCriticalSection((LPCRITICAL_SECTION)lpCriticalSection_0097a7b4);
  InitializeCriticalSection((LPCRITICAL_SECTION)lpCriticalSection_0097a7a4);
  InitializeCriticalSection((LPCRITICAL_SECTION)lpCriticalSection_0097a784);
  return;
}

// ====== 0x00860a61  FUN_00860a61 ======
void __cdecl FUN_00860a61(int param_1)

{
  LPCRITICAL_SECTION *pp_Var1;
  LPCRITICAL_SECTION lpCriticalSection;
  
  pp_Var1 = &lpCriticalSection_0097a780 + param_1;
  if ((&lpCriticalSection_0097a780)[param_1] == (LPCRITICAL_SECTION)0x0) {
    lpCriticalSection = (LPCRITICAL_SECTION)_malloc(0x18);
    if (lpCriticalSection == (LPCRITICAL_SECTION)0x0) {
      __amsg_exit(0x11);
    }
    FUN_00860a61(0x11);
    if (*pp_Var1 == (LPCRITICAL_SECTION)0x0) {
      InitializeCriticalSection(lpCriticalSection);
      *pp_Var1 = lpCriticalSection;
    }
    else {
      FUN_0085adc4((undefined *)lpCriticalSection);
    }
    FUN_00860ac2(0x11);
  }
  EnterCriticalSection(*pp_Var1);
  return;
}

// ====== 0x00860ac2  FUN_00860ac2 ======
void __cdecl FUN_00860ac2(int param_1)

{
  LeaveCriticalSection((&lpCriticalSection_0097a780)[param_1]);
  return;
}

// ====== 0x00860aef  FUN_00860aef ======
undefined4 __cdecl
FUN_00860aef(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int *param_5,
            int param_6,PVOID param_7,char param_8)

{
  code *pcVar1;
  undefined4 uVar2;
  
  if (*param_5 != 0x19930520) {
    FUN_0086156d();
  }
  if ((param_1->ExceptionFlags & 0x66) == 0) {
    if (param_5[3] != 0) {
      if (((param_1->ExceptionCode == 0xe06d7363) && (0x19930520 < param_1->ExceptionInformation[0])
          ) && (pcVar1 = *(code **)(param_1->ExceptionInformation[2] + 8), pcVar1 != (code *)0x0)) {
        uVar2 = (*pcVar1)(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        return uVar2;
      }
      FUN_00860b8a(param_1,param_2,param_3,param_4,(uint)param_5,param_8,param_6,param_7);
    }
  }
  else if ((param_5[1] != 0) && (param_6 == 0)) {
    FUN_00860e44((int)param_2,param_4,(int)param_5,-1);
  }
  return 1;
}

// ====== 0x00860b8a  FUN_00860b8a ======
void __cdecl
FUN_00860b8a(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,uint param_5,
            char param_6,int param_7,PVOID param_8)

{
  byte *pbVar1;
  bool bVar2;
  DWORD *pDVar3;
  undefined3 extraout_var;
  int *piVar4;
  int iVar5;
  int *piVar6;
  uint local_1c;
  uint local_18;
  int local_14;
  int local_10;
  int local_c;
  uint local_8;
  
  local_18 = local_18 & 0xffffff00;
  local_14 = *(int *)((int)param_2 + 8);
  if ((local_14 < -1) || (*(int *)(param_5 + 4) <= local_14)) {
    FUN_0086156d();
  }
  if (param_1->ExceptionCode == 0xe06d7363) {
    if (((param_1->NumberParameters == 3) && (param_1->ExceptionInformation[0] == 0x19930520)) &&
       (param_1->ExceptionInformation[2] == 0)) {
      pDVar3 = FUN_008613e1();
      if (pDVar3[0x1b] == 0) {
        return;
      }
      pDVar3 = FUN_008613e1();
      param_1 = (PEXCEPTION_RECORD)pDVar3[0x1b];
      pDVar3 = FUN_008613e1();
      param_3 = pDVar3[0x1c];
      local_18 = CONCAT31(local_18._1_3_,1);
      bVar2 = FUN_0086bec9(param_1,1);
      if (CONCAT31(extraout_var,bVar2) == 0) {
        FUN_0086156d();
      }
      if (param_1->ExceptionCode != 0xe06d7363) goto LAB_00860d12;
      if (((param_1->NumberParameters == 3) && (param_1->ExceptionInformation[0] == 0x19930520)) &&
         (param_1->ExceptionInformation[2] == 0)) {
        FUN_0086156d();
      }
    }
    iVar5 = local_14;
    if (((param_1->ExceptionCode == 0xe06d7363) && (param_1->NumberParameters == 3)) &&
       (param_1->ExceptionInformation[0] == 0x19930520)) {
      piVar4 = (int *)FUN_008592fd(param_5,param_7,local_14,&local_8,&local_1c);
      do {
        if (local_1c <= local_8) {
          if (param_6 == '\0') {
            return;
          }
          FUN_0086127c((int)param_1);
          return;
        }
        if ((*piVar4 <= iVar5) && (iVar5 <= piVar4[1])) {
          pbVar1 = (byte *)piVar4[4];
          for (local_10 = piVar4[3]; iVar5 = local_14, 0 < local_10; local_10 = local_10 + -1) {
            piVar6 = *(int **)(param_1->ExceptionInformation[2] + 0xc);
            for (local_c = *piVar6; 0 < local_c; local_c = local_c + -1) {
              piVar6 = piVar6 + 1;
              iVar5 = FUN_00860de7(pbVar1,(byte *)*piVar6,(uint *)param_1->ExceptionInformation[2]);
              if (iVar5 != 0) {
                FUN_00860ef8(param_1,param_2,param_3,param_4,param_5,pbVar1,(byte *)*piVar6,piVar4,
                             param_7,param_8);
                iVar5 = local_14;
                goto LAB_00860cf2;
              }
            }
            pbVar1 = pbVar1 + 0x10;
          }
        }
LAB_00860cf2:
        local_8 = local_8 + 1;
        piVar4 = piVar4 + 5;
      } while( true );
    }
  }
LAB_00860d12:
  if (param_6 == '\0') {
    FUN_00860d3d(param_1,param_2,param_3,param_4,param_5,local_14,param_7,param_8);
    return;
  }
  FUN_008614f4();
  return;
}

// ====== 0x00860d3d  FUN_00860d3d ======
void __cdecl
FUN_00860d3d(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,uint param_5,
            int param_6,int param_7,PVOID param_8)

{
  DWORD *pDVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  uint local_c;
  uint local_8;
  
  pDVar1 = FUN_008613e1();
  if ((pDVar1[0x1a] != 0) &&
     (iVar2 = FUN_008591d2(&param_1->ExceptionCode,param_2,param_3,param_4,param_5,param_7,param_8),
     iVar2 != 0)) {
    return;
  }
  piVar3 = (int *)FUN_008592fd(param_5,param_7,param_6,&local_8,&local_c);
  for (; local_8 < local_c; local_8 = local_8 + 1) {
    if ((*piVar3 <= param_6) && (param_6 <= piVar3[1])) {
      iVar4 = piVar3[3] * 0x10 + piVar3[4];
      iVar2 = *(int *)(iVar4 + -0xc);
      if ((iVar2 == 0) || (*(char *)(iVar2 + 8) == '\0')) {
        FUN_00860ef8(param_1,param_2,param_3,param_4,param_5,(byte *)(iVar4 + -0x10),(byte *)0x0,
                     piVar3,param_7,param_8);
      }
    }
    piVar3 = piVar3 + 5;
  }
  return;
}

// ====== 0x00860de7  FUN_00860de7 ======
undefined4 __cdecl FUN_00860de7(byte *param_1,byte *param_2,uint *param_3)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  if ((iVar1 == 0) || (*(char *)(iVar1 + 8) == '\0')) {
LAB_00860e3e:
    uVar2 = 1;
  }
  else {
    if (iVar1 == *(int *)(param_2 + 4)) {
LAB_00860e18:
      if (((((*param_2 & 2) == 0) || ((*param_1 & 8) != 0)) &&
          (((*param_3 & 1) == 0 || ((*param_1 & 1) != 0)))) &&
         (((*param_3 & 2) == 0 || ((*param_1 & 2) != 0)))) goto LAB_00860e3e;
    }
    else {
      iVar1 = _strcmp((char *)(iVar1 + 8),(char *)(*(int *)(param_2 + 4) + 8));
      if (iVar1 == 0) goto LAB_00860e18;
    }
    uVar2 = 0;
  }
  return uVar2;
}

// ====== 0x00860e44  FUN_00860e44 ======
void __cdecl FUN_00860e44(int param_1,undefined4 param_2,int param_3,int param_4)

{
  int iVar1;
  int iVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0089b4d8;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  for (iVar2 = *(int *)(param_1 + 8); local_8 = 0xffffffff, iVar2 != param_4;
      iVar2 = *(int *)(*(int *)(param_3 + 8) + iVar2 * 8)) {
    if ((iVar2 < 0) || (*(int *)(param_3 + 4) <= iVar2)) {
      FUN_0086156d();
    }
    local_8 = 0;
    iVar1 = *(int *)(*(int *)(param_3 + 8) + 4 + iVar2 * 8);
    if (iVar1 != 0) {
      __CallSettingFrame_12(iVar1,param_1,0x103);
    }
  }
  *(int *)(param_1 + 8) = iVar2;
  ExceptionList = local_14;
  return;
}

// ====== 0x00860ef8  FUN_00860ef8 ======
void __cdecl
FUN_00860ef8(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int param_5,
            byte *param_6,byte *param_7,int *param_8,int param_9,PVOID param_10)

{
  undefined *UNRECOVERED_JUMPTABLE;
  
  if (param_7 != (byte *)0x0) {
    FUN_008610b8((int)param_1,(int)param_2,param_6,param_7);
  }
  if (param_10 == (PVOID)0x0) {
    param_10 = param_2;
  }
  FUN_008590ba(param_10,param_1);
  FUN_00860e44((int)param_2,param_4,param_5,*param_8);
  *(int *)((int)param_2 + 8) = param_8[1] + 1;
  UNRECOVERED_JUMPTABLE =
       (undefined *)
       FUN_00860f73((DWORD)param_1,param_2,param_3,param_5,*(undefined4 *)(param_6 + 0xc),param_9,
                    0x100);
  if (UNRECOVERED_JUMPTABLE != (undefined *)0x0) {
    FUN_00859071(UNRECOVERED_JUMPTABLE);
  }
  return;
}

// ====== 0x00860f73  FUN_00860f73 ======
undefined4 __cdecl
FUN_00860f73(DWORD param_1,undefined4 param_2,DWORD param_3,undefined4 param_4,undefined4 param_5,
            int param_6,int param_7)

{
  DWORD *pDVar1;
  undefined4 uVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089b4e8;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  FUN_008613e1();
  FUN_008613e1();
  pDVar1 = FUN_008613e1();
  pDVar1[0x1b] = param_1;
  pDVar1 = FUN_008613e1();
  pDVar1[0x1c] = param_3;
  local_8 = 1;
  uVar2 = FUN_00859159(param_2,param_4,param_5,param_6,param_7);
  local_8 = 0xffffffff;
  FUN_00861040();
  ExceptionList = local_14;
  return uVar2;
}

// ====== 0x00861040  FUN_00861040 ======
void FUN_00861040(void)

{
  DWORD *pDVar1;
  int unaff_EBP;
  int unaff_ESI;
  int *unaff_EDI;
  
  *(undefined4 *)(unaff_ESI + -4) = *(undefined4 *)(unaff_EBP + -0x28);
  pDVar1 = FUN_008613e1();
  pDVar1[0x1b] = *(DWORD *)(unaff_EBP + -0x1c);
  pDVar1 = FUN_008613e1();
  pDVar1[0x1c] = *(DWORD *)(unaff_EBP + -0x20);
  if ((((*unaff_EDI == -0x1f928c9d) && (unaff_EDI[4] == 3)) && (unaff_EDI[5] == 0x19930520)) &&
     ((*(int *)(unaff_EBP + -0x24) == 0 && (*(int *)(unaff_EBP + -0x2c) != 0)))) {
    __abnormal_termination();
    FUN_0086127c((int)unaff_EDI);
  }
  return;
}

// ====== 0x008610b8  FUN_008610b8 ======
void __cdecl FUN_008610b8(int param_1,int param_2,byte *param_3,byte *param_4)

{
  int *piVar1;
  bool bVar2;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  int iVar3;
  undefined3 extraout_var_01;
  undefined3 extraout_var_02;
  undefined3 extraout_var_03;
  undefined3 extraout_var_04;
  undefined4 *puVar4;
  undefined3 extraout_var_05;
  undefined3 extraout_var_06;
  undefined3 extraout_var_07;
  uint uVar5;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0089b500;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  if (*(int *)(param_3 + 4) == 0) {
    return;
  }
  if (*(char *)(*(int *)(param_3 + 4) + 8) == '\0') {
    return;
  }
  if (*(int *)(param_3 + 8) == 0) {
    return;
  }
  piVar1 = (int *)(*(int *)(param_3 + 8) + 0xc + param_2);
  local_8 = 0;
  if ((*param_3 & 8) == 0) {
    if ((*param_4 & 1) == 0) {
      if (*(int *)(param_4 + 0x18) == 0) {
        ExceptionList = &local_14;
        bVar2 = FUN_0086bec9(*(void **)(param_1 + 0x18),1);
        if ((CONCAT31(extraout_var_03,bVar2) != 0) &&
           (bVar2 = FUN_0086bee5(piVar1,1), CONCAT31(extraout_var_04,bVar2) != 0)) {
          uVar5 = *(uint *)(param_4 + 0x14);
          puVar4 = (undefined4 *)FUN_008612e3(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
          FUN_00859530(piVar1,puVar4,uVar5);
          ExceptionList = local_14;
          return;
        }
      }
      else {
        ExceptionList = &local_14;
        bVar2 = FUN_0086bec9(*(void **)(param_1 + 0x18),1);
        if (((CONCAT31(extraout_var_05,bVar2) != 0) &&
            (bVar2 = FUN_0086bee5(piVar1,1), CONCAT31(extraout_var_06,bVar2) != 0)) &&
           (bVar2 = FUN_0086bf01(*(FARPROC *)(param_4 + 0x18)), CONCAT31(extraout_var_07,bVar2) != 0
           )) {
          if ((*param_4 & 4) != 0) {
            FUN_008612e3(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
            FUN_008590b3(piVar1,*(undefined **)(param_4 + 0x18));
            ExceptionList = local_14;
            return;
          }
          FUN_008612e3(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
          FUN_008590ac(piVar1,*(undefined **)(param_4 + 0x18));
          ExceptionList = local_14;
          return;
        }
      }
    }
    else {
      ExceptionList = &local_14;
      bVar2 = FUN_0086bec9(*(void **)(param_1 + 0x18),1);
      if ((CONCAT31(extraout_var_01,bVar2) != 0) &&
         (bVar2 = FUN_0086bee5(piVar1,1), CONCAT31(extraout_var_02,bVar2) != 0)) {
        FUN_00859530(piVar1,*(undefined4 **)(param_1 + 0x18),*(uint *)(param_4 + 0x14));
        if (*(int *)(param_4 + 0x14) != 4) {
          ExceptionList = local_14;
          return;
        }
        iVar3 = *piVar1;
        if (iVar3 == 0) {
          ExceptionList = local_14;
          return;
        }
        goto LAB_00861146;
      }
    }
  }
  else {
    ExceptionList = &local_14;
    bVar2 = FUN_0086bec9(*(void **)(param_1 + 0x18),1);
    if ((CONCAT31(extraout_var,bVar2) != 0) &&
       (bVar2 = FUN_0086bee5(piVar1,1), CONCAT31(extraout_var_00,bVar2) != 0)) {
      iVar3 = *(int *)(param_1 + 0x18);
      *piVar1 = iVar3;
LAB_00861146:
      iVar3 = FUN_008612e3(iVar3,(int *)(param_4 + 8));
      *piVar1 = iVar3;
      ExceptionList = local_14;
      return;
    }
  }
  FUN_0086156d();
  ExceptionList = local_14;
  return;
}

// ====== 0x0086127c  FUN_0086127c ======
void __cdecl FUN_0086127c(int param_1)

{
  undefined *UNRECOVERED_JUMPTABLE;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0089b510;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  if ((param_1 != 0) &&
     (UNRECOVERED_JUMPTABLE = *(undefined **)(*(int *)(param_1 + 0x1c) + 4),
     UNRECOVERED_JUMPTABLE != (undefined *)0x0)) {
    local_8 = 0;
    ExceptionList = &local_14;
    FUN_008590a5(*(undefined4 *)(param_1 + 0x18),UNRECOVERED_JUMPTABLE);
  }
  ExceptionList = local_14;
  return;
}

// ====== 0x008612e3  FUN_008612e3 ======
int __cdecl FUN_008612e3(int param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_2[1];
  iVar2 = *param_2 + param_1;
  if (-1 < iVar1) {
    iVar2 = iVar2 + *(int *)(*(int *)(iVar1 + param_1) + param_2[2]) + iVar1;
  }
  return iVar2;
}

// ====== 0x00861310  __CallSettingFrame@12 ======
/* WARNING: Restarted to delay deadcode elimination for space: stack */
/* Library Function - Single Match
    __CallSettingFrame@12
   
   Libraries: Visual Studio 2017 Debug, Visual Studio 2017 Release, Visual Studio 2019 Debug, Visual
   Studio 2019 Release */

void __CallSettingFrame_12(undefined4 param_1,undefined4 param_2,int param_3)

{
  code *pcVar1;
  
  pcVar1 = (code *)__NLG_Notify1(param_3);
  (*pcVar1)();
  if (param_3 == 0x100) {
    param_3 = 2;
  }
  __NLG_Notify1(param_3);
  return;
}

// ====== 0x0086135c  FUN_0086135c ======
undefined4 FUN_0086135c(void)

{
  DWORD *lpTlsValue;
  BOOL BVar1;
  DWORD DVar2;
  
  FUN_008609cc();
  dwTlsIndex_0097a850 = TlsAlloc();
  if (dwTlsIndex_0097a850 != 0xffffffff) {
    lpTlsValue = (DWORD *)FUN_00868228(1,0x74);
    if (lpTlsValue != (DWORD *)0x0) {
      BVar1 = TlsSetValue(dwTlsIndex_0097a850,lpTlsValue);
      if (BVar1 != 0) {
        FUN_008613ce((int)lpTlsValue);
        DVar2 = GetCurrentThreadId();
        lpTlsValue[1] = 0xffffffff;
        *lpTlsValue = DVar2;
        return 1;
      }
    }
  }
  return 0;
}

// ====== 0x008613ce  FUN_008613ce ======
void __cdecl FUN_008613ce(int param_1)

{
  *(undefined **)(param_1 + 0x50) = &DAT_0097ad10;
  *(undefined4 *)(param_1 + 0x14) = 1;
  return;
}

// ====== 0x008613e1  FUN_008613e1 ======
DWORD * FUN_008613e1(void)

{
  DWORD dwErrCode;
  DWORD *lpTlsValue;
  BOOL BVar1;
  DWORD DVar2;
  
  dwErrCode = GetLastError();
  lpTlsValue = (DWORD *)TlsGetValue(dwTlsIndex_0097a850);
  if (lpTlsValue == (DWORD *)0x0) {
    lpTlsValue = (DWORD *)FUN_00868228(1,0x74);
    if (lpTlsValue != (DWORD *)0x0) {
      BVar1 = TlsSetValue(dwTlsIndex_0097a850,lpTlsValue);
      if (BVar1 != 0) {
        FUN_008613ce((int)lpTlsValue);
        DVar2 = GetCurrentThreadId();
        lpTlsValue[1] = 0xffffffff;
        *lpTlsValue = DVar2;
        goto LAB_0086143c;
      }
    }
    __amsg_exit(0x10);
  }
LAB_0086143c:
  SetLastError(dwErrCode);
  return lpTlsValue;
}

// ====== 0x00861448  FUN_00861448 ======
void __cdecl FUN_00861448(undefined *param_1)

{
  if (dwTlsIndex_0097a850 != 0xffffffff) {
    if ((param_1 != (undefined *)0x0) ||
       (param_1 = (undefined *)TlsGetValue(dwTlsIndex_0097a850), param_1 != (undefined *)0x0)) {
      if (*(undefined **)(param_1 + 0x24) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x24));
      }
      if (*(undefined **)(param_1 + 0x28) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x28));
      }
      if (*(undefined **)(param_1 + 0x30) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x30));
      }
      if (*(undefined **)(param_1 + 0x38) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x38));
      }
      if (*(undefined **)(param_1 + 0x40) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x40));
      }
      if (*(undefined **)(param_1 + 0x44) != (undefined *)0x0) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x44));
      }
      if (*(undefined **)(param_1 + 0x50) != &DAT_0097ad10) {
        FUN_0085adc4(*(undefined **)(param_1 + 0x50));
      }
      FUN_0085adc4(param_1);
    }
    TlsSetValue(dwTlsIndex_0097a850,(LPVOID)0x0);
    return;
  }
  return;
}

// ====== 0x008614f4  FUN_008614f4 ======
void FUN_008614f4(void)

{
  DWORD *pDVar1;
  void *pvStack_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0089b520;
  puStack_10 = &LAB_0085fed0;
  pvStack_14 = ExceptionList;
  local_8 = 0;
  ExceptionList = &pvStack_14;
  pDVar1 = FUN_008613e1();
  if (pDVar1[0x18] != 0) {
    local_8 = 1;
    pDVar1 = FUN_008613e1();
    (*(code *)pDVar1[0x18])();
  }
  local_8 = 0xffffffff;
  FUN_0085a108();
  return;
}

// ====== 0x0086156d  FUN_0086156d ======
void FUN_0086156d(void)

{
  void *pvStack_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0089b538;
  puStack_10 = &LAB_0085fed0;
  pvStack_14 = ExceptionList;
  ExceptionList = &pvStack_14;
  if (PTR_FUN_0097a854 != (undefined *)0x0) {
    local_8 = 1;
    ExceptionList = &pvStack_14;
    (*(code *)PTR_FUN_0097a854)();
  }
  local_8 = 0xffffffff;
  FUN_008614f4();
  return;
}

// ====== 0x008615c3  FUN_008615c3 ======
SIZE_T __cdecl FUN_008615c3(undefined *param_1)

{
  byte *pbVar1;
  SIZE_T SVar2;
  undefined4 local_30;
  byte *local_2c;
  uint local_28;
  SIZE_T local_24;
  byte *local_20;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089b550;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  if (DAT_009b3ffc == 3) {
    ExceptionList = &local_14;
    FUN_00860a61(9);
    local_8 = 0;
    local_20 = (byte *)FUN_00865eaf((int)param_1);
    if (local_20 != (byte *)0x0) {
      local_24 = *(int *)(param_1 + -4) - 9;
    }
    SVar2 = local_24;
    local_8 = 0xffffffff;
    FUN_0086162d();
    pbVar1 = local_20;
  }
  else {
    ExceptionList = &local_14;
    if (DAT_009b3ffc != 2) goto LAB_00861681;
    ExceptionList = &local_14;
    FUN_00860a61(9);
    local_8 = 1;
    local_2c = (byte *)FUN_0086702c(param_1,&local_30,&local_28);
    if (local_2c != (byte *)0x0) {
      local_24 = (uint)*local_2c << 4;
    }
    SVar2 = local_24;
    local_8 = 0xffffffff;
    FUN_008616a8();
    pbVar1 = local_2c;
  }
  if (pbVar1 != (byte *)0x0) {
    ExceptionList = local_14;
    return SVar2;
  }
LAB_00861681:
  SVar2 = HeapSize(hHeap_009b3ff8,0,param_1);
  ExceptionList = local_14;
  return SVar2;
}

// ====== 0x0086162d  FUN_0086162d ======
void FUN_0086162d(void)

{
  FUN_00860ac2(9);
  return;
}

// ====== 0x008616a8  FUN_008616a8 ======
void FUN_008616a8(void)

{
  FUN_00860ac2(9);
  return;
}

// ====== 0x008616b1  FUN_008616b1 ======
void __fastcall FUN_008616b1(void *param_1)

{
  FUN_0086bf75(param_1,0x10000,0x30000);
  return;
}

// ====== 0x00861701  FUN_00861701 ======
void FUN_00861701(void)

{
  HMODULE hModule;
  FARPROC pFVar1;
  
  hModule = GetModuleHandleA("KERNEL32");
  if (hModule != (HMODULE)0x0) {
    pFVar1 = GetProcAddress(hModule,"IsProcessorFeaturePresent");
    if (pFVar1 != (FARPROC)0x0) {
      (*pFVar1)(0);
      return;
    }
  }
  FUN_008616c3();
  return;
}

// ====== 0x008616c3  FUN_008616c3 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 FUN_008616c3(void)

{
  if (_DAT_0088b9c0 < _DAT_0089b568 - (_DAT_0089b568 / _DAT_0089b570) * _DAT_0089b570) {
    return 1;
  }
  return 0;
}

// ====== 0x0086172a  FUN_0086172a ======
void __cdecl FUN_0086172a(char *param_1)

{
  char cVar1;
  char cVar2;
  undefined *this;
  uint uVar3;
  undefined *puVar4;
  
  this = (undefined *)(int)*param_1;
  uVar3 = FUN_0085b16a((uint)this);
  if (uVar3 != 0x65) {
    do {
      param_1 = param_1 + 1;
      if (cbMultiByte_0097a340 < 2) {
        uVar3 = (byte)PTR_DAT_0097a134[*param_1 * 2] & 4;
        this = PTR_DAT_0097a134;
      }
      else {
        puVar4 = (undefined *)0x4;
        uVar3 = FUN_0085c91d(this,(int)*param_1,4);
        this = puVar4;
      }
    } while (uVar3 != 0);
  }
  cVar2 = *param_1;
  *param_1 = DAT_0097a344;
  do {
    param_1 = param_1 + 1;
    cVar1 = *param_1;
    *param_1 = cVar2;
    cVar2 = cVar1;
  } while (*param_1 != '\0');
  return;
}

// ====== 0x008617ea  __fassign ======
/* Library Function - Single Match
    __fassign
   
   Library: Visual Studio 2003 Release */

void __cdecl __fassign(int flag,char *argument,char *number)

{
  void *in_ECX;
  void *local_c;
  void *local_8;
  
  if (flag != 0) {
    local_c = in_ECX;
    local_8 = in_ECX;
    FUN_0086c512(in_ECX,(uint *)&local_c,(byte *)number);
    *(void **)argument = local_c;
    *(void **)(argument + 4) = local_8;
    return;
  }
  FUN_0086c56d(in_ECX,(uint *)&number,(byte *)number);
  *(char **)argument = number;
  return;
}

// ====== 0x00861828  FUN_00861828 ======
undefined1 * __cdecl FUN_00861828(undefined8 *param_1,undefined1 *param_2,int param_3,int param_4)

{
  uint local_2c [6];
  int local_14 [4];
  
  FUN_0086c611((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),local_14,local_2c);
  FUN_0086c59a(param_2 + (uint)(0 < param_3) + (uint)(local_14[0] == 0x2d),param_3 + 1,(int)local_14
              );
  FUN_00861889(param_2,param_3,param_4,local_14,'\0');
  return param_2;
}

// ====== 0x00861889  FUN_00861889 ======
undefined1 * __cdecl
FUN_00861889(undefined1 *param_1,int param_2,int param_3,int *param_4,char param_5)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  uint *puVar3;
  int iVar4;
  
  if (param_5 != '\0') {
    FUN_00861b2b(param_1 + (*param_4 == 0x2d),(uint)(0 < param_2));
  }
  puVar1 = param_1;
  if (*param_4 == 0x2d) {
    *param_1 = 0x2d;
    puVar1 = param_1 + 1;
  }
  puVar2 = puVar1;
  if (0 < param_2) {
    puVar2 = puVar1 + 1;
    *puVar1 = puVar1[1];
    *puVar2 = DAT_0097a344;
  }
  puVar3 = FUN_00863840((uint *)(puVar2 + param_2 + (uint)(param_5 == '\0')),(uint *)"e+000");
  if (param_3 != 0) {
    *(undefined1 *)puVar3 = 0x45;
  }
  if (*(char *)param_4[3] != '0') {
    iVar4 = param_4[1] + -1;
    if (iVar4 < 0) {
      iVar4 = -iVar4;
      *(undefined1 *)((int)puVar3 + 1) = 0x2d;
    }
    if (99 < iVar4) {
      *(char *)((int)puVar3 + 2) = *(char *)((int)puVar3 + 2) + (char)(iVar4 / 100);
      iVar4 = iVar4 % 100;
    }
    if (9 < iVar4) {
      *(char *)((int)puVar3 + 3) = *(char *)((int)puVar3 + 3) + (char)(iVar4 / 10);
      iVar4 = iVar4 % 10;
    }
    *(char *)(puVar3 + 1) = (char)puVar3[1] + (char)iVar4;
  }
  return param_1;
}

// ====== 0x0086194b  FUN_0086194b ======
char * __cdecl FUN_0086194b(undefined8 *param_1,char *param_2,size_t param_3)

{
  uint local_2c [6];
  int local_14;
  int local_10;
  
  FUN_0086c611((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),&local_14,local_2c);
  FUN_0086c59a(param_2 + (local_14 == 0x2d),local_10 + param_3,(int)&local_14);
  FUN_008619a0(param_2,param_3,&local_14,'\0');
  return param_2;
}

// ====== 0x008619a0  FUN_008619a0 ======
char * __cdecl FUN_008619a0(char *param_1,size_t param_2,int *param_3,char param_4)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  
  iVar1 = param_3[1];
  if ((param_4 != '\0') && (iVar1 - 1U == param_2)) {
    iVar2 = *param_3;
    param_1[(uint)(iVar2 == 0x2d) + (iVar1 - 1U)] = '0';
    (param_1 + (uint)(iVar2 == 0x2d) + (iVar1 - 1U))[1] = '\0';
  }
  pcVar3 = param_1;
  if (*param_3 == 0x2d) {
    *param_1 = '-';
    pcVar3 = param_1 + 1;
  }
  if (param_3[1] < 1) {
    FUN_00861b2b(pcVar3,1);
    *pcVar3 = '0';
    pcVar3 = pcVar3 + 1;
  }
  else {
    pcVar3 = pcVar3 + param_3[1];
  }
  if (0 < (int)param_2) {
    FUN_00861b2b(pcVar3,1);
    *pcVar3 = DAT_0097a344;
    iVar1 = param_3[1];
    if (iVar1 < 0) {
      if ((param_4 != '\0') || (SBORROW4(param_2,-iVar1) == (int)(param_2 + iVar1) < 0)) {
        param_2 = -iVar1;
      }
      FUN_00861b2b(pcVar3 + 1,param_2);
      _memset(pcVar3 + 1,0x30,param_2);
    }
  }
  return param_1;
}

// ====== 0x00861a47  FUN_00861a47 ======
void __cdecl FUN_00861a47(undefined8 *param_1,char *param_2,size_t param_3,int param_4)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  uint local_2c [6];
  int local_14;
  int local_10;
  
  FUN_0086c611((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),&local_14,local_2c);
  iVar1 = local_10 + -1;
  FUN_0086c59a(param_2 + (local_14 == 0x2d),param_3,(int)&local_14);
  local_10 = local_10 + -1;
  if ((local_10 < -4) || ((int)param_3 <= local_10)) {
    FUN_00861889(param_2,param_3,param_4,&local_14,'\x01');
  }
  else {
    pcVar2 = param_2 + (local_14 == 0x2d);
    if (iVar1 < local_10) {
      do {
        pcVar3 = pcVar2;
        pcVar2 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      pcVar3[-1] = '\0';
    }
    FUN_008619a0(param_2,param_3,&local_14,'\x01');
  }
  return;
}

// ====== 0x00861ada  __cfltcvt ======
/* Library Function - Single Match
    __cfltcvt
   
   Library: Visual Studio 2003 Release */

errno_t __cdecl
__cfltcvt(double *arg,char *buffer,size_t sizeInBytes,int format,int precision,int caps)

{
  char *pcVar1;
  undefined1 *puVar2;
  
  if ((sizeInBytes == 0x65) || (sizeInBytes == 0x45)) {
    puVar2 = FUN_00861828(arg,buffer,format,precision);
  }
  else {
    if (sizeInBytes == 0x66) {
      pcVar1 = FUN_0086194b(arg,buffer,format);
      return (errno_t)pcVar1;
    }
    puVar2 = (undefined1 *)FUN_00861a47(arg,buffer,format,precision);
  }
  return (errno_t)puVar2;
}

// ====== 0x00861b2b  FUN_00861b2b ======
void __cdecl FUN_00861b2b(char *param_1,int param_2)

{
  size_t sVar1;
  
  if (param_2 != 0) {
    sVar1 = _strlen(param_1);
    FUN_00859530((undefined4 *)(param_1 + param_2),(undefined4 *)param_1,sVar1 + 1);
  }
  return;
}

// ====== 0x00861b50  FUN_00861b50 ======
uint __cdecl FUN_00861b50(uint param_1,int *param_2)

{
  uint uVar1;
  uint uVar2;
  char *pcVar3;
  int *piVar4;
  byte bVar5;
  undefined3 extraout_var;
  undefined *puVar6;
  int *piVar7;
  
  piVar4 = param_2;
  uVar1 = param_2[3];
  uVar2 = param_2[4];
  if (((uVar1 & 0x82) == 0) || ((uVar1 & 0x40) != 0)) {
LAB_00861c5c:
    param_2[3] = uVar1 | 0x20;
  }
  else {
    if ((uVar1 & 1) != 0) {
      param_2[1] = 0;
      if ((uVar1 & 0x10) == 0) goto LAB_00861c5c;
      *param_2 = param_2[2];
      param_2[3] = uVar1 & 0xfffffffe;
    }
    uVar1 = param_2[3];
    param_2[1] = 0;
    param_2 = (int *)0x0;
    piVar4[3] = uVar1 & 0xffffffef | 2;
    if (((uVar1 & 0x10c) == 0) &&
       (((piVar4 != (int *)&DAT_00979ed0 && (piVar4 != (int *)&DAT_00979ef0)) ||
        (bVar5 = FUN_0086c72c(uVar2), CONCAT31(extraout_var,bVar5) == 0)))) {
      FUN_0086b817(piVar4);
    }
    if ((*(ushort *)(piVar4 + 3) & 0x108) == 0) {
      piVar7 = (int *)0x1;
      param_2 = (int *)FUN_00863e30(uVar2,(char *)&param_1,1);
    }
    else {
      pcVar3 = (char *)piVar4[2];
      piVar7 = (int *)(*piVar4 - (int)pcVar3);
      *piVar4 = (int)(pcVar3 + 1);
      piVar4[1] = piVar4[6] + -1;
      if ((int)piVar7 < 1) {
        if (uVar2 == 0xffffffff) {
          puVar6 = &DAT_0097ad98;
        }
        else {
          puVar6 = (undefined *)((&DAT_009b4000)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
        }
        if ((puVar6[4] & 0x20) != 0) {
          FUN_00868150(uVar2,0,2);
        }
      }
      else {
        param_2 = (int *)FUN_00863e30(uVar2,pcVar3,(uint)piVar7);
      }
      *(undefined1 *)piVar4[2] = (undefined1)param_1;
    }
    if (param_2 == piVar7) {
      return param_1 & 0xff;
    }
    piVar4[3] = piVar4[3] | 0x20;
  }
  return 0xffffffff;
}

// ====== 0x008623a9  FUN_008623a9 ======
void __cdecl FUN_008623a9(uint param_1,int *param_2,int *param_3)

{
  int *piVar1;
  uint uVar2;
  
  piVar1 = param_2 + 1;
  *piVar1 = *piVar1 + -1;
  if (*piVar1 < 0) {
    uVar2 = FUN_00861b50(param_1,param_2);
  }
  else {
    *(undefined1 *)*param_2 = (undefined1)param_1;
    *param_2 = *param_2 + 1;
    uVar2 = param_1 & 0xff;
  }
  if (uVar2 == 0xffffffff) {
    *param_3 = -1;
    return;
  }
  *param_3 = *param_3 + 1;
  return;
}

// ====== 0x00861c68  FUN_00861c68 ======
int __cdecl FUN_00861c68(int *param_1,byte *param_2,undefined4 *param_3)

{
  int iVar1;
  uint uVar2;
  WCHAR *pWVar3;
  WCHAR *pWVar4;
  undefined4 uVar5;
  short *psVar6;
  int *piVar7;
  LPSTR pCVar8;
  byte bVar9;
  int iVar10;
  uint uVar11;
  LPSTR pCVar12;
  ulonglong uVar13;
  undefined8 uVar14;
  ulonglong uVar15;
  undefined1 local_24c [511];
  undefined1 local_4d;
  undefined4 local_4c;
  undefined4 local_48;
  uint local_44;
  uint local_40;
  CHAR local_3c [4];
  undefined4 local_38;
  int local_34;
  int local_30;
  int local_2c;
  int local_28;
  int local_24;
  int local_20;
  char local_1a;
  char local_19;
  int local_18;
  int local_14;
  LPSTR local_10;
  WCHAR *local_c;
  uint local_8;
  
  local_34 = 0;
  bVar9 = *param_2;
  param_2 = param_2 + 1;
  local_10 = (LPSTR)0x0;
  local_18 = 0;
  do {
    if ((bVar9 == 0) || (local_18 < 0)) {
      return local_18;
    }
    if (((char)bVar9 < ' ') || ('x' < (char)bVar9)) {
      uVar2 = 0;
    }
    else {
      uVar2 = (byte)"GAIsProcessorFeaturePresent"[(char)bVar9 + 0x12] & 0xf;
    }
    local_34 = (int)(char)(&DAT_0089b5a8)[uVar2 * 8 + local_34] >> 4;
    switch(local_34) {
    case 0:
switchD_00861cd6_caseD_0:
      local_28 = 0;
      if ((PTR_DAT_0097a134[(uint)bVar9 * 2 + 1] & 0x80) != 0) {
        FUN_008623a9((int)(char)bVar9,param_1,&local_18);
        bVar9 = *param_2;
        param_2 = param_2 + 1;
      }
      FUN_008623a9((int)(char)bVar9,param_1,&local_18);
      break;
    case 1:
      local_14 = -1;
      local_38 = 0;
      local_2c = 0;
      local_24 = 0;
      local_20 = 0;
      local_8 = 0;
      local_28 = 0;
      break;
    case 2:
      if (bVar9 == 0x20) {
        local_8 = local_8 | 2;
      }
      else if (bVar9 == 0x23) {
        local_8 = local_8 | 0x80;
      }
      else if (bVar9 == 0x2b) {
        local_8 = local_8 | 1;
      }
      else if (bVar9 == 0x2d) {
        local_8 = local_8 | 4;
      }
      else if (bVar9 == 0x30) {
        local_8 = local_8 | 8;
      }
      break;
    case 3:
      if (bVar9 == 0x2a) {
        local_24 = FUN_00862447((int *)&param_3);
        if (local_24 < 0) {
          local_8 = local_8 | 4;
          local_24 = -local_24;
        }
      }
      else {
        local_24 = (char)bVar9 + -0x30 + local_24 * 10;
      }
      break;
    case 4:
      local_14 = 0;
      break;
    case 5:
      if (bVar9 == 0x2a) {
        local_14 = FUN_00862447((int *)&param_3);
        if (local_14 < 0) {
          local_14 = -1;
        }
      }
      else {
        local_14 = (char)bVar9 + -0x30 + local_14 * 10;
      }
      break;
    case 6:
      if (bVar9 == 0x49) {
        if ((*param_2 != 0x36) || (param_2[1] != 0x34)) {
          local_34 = 0;
          goto switchD_00861cd6_caseD_0;
        }
        param_2 = param_2 + 2;
        local_8 = local_8 | 0x8000;
      }
      else if (bVar9 == 0x68) {
        local_8 = local_8 | 0x20;
      }
      else if (bVar9 == 0x6c) {
        local_8 = local_8 | 0x10;
      }
      else if (bVar9 == 0x77) {
        local_8 = local_8 | 0x800;
      }
      break;
    case 7:
      pWVar4 = local_c;
      if ((char)bVar9 < 'h') {
        if ((char)bVar9 < 'e') {
          if ((char)bVar9 < 'Y') {
            if (bVar9 == 0x58) {
LAB_008620e7:
              local_30 = 7;
LAB_008620ee:
              local_10 = (LPSTR)0x10;
              if ((local_8 & 0x80) != 0) {
                local_1a = '0';
                local_19 = (char)local_30 + 'Q';
                local_20 = 2;
              }
              goto LAB_00862158;
            }
            if (bVar9 != 0x43) {
              if ((bVar9 != 0x45) && (bVar9 != 0x47)) {
                if (bVar9 == 0x53) {
                  if ((local_8 & 0x830) == 0) {
                    local_8 = local_8 | 0x800;
                  }
                  goto LAB_00861e95;
                }
                goto LAB_00862272;
              }
              local_38 = 1;
              bVar9 = bVar9 + 0x20;
              goto LAB_00861ef6;
            }
            if ((local_8 & 0x830) == 0) {
              local_8 = local_8 | 0x800;
            }
LAB_00861f23:
            if ((local_8 & 0x810) == 0) {
              uVar5 = FUN_00862447((int *)&param_3);
              local_24c[0] = (char)uVar5;
              local_10 = (LPSTR)0x1;
            }
            else {
              uVar5 = FUN_00862464((int *)&param_3);
              local_10 = FUN_0086bbfa(local_24c,(WCHAR)uVar5);
              if ((int)local_10 < 0) {
                local_2c = 1;
              }
            }
            pWVar4 = (WCHAR *)local_24c;
          }
          else if (bVar9 == 0x5a) {
            psVar6 = (short *)FUN_00862447((int *)&param_3);
            if ((psVar6 == (short *)0x0) ||
               (pWVar4 = *(WCHAR **)(psVar6 + 2), pWVar4 == (WCHAR *)0x0)) {
              local_c = (WCHAR *)PTR_s__null__0097a870;
              pWVar4 = (WCHAR *)PTR_s__null__0097a870;
              goto LAB_00862068;
            }
            if ((local_8 & 0x800) == 0) {
              local_28 = 0;
              local_10 = (LPSTR)(int)*psVar6;
            }
            else {
              local_28 = 1;
              local_10 = (LPSTR)((uint)(int)*psVar6 >> 1);
            }
          }
          else {
            if (bVar9 == 99) goto LAB_00861f23;
            if (bVar9 == 100) goto LAB_0086214d;
          }
        }
        else {
LAB_00861ef6:
          local_8 = local_8 | 0x40;
          pWVar4 = (WCHAR *)local_24c;
          if (local_14 < 0) {
            local_14 = 6;
          }
          else if ((local_14 == 0) && (bVar9 == 0x67)) {
            local_14 = 1;
          }
          local_4c = *param_3;
          local_48 = param_3[1];
          param_3 = param_3 + 2;
          local_c = pWVar4;
          (*(code *)PTR_FUN_0097a858)(&local_4c,local_24c,(int)(char)bVar9,local_14,local_38);
          uVar2 = local_8 & 0x80;
          if ((uVar2 != 0) && (local_14 == 0)) {
            (*(code *)PTR_FUN_0097a864)(local_24c);
          }
          if ((bVar9 == 0x67) && (uVar2 == 0)) {
            (*(code *)PTR_FUN_0097a85c)(local_24c);
          }
          if (local_24c[0] == '-') {
            local_8 = local_8 | 0x100;
            pWVar4 = (WCHAR *)(local_24c + 1);
            local_c = pWVar4;
          }
LAB_00862068:
          local_10 = (LPSTR)_strlen((char *)pWVar4);
          pWVar4 = local_c;
        }
      }
      else {
        if (bVar9 == 0x69) {
LAB_0086214d:
          local_8 = local_8 | 0x40;
        }
        else {
          if (bVar9 == 0x6e) {
            piVar7 = (int *)FUN_00862447((int *)&param_3);
            if ((local_8 & 0x20) == 0) {
              *piVar7 = local_18;
            }
            else {
              *(undefined2 *)piVar7 = (undefined2)local_18;
            }
            local_2c = 1;
            break;
          }
          if (bVar9 == 0x6f) {
            local_10 = (LPSTR)0x8;
            if ((local_8 & 0x80) != 0) {
              local_8 = local_8 | 0x200;
            }
            goto LAB_00862158;
          }
          if (bVar9 == 0x70) {
            local_14 = 8;
            goto LAB_008620e7;
          }
          if (bVar9 == 0x73) {
LAB_00861e95:
            iVar10 = local_14;
            if (local_14 == -1) {
              iVar10 = 0x7fffffff;
            }
            pWVar3 = (WCHAR *)FUN_00862447((int *)&param_3);
            if ((local_8 & 0x810) == 0) {
              pWVar4 = pWVar3;
              if (pWVar3 == (WCHAR *)0x0) {
                pWVar3 = (WCHAR *)PTR_s__null__0097a870;
                pWVar4 = (WCHAR *)PTR_s__null__0097a870;
              }
              for (; (iVar10 != 0 && ((char)*pWVar3 != '\0')); pWVar3 = (WCHAR *)((int)pWVar3 + 1))
              {
                iVar10 = iVar10 + -1;
              }
              local_10 = (LPSTR)((int)pWVar3 - (int)pWVar4);
            }
            else {
              if (pWVar3 == (WCHAR *)0x0) {
                pWVar3 = (WCHAR *)PTR_DAT_0097a874;
              }
              local_28 = 1;
              for (pWVar4 = pWVar3; (iVar10 != 0 && (*pWVar4 != L'\0')); pWVar4 = pWVar4 + 1) {
                iVar10 = iVar10 + -1;
              }
              local_10 = (LPSTR)((int)pWVar4 - (int)pWVar3 >> 1);
              pWVar4 = pWVar3;
            }
            goto LAB_00862272;
          }
          if (bVar9 != 0x75) {
            if (bVar9 != 0x78) goto LAB_00862272;
            local_30 = 0x27;
            goto LAB_008620ee;
          }
        }
        local_10 = (LPSTR)0xa;
LAB_00862158:
        if ((local_8 & 0x8000) == 0) {
          if ((local_8 & 0x20) == 0) {
            if ((local_8 & 0x40) == 0) {
              uVar2 = FUN_00862447((int *)&param_3);
              uVar13 = (ulonglong)uVar2;
              goto LAB_008621ab;
            }
            uVar2 = FUN_00862447((int *)&param_3);
          }
          else if ((local_8 & 0x40) == 0) {
            uVar2 = FUN_00862447((int *)&param_3);
            uVar2 = uVar2 & 0xffff;
          }
          else {
            uVar5 = FUN_00862447((int *)&param_3);
            uVar2 = (uint)(short)uVar5;
          }
          uVar13 = (ulonglong)(int)uVar2;
        }
        else {
          uVar13 = FUN_00862454((int *)&param_3);
        }
LAB_008621ab:
        iVar10 = (int)(uVar13 >> 0x20);
        if ((((local_8 & 0x40) != 0) && (iVar10 == 0 || (longlong)uVar13 < 0)) &&
           ((longlong)uVar13 < 0)) {
          local_8 = local_8 | 0x100;
          uVar13 = CONCAT44(-(iVar10 + (uint)((int)uVar13 != 0)),-(int)uVar13);
        }
        uVar2 = (uint)(uVar13 >> 0x20);
        uVar15 = uVar13 & 0xffffffff;
        if ((local_8 & 0x8000) == 0) {
          uVar2 = 0;
        }
        if (local_14 < 0) {
          local_14 = 1;
        }
        else {
          local_8 = local_8 & 0xfffffff7;
        }
        if ((int)uVar13 == 0 && uVar2 == 0) {
          local_20 = 0;
        }
        local_c = (WCHAR *)&local_4d;
        while( true ) {
          uVar11 = (uint)uVar15;
          iVar10 = local_14 + -1;
          if ((local_14 < 1) && (uVar11 == 0 && uVar2 == 0)) break;
          local_40 = (int)local_10 >> 0x1f;
          local_44 = (uint)local_10;
          local_14 = iVar10;
          uVar14 = __aullrem(uVar11,uVar2,(uint)local_10,local_40);
          iVar10 = (int)uVar14 + 0x30;
          uVar15 = __aulldiv(uVar11,uVar2,local_44,local_40);
          uVar2 = (uint)(uVar15 >> 0x20);
          if (0x39 < iVar10) {
            iVar10 = iVar10 + local_30;
          }
          pWVar4 = (WCHAR *)((int)local_c + -1);
          *(char *)local_c = (char)iVar10;
          local_c = pWVar4;
        }
        iVar1 = -(int)local_c;
        local_10 = &local_4d + iVar1;
        pWVar4 = (WCHAR *)((int)local_c + 1);
        local_14 = iVar10;
        if (((local_8 & 0x200) != 0) && ((*(char *)pWVar4 != '0' || (local_10 == (LPSTR)0x0)))) {
          *(char *)local_c = '0';
          local_10 = (LPSTR)((int)&local_4c + iVar1);
          pWVar4 = local_c;
        }
      }
LAB_00862272:
      local_c = pWVar4;
      uVar2 = local_8;
      if (local_2c == 0) {
        if ((local_8 & 0x40) != 0) {
          if ((local_8 & 0x100) == 0) {
            if ((local_8 & 1) == 0) {
              if ((local_8 & 2) == 0) goto LAB_008622aa;
              local_1a = ' ';
            }
            else {
              local_1a = '+';
            }
          }
          else {
            local_1a = '-';
          }
          local_20 = 1;
        }
LAB_008622aa:
        iVar10 = (local_24 - local_20) - (int)local_10;
        if ((local_8 & 0xc) == 0) {
          FUN_008623de(0x20,iVar10,param_1,&local_18);
        }
        FUN_0086240f(&local_1a,local_20,param_1,&local_18);
        if (((uVar2 & 8) != 0) && ((uVar2 & 4) == 0)) {
          FUN_008623de(0x30,iVar10,param_1,&local_18);
        }
        if ((local_28 == 0) || (pCVar12 = local_10, pWVar4 = local_c, (int)local_10 < 1)) {
          FUN_0086240f((char *)local_c,(int)local_10,param_1,&local_18);
        }
        else {
          do {
            pCVar12 = pCVar12 + -1;
            pCVar8 = FUN_0086bbfa(local_3c,*pWVar4);
            if ((int)pCVar8 < 1) break;
            FUN_0086240f(local_3c,(int)pCVar8,param_1,&local_18);
            pWVar4 = pWVar4 + 1;
          } while (pCVar12 != (LPSTR)0x0);
        }
        if ((local_8 & 4) != 0) {
          FUN_008623de(0x20,iVar10,param_1,&local_18);
        }
      }
    }
    bVar9 = *param_2;
    param_2 = param_2 + 1;
  } while( true );
}

// ====== 0x008623de  FUN_008623de ======
void __cdecl FUN_008623de(uint param_1,int param_2,int *param_3,int *param_4)

{
  if (0 < param_2) {
    do {
      param_2 = param_2 + -1;
      FUN_008623a9(param_1,param_3,param_4);
      if (*param_4 == -1) {
        return;
      }
    } while (0 < param_2);
  }
  return;
}

// ====== 0x0086240f  FUN_0086240f ======
void __cdecl FUN_0086240f(char *param_1,int param_2,int *param_3,int *param_4)

{
  char cVar1;
  
  if (0 < param_2) {
    do {
      param_2 = param_2 + -1;
      cVar1 = *param_1;
      param_1 = param_1 + 1;
      FUN_008623a9((int)cVar1,param_3,param_4);
      if (*param_4 == -1) {
        return;
      }
    } while (0 < param_2);
  }
  return;
}

// ====== 0x00862447  FUN_00862447 ======
undefined4 __cdecl FUN_00862447(int *param_1)

{
  *param_1 = *param_1 + 4;
  return *(undefined4 *)(*param_1 + -4);
}

// ====== 0x00862464  FUN_00862464 ======
undefined4 __cdecl FUN_00862464(int *param_1)

{
  *param_1 = *param_1 + 4;
  return CONCAT22((short)((uint)*param_1 >> 0x10),*(undefined2 *)(*param_1 + -4));
}

// ====== 0x00862454  FUN_00862454 ======
undefined8 __cdecl FUN_00862454(int *param_1)

{
  *param_1 = *param_1 + 8;
  return *(undefined8 *)(*param_1 + -8);
}

// ====== 0x00862480  __cintrindisp2 ======
/* Library Function - Single Match
    __cintrindisp2
   
   Library: Visual Studio */

void __fastcall __cintrindisp2(undefined4 param_1,int param_2)

{
  __trandisp2(param_1,param_2);
  FUN_0086254a();
  return;
}

// ====== 0x008624be  __cintrindisp1 ======
/* Library Function - Single Match
    __cintrindisp1
   
   Library: Visual Studio */

void __fastcall __cintrindisp1(undefined4 param_1,int param_2)

{
  __trandisp1(param_1,param_2);
  FUN_0086254a();
  return;
}

// ====== 0x008624fb  __ctrandisp2 ======
/* Library Function - Single Match
    __ctrandisp2
   
   Libraries: Visual Studio 1998, Visual Studio 2003, Visual Studio 2005, Visual Studio 2008 */

void __cdecl __ctrandisp2(uint param_1,int param_2,uint param_3,int param_4)

{
  undefined4 extraout_ECX;
  int extraout_EDX;
  
  __fload(param_1,param_2);
  __fload(param_3,param_4);
  __trandisp2(extraout_ECX,extraout_EDX);
  FUN_00862543();
  return;
}

// ====== 0x00862543  FUN_00862543 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00862543(void)

{
  char cVar1;
  ushort uVar2;
  int unaff_EBP;
  ushort in_FPUStatusWord;
  float10 in_ST0;
  
  *(byte *)(unaff_EBP + -0x2c8) = *(byte *)(unaff_EBP + -0x2c8) & 0xfe;
  if (DAT_009b38ec != 0) {
    return;
  }
  *(double *)(unaff_EBP + -0x2d0) = (double)in_ST0;
  cVar1 = *(char *)(unaff_EBP + -0x90);
  if (cVar1 != '\0') {
    if ((cVar1 != -1) && (cVar1 != -2)) {
      if (cVar1 == '\0') {
        return;
      }
      *(int *)(unaff_EBP + -0x8e) = (int)cVar1;
      goto LAB_00862619;
    }
    uVar2 = *(ushort *)(unaff_EBP + -0x2ca) & 0x7ff0;
    if (uVar2 == 0) {
      *(undefined4 *)(unaff_EBP + -0x8e) = 4;
      in_ST0 = (float10)fscale(in_ST0,(float10)_DAT_0089b638);
      if (ABS(in_ST0) < (float10)_DAT_0089b628) {
        in_ST0 = in_ST0 * (float10)_DAT_0089b648;
      }
      goto LAB_00862619;
    }
    if (uVar2 == 0x7ff0) {
      *(undefined4 *)(unaff_EBP + -0x8e) = 3;
      in_ST0 = (float10)fscale(in_ST0,(float10)_DAT_0089b630);
      if ((float10)_DAT_0089b620 < ABS(in_ST0)) {
        in_ST0 = in_ST0 * (float10)_DAT_0089b640;
      }
      goto LAB_00862619;
    }
  }
  if ((*(ushort *)(unaff_EBP + -0xa4) & 0x20) != 0) {
    return;
  }
  if ((in_FPUStatusWord & 0x20) == 0) {
    return;
  }
  *(undefined4 *)(unaff_EBP + -0x8e) = 8;
LAB_00862619:
  *(int *)(unaff_EBP + -0x8a) = *(int *)(unaff_EBP + -0x94) + 1;
  if ((*(byte *)(unaff_EBP + -0x2c8) & 1) == 0) {
    *(undefined4 *)(unaff_EBP + -0x86) = *(undefined4 *)(unaff_EBP + 8);
    *(undefined4 *)(unaff_EBP + -0x82) = *(undefined4 *)(unaff_EBP + 0xc);
    if (*(char *)(*(int *)(unaff_EBP + -0x94) + 0xd) != '\x01') {
      *(undefined4 *)(unaff_EBP + -0x7e) = *(undefined4 *)(unaff_EBP + 0x10);
      *(undefined4 *)(unaff_EBP + -0x7a) = *(undefined4 *)(unaff_EBP + 0x14);
    }
  }
  *(double *)(unaff_EBP + -0x76) = (double)in_ST0;
  FUN_0086c755((int)*(char *)(*(int *)(unaff_EBP + -0x94) + 0xe),(int *)(unaff_EBP + -0x8e),
               (ushort *)(unaff_EBP + -0xa4));
  return;
}

// ====== 0x0086267b  __ctrandisp1 ======
/* Library Function - Single Match
    __ctrandisp1
   
   Library: Visual Studio */

void __cdecl __ctrandisp1(uint param_1,int param_2)

{
  undefined4 extraout_ECX;
  int extraout_EDX;
  
  __fload(param_1,param_2);
  __trandisp1(extraout_ECX,extraout_EDX);
  FUN_00862543();
  return;
}

// ====== 0x0086254a  FUN_0086254a ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0086254a(void)

{
  char cVar1;
  ushort uVar2;
  int unaff_EBP;
  ushort in_FPUStatusWord;
  float10 in_ST0;
  
  if (DAT_009b38ec != 0) {
    return;
  }
  *(double *)(unaff_EBP + -0x2d0) = (double)in_ST0;
  cVar1 = *(char *)(unaff_EBP + -0x90);
  if (cVar1 != '\0') {
    if ((cVar1 != -1) && (cVar1 != -2)) {
      if (cVar1 == '\0') {
        return;
      }
      *(int *)(unaff_EBP + -0x8e) = (int)cVar1;
      goto LAB_00862619;
    }
    uVar2 = *(ushort *)(unaff_EBP + -0x2ca) & 0x7ff0;
    if (uVar2 == 0) {
      *(undefined4 *)(unaff_EBP + -0x8e) = 4;
      in_ST0 = (float10)fscale(in_ST0,(float10)_DAT_0089b638);
      if (ABS(in_ST0) < (float10)_DAT_0089b628) {
        in_ST0 = in_ST0 * (float10)_DAT_0089b648;
      }
      goto LAB_00862619;
    }
    if (uVar2 == 0x7ff0) {
      *(undefined4 *)(unaff_EBP + -0x8e) = 3;
      in_ST0 = (float10)fscale(in_ST0,(float10)_DAT_0089b630);
      if ((float10)_DAT_0089b620 < ABS(in_ST0)) {
        in_ST0 = in_ST0 * (float10)_DAT_0089b640;
      }
      goto LAB_00862619;
    }
  }
  if ((*(ushort *)(unaff_EBP + -0xa4) & 0x20) != 0) {
    return;
  }
  if ((in_FPUStatusWord & 0x20) == 0) {
    return;
  }
  *(undefined4 *)(unaff_EBP + -0x8e) = 8;
LAB_00862619:
  *(int *)(unaff_EBP + -0x8a) = *(int *)(unaff_EBP + -0x94) + 1;
  if ((*(byte *)(unaff_EBP + -0x2c8) & 1) == 0) {
    *(undefined4 *)(unaff_EBP + -0x86) = *(undefined4 *)(unaff_EBP + 8);
    *(undefined4 *)(unaff_EBP + -0x82) = *(undefined4 *)(unaff_EBP + 0xc);
    if (*(char *)(*(int *)(unaff_EBP + -0x94) + 0xd) != '\x01') {
      *(undefined4 *)(unaff_EBP + -0x7e) = *(undefined4 *)(unaff_EBP + 0x10);
      *(undefined4 *)(unaff_EBP + -0x7a) = *(undefined4 *)(unaff_EBP + 0x14);
    }
  }
  *(double *)(unaff_EBP + -0x76) = (double)in_ST0;
  FUN_0086c755((int)*(char *)(*(int *)(unaff_EBP + -0x94) + 0xe),(int *)(unaff_EBP + -0x8e),
               (ushort *)(unaff_EBP + -0xa4));
  return;
}

// ====== 0x008626ae  __fload ======
/* Library Function - Single Match
    __fload
   
   Libraries: Visual Studio 1998, Visual Studio 2003, Visual Studio 2005, Visual Studio 2008 */

float10 __cdecl __fload(uint param_1,int param_2)

{
  float10 fVar1;
  
  if ((param_2._2_2_ & 0x7ff0) == 0x7ff0) {
    fVar1 = (float10)CONCAT28(param_2._2_2_ | 0x7fff,
                              CONCAT44(param_2 << 0xb | param_1 >> 0x15,param_1));
  }
  else {
    fVar1 = (float10)(double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
  }
  return fVar1;
}

// ====== 0x008626f0  __trandisp1 ======
/* Library Function - Single Match
    __trandisp1
   
   Library: Visual Studio */

void __fastcall __trandisp1(undefined4 param_1,int param_2)

{
  float10 fVar1;
  byte bVar2;
  undefined2 uVar3;
  int unaff_EBP;
  float10 in_ST0;
  
  if (*(char *)(param_2 + 0xe) == '\x05') {
    uVar3 = (undefined2)
            CONCAT31((uint3)((byte)((ushort)*(undefined2 *)(unaff_EBP + -0xa4) >> 8) & 0xfe | 2),
                     0x3f);
  }
  else {
    uVar3 = 0x133f;
  }
  *(undefined2 *)(unaff_EBP + -0xa2) = uVar3;
  fVar1 = (float10)0;
  *(int *)(unaff_EBP + -0x94) = param_2;
  *(ushort *)(unaff_EBP + -0xa0) =
       (ushort)NAN(in_ST0) << 8 | (ushort)(in_ST0 < fVar1) << 9 | (ushort)(in_ST0 != fVar1) << 10 |
       (ushort)(in_ST0 == fVar1) << 0xe;
  *(undefined1 *)(unaff_EBP + -0x90) = 0;
  bVar2 = (char)(*(char *)(unaff_EBP + -0x9f) << 1) >> 1;
                    /* WARNING: Could not recover jumptable at 0x00862755. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)(param_2 + (char)(&DAT_0097a89c)[(byte)((bVar2 & 7) << 1 | (char)bVar2 < '\0')] + 0x10
              ))();
  return;
}

// ====== 0x00862757  __trandisp2 ======
/* Library Function - Single Match
    __trandisp2
   
   Libraries: Visual Studio 1998, Visual Studio 2003, Visual Studio 2005, Visual Studio 2008 */

void __fastcall __trandisp2(undefined4 param_1,int param_2)

{
  float10 fVar1;
  char cVar2;
  byte bVar3;
  undefined2 uVar4;
  int unaff_EBP;
  float10 in_ST0;
  float10 in_ST1;
  
  if (*(char *)(param_2 + 0xe) == '\x05') {
    uVar4 = (undefined2)
            CONCAT31((uint3)((byte)((ushort)*(undefined2 *)(unaff_EBP + -0xa4) >> 8) & 0xfe | 2),
                     0x3f);
  }
  else {
    uVar4 = 0x133f;
  }
  *(undefined2 *)(unaff_EBP + -0xa2) = uVar4;
  fVar1 = (float10)0;
  *(int *)(unaff_EBP + -0x94) = param_2;
  *(ushort *)(unaff_EBP + -0xa0) =
       (ushort)NAN(in_ST0) << 8 | (ushort)(in_ST0 < fVar1) << 9 | (ushort)(in_ST0 != fVar1) << 10 |
       (ushort)(in_ST0 == fVar1) << 0xe;
  *(undefined1 *)(unaff_EBP + -0x90) = 0;
  fVar1 = (float10)0;
  *(ushort *)(unaff_EBP + -0xa0) =
       (ushort)NAN(in_ST1) << 8 | (ushort)(in_ST1 < fVar1) << 9 | (ushort)(in_ST1 != fVar1) << 10 |
       (ushort)(in_ST1 == fVar1) << 0xe;
  bVar3 = (char)(*(char *)(unaff_EBP + -0x9f) << 1) >> 1;
  cVar2 = (char)(*(char *)(unaff_EBP + -0x9f) << 1) >> 1;
                    /* WARNING: Could not recover jumptable at 0x008627e1. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)(param_2 + (char)((&DAT_0097a89c)[(byte)(cVar2 << 1 | cVar2 < '\0') & 0xf] |
                               (&DAT_0097a89c)[(byte)((bVar3 & 7) << 1 | (char)bVar3 < '\0')] << 2)
              + 0x10))();
  return;
}

// ====== 0x008628b3  FUN_008628b3 ======
void FUN_008628b3(void)

{
  return;
}

// ====== 0x008630c6  FUN_008630c6 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_008630c6(undefined4 param_1,uint param_2,ushort param_3)

{
  undefined4 in_EAX;
  int iVar1;
  float10 fVar2;
  float10 fVar3;
  undefined4 in_stack_0000001c;
  undefined2 in_stack_00000020;
  undefined2 in_stack_00000022;
  ushort in_stack_00000024;
  
  if ((((((CONCAT22(param_3,param_2._2_2_) ^ 0x700) & 0x700) == 0) &&
       ((&DAT_0097a8cc)[(param_2._2_2_ & 0x7800) >> 0xb] != '\0')) && ((param_3 & 0x7fff) != 0x7fff)
      ) && ((((in_stack_00000024 & 0x7fff) != 0 && ((in_stack_00000024 & 0x7fff) != 0x7fff)) &&
            (((CONCAT22(in_stack_00000022,in_stack_00000020) & 0x7fffffff) == 0 &&
             ((param_2 & 0x7fffffff) == 0)))))) {
    if ((ushort)((param_3 & 0x7fff) + 0x3f) < (in_stack_00000024 & 0x7fff)) {
      iVar1 = ((in_stack_00000024 & 0x7fff) - (param_3 & 0x7fff) & 0x3f | 0x20) + 1;
      fVar3 = ABS((float10)CONCAT28(in_stack_00000024 & 0x7fff | param_3 & 0x8000,
                                    CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1))));
      fVar2 = ABS((float10)CONCAT28(in_stack_00000024,
                                    CONCAT26(in_stack_00000022,
                                             CONCAT24(in_stack_00000020,in_stack_0000001c))));
      do {
        if (fVar3 <= fVar2) {
          fVar2 = fVar2 - fVar3;
        }
        fVar3 = fVar3 * (float10)_DAT_0097a8fc;
        iVar1 = iVar1 + -1;
      } while (iVar1 != 0);
    }
    else {
      while (-1 < (int)((in_stack_00000024 & 0x7fff) - ((param_3 & 0x7fff) + 10))) {
        fVar2 = (float10)CONCAT28(in_stack_00000024,
                                  CONCAT26(in_stack_00000022,
                                           CONCAT24(in_stack_00000020,in_stack_0000001c)));
        fVar3 = (float10)CONCAT28((in_stack_00000024 & 0x7fff) -
                                  ((in_stack_00000024 & 0x7fff) - param_3 & 7 | 4) |
                                  param_3 & 0x8000,
                                  CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)));
        fVar2 = fVar2 - (fVar2 / fVar3) * fVar3;
        in_stack_0000001c = SUB104(fVar2,0);
        in_stack_00000020 = (undefined2)((unkuint10)fVar2 >> 0x20);
        in_stack_00000022 = (undefined2)((unkuint10)fVar2 >> 0x30);
        in_stack_00000024 = (ushort)((unkuint10)fVar2 >> 0x40);
      }
    }
  }
  return in_EAX;
}

// ====== 0x008632cc  FUN_008632cc ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 FUN_008632cc(void)

{
  float10 in_ST0;
  float10 extraout_ST0;
  float10 extraout_ST0_00;
  float10 in_ST1;
  uint uVar2;
  float10 fVar1;
  
  uVar2 = (uint)((unkuint10)in_ST1 >> 0x20);
  if (((unkuint10)in_ST1 & 0) != 0) {
    FUN_008630c6(SUB104(in_ST1,0),uVar2,(ushort)((unkuint10)in_ST1 >> 0x40));
    return extraout_ST0;
  }
  if (SUB104(in_ST1,0) != 0 || uVar2 != 0) {
    fVar1 = in_ST1 * (float10)_DAT_0097a8e4;
    FUN_008630c6(SUB104(fVar1,0),(uint)((unkuint10)fVar1 >> 0x20),(ushort)((unkuint10)fVar1 >> 0x40)
                );
    return extraout_ST0_00;
  }
  return in_ST0 - (in_ST0 / in_ST1) * in_ST1;
}

// ====== 0x00863650  FUN_00863650 ======
float10 __fastcall
FUN_00863650(undefined4 param_1,uint param_2,undefined2 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  float10 in_ST0;
  int local_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 local_14;
  undefined4 local_10;
  double dStack_c;
  
  local_14 = param_7;
  local_10 = param_8;
  dStack_c = (double)in_ST0;
  uStack_1c = param_5;
  uStack_18 = param_6;
  uStack_20 = param_1;
  FUN_0086c755(param_2,&local_24,&param_3);
  return (float10)dStack_c;
}

// ====== 0x00863667  __startOneArgErrorHandling ======
/* Library Function - Single Match
    __startOneArgErrorHandling
   
   Library: Visual Studio */

float10 __fastcall
__startOneArgErrorHandling
          (undefined4 param_1,uint param_2,ushort param_3,undefined4 param_4,undefined4 param_5,
          undefined4 param_6)

{
  float10 in_ST0;
  int local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  double local_c;
  
  local_c = (double)in_ST0;
  local_1c = param_5;
  local_18 = param_6;
  local_20 = param_1;
  FUN_0086c755(param_2,&local_24,&param_3);
  return (float10)local_c;
}

// ====== 0x008636b0  FUN_008636b0 ======
undefined1  [10] FUN_008636b0(void)

{
  float10 in_ST0;
  float10 fVar1;
  undefined1 auVar2 [10];
  
  fVar1 = (float10)f2xm1(-(ROUND(in_ST0) - in_ST0));
  auVar2 = (undefined1  [10])fscale((float10)1 + fVar1,ROUND(in_ST0));
  return auVar2;
}

// ====== 0x008636c5  FUN_008636c5 ======
void FUN_008636c5(void)

{
  return;
}

// ====== 0x008636dc  FUN_008636dc ======
undefined4 FUN_008636dc(void)

{
  uint in_EAX;
  
  if ((in_EAX & 0x80000) != 0) {
    return 7;
  }
  return 1;
}

// ====== 0x008636f5  __fload_withFB ======
/* Library Function - Single Match
    __fload_withFB
   
   Library: Visual Studio */

uint __fastcall __fload_withFB(undefined4 param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = *(uint *)(param_2 + 4) & 0x7ff00000;
  if (uVar1 != 0x7ff00000) {
    return uVar1;
  }
  return *(uint *)(param_2 + 4);
}

// ====== 0x00863738  FUN_00863738 ======
uint __cdecl FUN_00863738(undefined4 param_1,uint param_2)

{
  if ((param_2 & 0x7ff00000) != 0x7ff00000) {
    return param_2 & 0x7ff00000;
  }
  return param_2;
}

// ====== 0x0086374e  FUN_0086374e ======
void FUN_0086374e(void)

{
  return;
}

// ====== 0x0086375b  __math_exit ======
/* Library Function - Single Match
    __math_exit
   
   Library: Visual Studio */

void __fastcall
__math_exit(undefined4 param_1,uint param_2,undefined4 param_3,undefined4 param_4,undefined4 param_5
           )

{
  ushort in_FPUStatusWord;
  ushort unaff_retaddr;
  
  if (((unaff_retaddr != 0x27f) && ((unaff_retaddr & 0x20) != 0)) &&
     ((in_FPUStatusWord & 0x20) != 0)) {
    __startOneArgErrorHandling(param_1,param_2,unaff_retaddr,param_3,param_4,param_5);
    return;
  }
  return;
}

// ====== 0x00863799  FUN_00863799 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall
FUN_00863799(undefined4 param_1,uint param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7)

{
  ushort in_FPUStatusWord;
  float10 in_ST0;
  ushort unaff_retaddr;
  uint uStack_4;
  
  uStack_4 = (uint)((ulonglong)(double)in_ST0 >> 0x20);
  if (((ulonglong)(double)in_ST0 & 0x7ff0000000000000) == 0) {
    fscale(in_ST0,(float10)_DAT_0089b67c);
  }
  else if ((uStack_4 & 0x7ff00000) == 0x7ff00000) {
    fscale(in_ST0,(float10)_DAT_0089b674);
  }
  else if (((unaff_retaddr == 0x27f) || ((unaff_retaddr & 0x20) != 0)) ||
          ((in_FPUStatusWord & 0x20) == 0)) {
    return;
  }
  if (param_2 == 0x1d) {
    FUN_00863650(param_1,0x1d,unaff_retaddr,param_3,param_4,param_5,param_6,param_7);
    return;
  }
  __startOneArgErrorHandling(param_1,param_2,unaff_retaddr,param_3,param_4,param_5);
  return;
}

// ====== 0x00863840  FUN_00863840 ======
uint * __cdecl FUN_00863840(uint *param_1,uint *param_2)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  
  uVar3 = (uint)param_2 & 3;
  puVar4 = param_1;
  while (uVar3 != 0) {
    bVar1 = (byte)*param_2;
    uVar3 = (uint)bVar1;
    param_2 = (uint *)((int)param_2 + 1);
    if (bVar1 == 0) goto LAB_00863928;
    *(byte *)puVar4 = bVar1;
    puVar4 = (uint *)((int)puVar4 + 1);
    uVar3 = (uint)param_2 & 3;
  }
  do {
    uVar2 = *param_2;
    uVar3 = *param_2;
    param_2 = param_2 + 1;
    if (((uVar2 ^ 0xffffffff ^ uVar2 + 0x7efefeff) & 0x81010100) != 0) {
      if ((char)uVar3 == '\0') {
LAB_00863928:
        *(byte *)puVar4 = (byte)uVar3;
        return param_1;
      }
      if ((char)(uVar3 >> 8) == '\0') {
        *(short *)puVar4 = (short)uVar3;
        return param_1;
      }
      if ((uVar3 & 0xff0000) == 0) {
        *(short *)puVar4 = (short)uVar3;
        *(byte *)((int)puVar4 + 2) = 0;
        return param_1;
      }
      if ((uVar3 & 0xff000000) == 0) {
        *puVar4 = uVar3;
        return param_1;
      }
    }
    *puVar4 = uVar3;
    puVar4 = puVar4 + 1;
  } while( true );
}

// ====== 0x00863850  FUN_00863850 ======
uint * __cdecl FUN_00863850(uint *param_1,uint *param_2)

{
  byte bVar1;
  uint uVar2;
  uint *puVar3;
  uint uVar4;
  uint *puVar5;
  
  uVar4 = (uint)param_1 & 3;
  puVar3 = param_1;
  while (uVar4 != 0) {
    uVar4 = *puVar3;
    puVar3 = (uint *)((int)puVar3 + 1);
    if ((byte)uVar4 == 0) goto LAB_0086389f;
    uVar4 = (uint)puVar3 & 3;
  }
  do {
    do {
      puVar5 = puVar3;
      puVar3 = puVar5 + 1;
    } while (((*puVar5 ^ 0xffffffff ^ *puVar5 + 0x7efefeff) & 0x81010100) == 0);
    uVar4 = *puVar5;
    if ((char)uVar4 == '\0') goto LAB_008638b1;
    if ((char)(uVar4 >> 8) == '\0') {
      puVar5 = (uint *)((int)puVar5 + 1);
      goto LAB_008638b1;
    }
    if ((uVar4 & 0xff0000) == 0) {
      puVar5 = (uint *)((int)puVar5 + 2);
      goto LAB_008638b1;
    }
  } while ((uVar4 & 0xff000000) != 0);
LAB_0086389f:
  puVar5 = (uint *)((int)puVar3 + -1);
LAB_008638b1:
  uVar4 = (uint)param_2 & 3;
  while (uVar4 != 0) {
    bVar1 = (byte)*param_2;
    uVar4 = (uint)bVar1;
    param_2 = (uint *)((int)param_2 + 1);
    if (bVar1 == 0) goto LAB_00863928;
    *(byte *)puVar5 = bVar1;
    puVar5 = (uint *)((int)puVar5 + 1);
    uVar4 = (uint)param_2 & 3;
  }
  do {
    uVar2 = *param_2;
    uVar4 = *param_2;
    param_2 = param_2 + 1;
    if (((uVar2 ^ 0xffffffff ^ uVar2 + 0x7efefeff) & 0x81010100) != 0) {
      if ((char)uVar4 == '\0') {
LAB_00863928:
        *(byte *)puVar5 = (byte)uVar4;
        return param_1;
      }
      if ((char)(uVar4 >> 8) == '\0') {
        *(short *)puVar5 = (short)uVar4;
        return param_1;
      }
      if ((uVar4 & 0xff0000) == 0) {
        *(short *)puVar5 = (short)uVar4;
        *(byte *)((int)puVar5 + 2) = 0;
        return param_1;
      }
      if ((uVar4 & 0xff000000) == 0) {
        *puVar5 = uVar4;
        return param_1;
      }
    }
    *puVar5 = uVar4;
    puVar5 = puVar5 + 1;
  } while( true );
}

// ====== 0x00863930  FUN_00863930 ======
undefined4 __cdecl FUN_00863930(uint param_1)

{
  undefined4 uVar1;
  DWORD *pDVar2;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    FUN_008680cf(param_1);
    uVar1 = FUN_0086398d(param_1);
    FUN_0086812e(param_1);
    return uVar1;
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 9;
  pDVar2 = FUN_0085cbe0();
  *pDVar2 = 0;
  return 0xffffffff;
}

// ====== 0x0086398d  FUN_0086398d ======
undefined4 __cdecl FUN_0086398d(uint param_1)

{
  int iVar1;
  int iVar2;
  HANDLE hObject;
  BOOL BVar3;
  DWORD DVar4;
  undefined4 uVar5;
  
  iVar1 = FUN_00867fe6(param_1);
  if (iVar1 != -1) {
    if ((param_1 == 1) || (param_1 == 2)) {
      iVar1 = FUN_00867fe6(2);
      iVar2 = FUN_00867fe6(1);
      if (iVar2 == iVar1) goto LAB_008639db;
    }
    hObject = (HANDLE)FUN_00867fe6(param_1);
    BVar3 = CloseHandle(hObject);
    if (BVar3 == 0) {
      DVar4 = GetLastError();
      goto LAB_008639dd;
    }
  }
LAB_008639db:
  DVar4 = 0;
LAB_008639dd:
  FUN_00867f67(param_1);
  *(undefined1 *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) = 0;
  if (DVar4 == 0) {
    uVar5 = 0;
  }
  else {
    FUN_0085cb64(DVar4);
    uVar5 = 0xffffffff;
  }
  return uVar5;
}

// ====== 0x00863a10  __freebuf ======
/* Library Function - Single Match
    __freebuf
   
   Library: Visual Studio 2003 Release */

void __cdecl __freebuf(FILE *_File)

{
  if (((_File->_flag & 0x83U) != 0) && ((_File->_flag & 8U) != 0)) {
    FUN_0085adc4(_File->_base);
    *(ushort *)&_File->_flag = (ushort)_File->_flag & 0xfbf7;
    _File->_ptr = (char *)0x0;
    _File->_base = (char *)0x0;
    _File->_cnt = 0;
  }
  return;
}

// ====== 0x00863a3b  FUN_00863a3b ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 * __cdecl FUN_00863a3b(LPCSTR param_1,char *param_2,uint param_3,undefined4 *param_4)

{
  char cVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  uint uVar5;
  uint uVar6;
  
  bVar4 = false;
  bVar3 = false;
  cVar1 = *param_2;
  if (cVar1 == 'a') {
    uVar5 = 0x109;
  }
  else {
    if (cVar1 == 'r') {
      uVar5 = 0;
      uVar6 = DAT_009b3cd8 | 1;
      goto LAB_00863a7c;
    }
    if (cVar1 != 'w') {
      return (undefined4 *)0x0;
    }
    uVar5 = 0x301;
  }
  uVar6 = DAT_009b3cd8 | 2;
LAB_00863a7c:
  bVar2 = true;
LAB_00863a7f:
  cVar1 = param_2[1];
  param_2 = param_2 + 1;
  if ((cVar1 == '\0') || (!bVar2)) {
    uVar5 = FUN_0086c83c(param_1,uVar5,param_3,0x1a4);
    if ((int)uVar5 < 0) {
      return (undefined4 *)0x0;
    }
    _DAT_009b3968 = _DAT_009b3968 + 1;
    param_4[3] = uVar6;
    param_4[1] = 0;
    *param_4 = 0;
    param_4[2] = 0;
    param_4[7] = 0;
    param_4[4] = uVar5;
    return param_4;
  }
  if (cVar1 < 'U') {
    if (cVar1 == 'T') {
      if ((uVar5 & 0x1000) == 0) {
        uVar5 = uVar5 | 0x1000;
        goto LAB_00863a7f;
      }
    }
    else if (cVar1 == '+') {
      if ((uVar5 & 2) == 0) {
        uVar5 = uVar5 & 0xfffffffe | 2;
        uVar6 = uVar6 & 0xfffffffc | 0x80;
        goto LAB_00863a7f;
      }
    }
    else if (cVar1 == 'D') {
      if ((uVar5 & 0x40) == 0) {
        uVar5 = uVar5 | 0x40;
        goto LAB_00863a7f;
      }
    }
    else if (cVar1 == 'R') {
      if (!bVar3) {
        bVar3 = true;
        uVar5 = uVar5 | 0x10;
        goto LAB_00863a7f;
      }
    }
    else if ((cVar1 == 'S') && (!bVar3)) {
      bVar3 = true;
      uVar5 = uVar5 | 0x20;
      goto LAB_00863a7f;
    }
  }
  else {
    if (cVar1 == 'b') {
      if ((uVar5 & 0xc000) != 0) goto LAB_00863b5f;
      uVar5 = uVar5 | 0x8000;
      goto LAB_00863a7f;
    }
    if (cVar1 == 'c') {
      if (!bVar4) {
        bVar4 = true;
        uVar6 = uVar6 | 0x4000;
        goto LAB_00863a7f;
      }
    }
    else {
      if (cVar1 != 'n') {
        if ((cVar1 != 't') || ((uVar5 & 0xc000) != 0)) goto LAB_00863b5f;
        uVar5 = uVar5 | 0x4000;
        goto LAB_00863a7f;
      }
      if (!bVar4) {
        bVar4 = true;
        uVar6 = uVar6 & 0xffffbfff;
        goto LAB_00863a7f;
      }
    }
  }
LAB_00863b5f:
  bVar2 = false;
  goto LAB_00863a7f;
}

// ====== 0x00863bab  FUN_00863bab ======
undefined4 * FUN_00863bab(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  undefined4 *puVar4;
  
  puVar4 = (undefined4 *)0x0;
  FUN_00860a61(2);
  iVar3 = 0;
  if (0 < DAT_009b5340) {
    do {
      iVar1 = *(int *)(DAT_009b4338 + iVar3 * 4);
      if (iVar1 == 0) {
        iVar3 = iVar3 * 4;
        pvVar2 = _malloc(0x38);
        *(void **)(iVar3 + DAT_009b4338) = pvVar2;
        if (*(int *)(iVar3 + DAT_009b4338) != 0) {
          InitializeCriticalSection((LPCRITICAL_SECTION)(*(int *)(iVar3 + DAT_009b4338) + 0x20));
          EnterCriticalSection((LPCRITICAL_SECTION)(*(int *)(iVar3 + DAT_009b4338) + 0x20));
          puVar4 = *(undefined4 **)(iVar3 + DAT_009b4338);
LAB_00863c4f:
          if (puVar4 != (undefined4 *)0x0) {
            puVar4[4] = 0xffffffff;
            puVar4[1] = 0;
            puVar4[3] = 0;
            puVar4[2] = 0;
            *puVar4 = 0;
            puVar4[7] = 0;
          }
        }
        break;
      }
      if ((*(byte *)(iVar1 + 0xc) & 0x83) == 0) {
        FUN_0085bfa2(iVar3,iVar1);
        iVar1 = *(int *)(DAT_009b4338 + iVar3 * 4);
        if ((*(byte *)(iVar1 + 0xc) & 0x83) == 0) {
          puVar4 = *(undefined4 **)(DAT_009b4338 + iVar3 * 4);
          goto LAB_00863c4f;
        }
        FUN_0085bff4(iVar3,iVar1);
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < DAT_009b5340);
  }
  FUN_00860ac2(2);
  return puVar4;
}

// ====== 0x00863c73  FUN_00863c73 ======
void FUN_00863c73(void)

{
  if ((DAT_009b3940 == 1) || ((DAT_009b3940 == 0 && (DAT_00979e88 == 1)))) {
    FUN_00863cac(0xfc);
    if (DAT_009b3a80 != (code *)0x0) {
      (*DAT_009b3a80)();
    }
    FUN_00863cac(0xff);
  }
  return;
}

// ====== 0x00863cac  FUN_00863cac ======
void __cdecl FUN_00863cac(DWORD param_1)

{
  undefined4 *puVar1;
  DWORD *pDVar2;
  DWORD DVar3;
  size_t sVar4;
  HANDLE hFile;
  int iVar5;
  uint *_Dest;
  undefined1 auStackY_1e3 [7];
  LPCVOID lpBuffer;
  LPOVERLAPPED lpOverlapped;
  uint local_1a8 [65];
  uint local_a4 [40];
  
  iVar5 = 0;
  pDVar2 = &DAT_0097aa10;
  do {
    if (param_1 == *pDVar2) break;
    pDVar2 = pDVar2 + 2;
    iVar5 = iVar5 + 1;
  } while ((int)pDVar2 < 0x97aaa0);
  if (param_1 == (&DAT_0097aa10)[iVar5 * 2]) {
    if ((DAT_009b3940 == 1) || ((DAT_009b3940 == 0 && (DAT_00979e88 == 1)))) {
      pDVar2 = &param_1;
      puVar1 = (undefined4 *)(iVar5 * 8 + 0x97aa14);
      lpOverlapped = (LPOVERLAPPED)0x0;
      sVar4 = _strlen((char *)*puVar1);
      lpBuffer = (LPCVOID)*puVar1;
      hFile = GetStdHandle(0xfffffff4);
      WriteFile(hFile,lpBuffer,sVar4,pDVar2,lpOverlapped);
    }
    else if (param_1 != 0xfc) {
      DVar3 = GetModuleFileNameA((HMODULE)0x0,(LPSTR)local_1a8,0x104);
      if (DVar3 == 0) {
        FUN_00863840(local_1a8,(uint *)"<program name unknown>");
      }
      _Dest = local_1a8;
      sVar4 = _strlen((char *)local_1a8);
      if (0x3c < sVar4 + 1) {
        sVar4 = _strlen((char *)local_1a8);
        _Dest = (uint *)(auStackY_1e3 + sVar4);
        _strncpy((char *)_Dest,"...",3);
      }
      FUN_00863840(local_a4,(uint *)"Runtime Error!\n\nProgram: ");
      FUN_00863850(local_a4,_Dest);
      FUN_00863850(local_a4,(uint *)&lpOutputString_008db194);
      FUN_00863850(local_a4,*(uint **)(iVar5 * 8 + 0x97aa14));
      auStackY_1e3._3_4_ = 0x863dd0;
      FUN_0086cb0b(local_a4,"Microsoft Visual C++ Runtime Library",0x12010);
    }
  }
  return;
}

// ====== 0x00863e30  FUN_00863e30 ======
int __cdecl FUN_00863e30(uint param_1,char *param_2,uint param_3)

{
  int iVar1;
  DWORD *pDVar2;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    FUN_008680cf(param_1);
    iVar1 = FUN_00863e95(param_1,param_2,param_3);
    FUN_0086812e(param_1);
    return iVar1;
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 9;
  pDVar2 = FUN_0085cbe0();
  *pDVar2 = 0;
  return -1;
}

// ====== 0x00863e95  FUN_00863e95 ======
int __cdecl FUN_00863e95(DWORD param_1,char *param_2,uint param_3)

{
  int *piVar1;
  char *pcVar2;
  char cVar3;
  int iVar4;
  char *pcVar5;
  BOOL BVar6;
  DWORD *pDVar7;
  char local_418 [1028];
  int local_14;
  DWORD local_10;
  DWORD local_c;
  char *local_8;
  
  local_c = 0;
  local_14 = 0;
  if (param_3 == 0) {
LAB_00863eae:
    iVar4 = 0;
  }
  else {
    piVar1 = &DAT_009b4000 + ((int)param_1 >> 5);
    iVar4 = (param_1 & 0x1f) * 0x24;
    if ((*(byte *)(*piVar1 + 4 + iVar4) & 0x20) != 0) {
      FUN_008681b5(param_1,0,2);
    }
    if ((*(byte *)((undefined4 *)(*piVar1 + iVar4) + 1) & 0x80) == 0) {
      BVar6 = WriteFile(*(HANDLE *)(*piVar1 + iVar4),param_2,param_3,&local_10,(LPOVERLAPPED)0x0);
      if (BVar6 == 0) {
        param_1 = GetLastError();
      }
      else {
        local_c = local_10;
        param_1 = 0;
      }
LAB_00863f7d:
      if (local_c != 0) {
        return local_c - local_14;
      }
      if (param_1 == 0) goto LAB_00863fef;
      if (param_1 == 5) {
        pDVar7 = FUN_0085cbd7();
        *pDVar7 = 9;
        pDVar7 = FUN_0085cbe0();
        *pDVar7 = 5;
      }
      else {
        FUN_0085cb64(param_1);
      }
    }
    else {
      local_8 = param_2;
      param_1 = 0;
      if (param_3 != 0) {
        do {
          pcVar5 = local_418;
          do {
            if (param_3 <= (uint)((int)local_8 - (int)param_2)) break;
            pcVar2 = local_8 + 1;
            cVar3 = *local_8;
            local_8 = pcVar2;
            if (cVar3 == '\n') {
              local_14 = local_14 + 1;
              *pcVar5 = '\r';
              pcVar5 = pcVar5 + 1;
            }
            *pcVar5 = cVar3;
            pcVar5 = pcVar5 + 1;
          } while ((int)pcVar5 - (int)local_418 < 0x400);
          BVar6 = WriteFile(*(HANDLE *)(*piVar1 + iVar4),local_418,(int)pcVar5 - (int)local_418,
                            &local_10,(LPOVERLAPPED)0x0);
          if (BVar6 == 0) {
            param_1 = GetLastError();
            goto LAB_00863f7d;
          }
          local_c = local_c + local_10;
          if (((int)local_10 < (int)pcVar5 - (int)local_418) ||
             (param_3 <= (uint)((int)local_8 - (int)param_2))) goto LAB_00863f7d;
        } while( true );
      }
LAB_00863fef:
      if (((*(byte *)(*piVar1 + 4 + iVar4) & 0x40) != 0) && (*param_2 == '\x1a')) goto LAB_00863eae;
      pDVar7 = FUN_0085cbd7();
      *pDVar7 = 0x1c;
      pDVar7 = FUN_0085cbe0();
      *pDVar7 = 0;
    }
    iVar4 = -1;
  }
  return iVar4;
}

// ====== 0x00864227  FUN_00864227 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_00864227(int param_1,int param_2,double param_3,double *param_4)

{
  double dVar1;
  double dVar2;
  int iVar3;
  
  dVar1 = (double)CONCAT44(param_2,param_1);
  if ((double)CONCAT44(param_2,param_1) < _DAT_0088bb30) {
    dVar1 = -dVar1;
  }
  dVar2 = _DAT_0097acd0;
  if (param_3._4_4_ == 0x7ff00000) {
    if (param_3._0_4_ != 0) {
LAB_008642b2:
      if (param_2 == 0x7ff00000) {
        if (param_1 != 0) {
          return 0;
        }
        if (_DAT_0088bb30 < param_3) goto LAB_0086434d;
        if (param_3 < _DAT_0088bb30) goto LAB_008642e4;
      }
      else {
        if (param_2 != -0x100000) {
          return 0;
        }
        if (param_1 != 0) {
          return 0;
        }
        iVar3 = FUN_00864357(param_3);
        if (_DAT_0088bb30 < param_3) {
          dVar2 = _DAT_0097acd0;
          if (iVar3 == 1) {
            dVar2 = -_DAT_0097acd0;
          }
          goto LAB_0086434d;
        }
        if (param_3 < _DAT_0088bb30) {
          dVar2 = _DAT_0097acf0;
          if (iVar3 != 1) {
            dVar2 = 0.0;
          }
          goto LAB_0086434d;
        }
      }
      dVar2 = 1.0;
      goto LAB_0086434d;
    }
    if (_DAT_0088b9c0 < dVar1) goto LAB_0086434d;
    if (_DAT_0088b9c0 <= dVar1) {
LAB_00864277:
      *param_4 = _DAT_0097acd8;
      return 1;
    }
  }
  else {
    if (param_3 != -INFINITY) goto LAB_008642b2;
    if (dVar1 <= _DAT_0088b9c0) {
      if (_DAT_0088b9c0 <= dVar1) goto LAB_00864277;
      goto LAB_0086434d;
    }
  }
LAB_008642e4:
  dVar2 = 0.0;
LAB_0086434d:
  *param_4 = dVar2;
  return 0;
}

// ====== 0x00864357  FUN_00864357 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_00864357(double param_1)

{
  double dVar1;
  uint uVar2;
  float10 fVar3;
  undefined4 uVar4;
  
  uVar2 = FUN_0086925a(SUB84(param_1,0),(uint)((ulonglong)param_1 >> 0x20));
  if ((uVar2 & 0x90) == 0) {
    fVar3 = __frnd(param_1);
    if ((double)fVar3 == param_1) {
      dVar1 = param_1 / _DAT_0089b068;
      fVar3 = __frnd(dVar1);
      if (fVar3 == (float10)dVar1) {
        uVar4 = 2;
      }
      else {
        uVar4 = 1;
      }
      return uVar4;
    }
  }
  return 0;
}

// ====== 0x008643bc  FUN_008643bc ======
undefined4 __cdecl FUN_008643bc(int param_1)

{
  BYTE *pBVar1;
  byte bVar2;
  byte bVar3;
  UINT CodePage;
  UINT *pUVar4;
  BOOL BVar5;
  uint uVar6;
  uint uVar7;
  BYTE *pBVar8;
  int iVar9;
  byte *pbVar10;
  int iVar11;
  byte *pbVar12;
  undefined4 uVar13;
  undefined4 *puVar14;
  _cpinfo local_1c;
  uint local_8;
  
  FUN_00860a61(0x19);
  CodePage = FUN_00864569(param_1);
  if (CodePage != CodePage_009b4104) {
    if (CodePage != 0) {
      iVar11 = 0;
      pUVar4 = &DAT_0097ab08;
LAB_008643f9:
      if (*pUVar4 != CodePage) goto code_r0x008643fd;
      local_8 = 0;
      puVar14 = (undefined4 *)&DAT_009b4220;
      for (iVar9 = 0x40; iVar9 != 0; iVar9 = iVar9 + -1) {
        *puVar14 = 0;
        puVar14 = puVar14 + 1;
      }
      *(undefined1 *)puVar14 = 0;
      pbVar12 = &DAT_0097ab18 + iVar11 * 0x30;
      do {
        bVar2 = *pbVar12;
        pbVar10 = pbVar12;
        while ((bVar2 != 0 && (bVar2 = pbVar10[1], bVar2 != 0))) {
          uVar7 = (uint)*pbVar10;
          if (uVar7 <= bVar2) {
            bVar3 = (&DAT_0097ab00)[local_8];
            do {
              (&DAT_009b4221)[uVar7] = (&DAT_009b4221)[uVar7] | bVar3;
              uVar7 = uVar7 + 1;
            } while (uVar7 <= bVar2);
          }
          pbVar10 = pbVar10 + 2;
          bVar2 = *pbVar10;
        }
        local_8 = local_8 + 1;
        pbVar12 = pbVar12 + 8;
      } while (local_8 < 4);
      DAT_009b411c = 1;
      CodePage_009b4104 = CodePage;
      DAT_009b4324 = FUN_008645b3(CodePage);
      DAT_009b4110 = (&DAT_0097ab0c)[iVar11 * 0xc];
      DAT_009b4114 = (&DAT_0097ab10)[iVar11 * 0xc];
      DAT_009b4118 = (&DAT_0097ab14)[iVar11 * 0xc];
      goto LAB_0086454d;
    }
    goto LAB_00864548;
  }
  goto LAB_008643e3;
code_r0x008643fd:
  pUVar4 = pUVar4 + 0xc;
  iVar11 = iVar11 + 1;
  if (0x97abf7 < (int)pUVar4) goto code_r0x00864408;
  goto LAB_008643f9;
code_r0x00864408:
  BVar5 = GetCPInfo(CodePage,&local_1c);
  uVar7 = 1;
  if (BVar5 == 1) {
    DAT_009b4324 = 0;
    puVar14 = (undefined4 *)&DAT_009b4220;
    for (iVar11 = 0x40; iVar11 != 0; iVar11 = iVar11 + -1) {
      *puVar14 = 0;
      puVar14 = puVar14 + 1;
    }
    *(undefined1 *)puVar14 = 0;
    if (local_1c.MaxCharSize < 2) {
      DAT_009b411c = 0;
      CodePage_009b4104 = CodePage;
    }
    else {
      CodePage_009b4104 = CodePage;
      if (local_1c.LeadByte[0] != '\0') {
        pBVar8 = local_1c.LeadByte + 1;
        do {
          bVar2 = *pBVar8;
          if (bVar2 == 0) break;
          for (uVar6 = (uint)pBVar8[-1]; uVar6 <= bVar2; uVar6 = uVar6 + 1) {
            (&DAT_009b4221)[uVar6] = (&DAT_009b4221)[uVar6] | 4;
          }
          pBVar1 = pBVar8 + 1;
          pBVar8 = pBVar8 + 2;
        } while (*pBVar1 != 0);
      }
      do {
        (&DAT_009b4221)[uVar7] = (&DAT_009b4221)[uVar7] | 8;
        uVar7 = uVar7 + 1;
      } while (uVar7 < 0xff);
      DAT_009b4324 = FUN_008645b3(CodePage);
      DAT_009b411c = 1;
    }
    DAT_009b4110 = 0;
    DAT_009b4114 = 0;
    DAT_009b4118 = 0;
  }
  else {
    if (DAT_009b3a84 == 0) {
      uVar13 = 0xffffffff;
      goto LAB_0086455a;
    }
LAB_00864548:
    FUN_008645e6();
  }
LAB_0086454d:
  FUN_0086460f();
LAB_008643e3:
  uVar13 = 0;
LAB_0086455a:
  FUN_00860ac2(0x19);
  return uVar13;
}

// ====== 0x00864569  FUN_00864569 ======
int __cdecl FUN_00864569(int param_1)

{
  int iVar1;
  bool bVar2;
  
  if (param_1 == -2) {
    DAT_009b3a84 = 1;
                    /* WARNING: Could not recover jumptable at 0x00864583. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    iVar1 = GetOEMCP();
    return iVar1;
  }
  if (param_1 == -3) {
    DAT_009b3a84 = 1;
                    /* WARNING: Could not recover jumptable at 0x00864598. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    iVar1 = GetACP();
    return iVar1;
  }
  bVar2 = param_1 == -4;
  if (bVar2) {
    param_1 = CodePage_009b3a78;
  }
  DAT_009b3a84 = (uint)bVar2;
  return param_1;
}

// ====== 0x008645b3  FUN_008645b3 ======
undefined4 __cdecl FUN_008645b3(int param_1)

{
  if (param_1 == 0x3a4) {
    return 0x411;
  }
  if (param_1 == 0x3a8) {
    return 0x804;
  }
  if (param_1 == 0x3b5) {
    return 0x412;
  }
  if (param_1 != 0x3b6) {
    return 0;
  }
  return 0x404;
}

// ====== 0x008645e6  FUN_008645e6 ======
void FUN_008645e6(void)

{
  int iVar1;
  undefined4 *puVar2;
  
  puVar2 = (undefined4 *)&DAT_009b4220;
  for (iVar1 = 0x40; iVar1 != 0; iVar1 = iVar1 + -1) {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  }
  *(undefined1 *)puVar2 = 0;
  CodePage_009b4104 = 0;
  DAT_009b411c = 0;
  DAT_009b4324 = 0;
  DAT_009b4110 = 0;
  DAT_009b4114 = 0;
  DAT_009b4118 = 0;
  return;
}

// ====== 0x0086460f  FUN_0086460f ======
void FUN_0086460f(void)

{
  BOOL BVar1;
  uint uVar2;
  char cVar3;
  uint uVar4;
  uint uVar5;
  ushort *puVar6;
  undefined1 uVar7;
  BYTE *pBVar8;
  CHAR *pCVar9;
  WORD local_518 [256];
  WCHAR local_318 [128];
  WCHAR local_218 [128];
  CHAR local_118 [256];
  _cpinfo local_18;
  
  BVar1 = GetCPInfo(CodePage_009b4104,&local_18);
  if (BVar1 == 1) {
    uVar2 = 0;
    do {
      local_118[uVar2] = (CHAR)uVar2;
      uVar2 = uVar2 + 1;
    } while (uVar2 < 0x100);
    local_118[0] = ' ';
    if (local_18.LeadByte[0] != 0) {
      pBVar8 = local_18.LeadByte + 1;
      do {
        uVar2 = (uint)local_18.LeadByte[0];
        if (uVar2 <= *pBVar8) {
          uVar4 = (*pBVar8 - uVar2) + 1;
          uVar5 = uVar4 >> 2;
          pCVar9 = local_118 + uVar2;
          while (uVar5 != 0) {
            uVar5 = uVar5 - 1;
            builtin_memcpy(pCVar9,"    ",4);
            pCVar9 = pCVar9 + 4;
          }
          for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
            *pCVar9 = ' ';
            pCVar9 = pCVar9 + 1;
          }
        }
        local_18.LeadByte[0] = pBVar8[1];
        pBVar8 = pBVar8 + 2;
      } while (local_18.LeadByte[0] != 0);
    }
    FUN_00868cf7(1,local_118,0x100,local_518,CodePage_009b4104,DAT_009b4324,0);
    FUN_00867640(DAT_009b4324,0x100,local_118,0x100,local_218,0x100,CodePage_009b4104,0);
    FUN_00867640(DAT_009b4324,0x200,local_118,0x100,local_318,0x100,CodePage_009b4104,0);
    uVar2 = 0;
    puVar6 = local_518;
    do {
      if ((*puVar6 & 1) == 0) {
        if ((*puVar6 & 2) != 0) {
          (&DAT_009b4221)[uVar2] = (&DAT_009b4221)[uVar2] | 0x20;
          uVar7 = *(undefined1 *)((int)local_318 + uVar2);
          goto LAB_0086471b;
        }
        (&DAT_009b4120)[uVar2] = 0;
      }
      else {
        (&DAT_009b4221)[uVar2] = (&DAT_009b4221)[uVar2] | 0x10;
        uVar7 = *(undefined1 *)((int)local_218 + uVar2);
LAB_0086471b:
        (&DAT_009b4120)[uVar2] = uVar7;
      }
      uVar2 = uVar2 + 1;
      puVar6 = puVar6 + 1;
    } while (uVar2 < 0x100);
  }
  else {
    uVar2 = 0;
    do {
      if ((uVar2 < 0x41) || (0x5a < uVar2)) {
        if ((0x60 < uVar2) && (uVar2 < 0x7b)) {
          (&DAT_009b4221)[uVar2] = (&DAT_009b4221)[uVar2] | 0x20;
          cVar3 = (char)uVar2 + -0x20;
          goto LAB_00864765;
        }
        (&DAT_009b4120)[uVar2] = 0;
      }
      else {
        (&DAT_009b4221)[uVar2] = (&DAT_009b4221)[uVar2] | 0x10;
        cVar3 = (char)uVar2 + ' ';
LAB_00864765:
        (&DAT_009b4120)[uVar2] = cVar3;
      }
      uVar2 = uVar2 + 1;
    } while (uVar2 < 0x100);
  }
  return;
}

// ====== 0x008647a4  FUN_008647a4 ======
void FUN_008647a4(void)

{
  if (DAT_009b534c == 0) {
    FUN_008643bc(-3);
    DAT_009b534c = 1;
  }
  return;
}

// ====== 0x008647c0  FUN_008647c0 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_008647c0(undefined4 *param_1)

{
  undefined4 uVar1;
  byte bVar2;
  undefined3 extraout_var;
  int iVar3;
  void *pvVar4;
  
  bVar2 = FUN_0086c72c(param_1[4]);
  if (CONCAT31(extraout_var,bVar2) == 0) {
    return 0;
  }
  if (param_1 == (undefined4 *)&DAT_00979ed0) {
    iVar3 = 0;
  }
  else {
    if (param_1 != (undefined4 *)&DAT_00979ef0) {
      return 0;
    }
    iVar3 = 1;
  }
  _DAT_009b3968 = _DAT_009b3968 + 1;
  if ((*(ushort *)(param_1 + 3) & 0x10c) != 0) {
    return 0;
  }
  if ((&DAT_009b3a88)[iVar3] == 0) {
    pvVar4 = _malloc(0x1000);
    (&DAT_009b3a88)[iVar3] = pvVar4;
    if (pvVar4 == (void *)0x0) {
      param_1[2] = param_1 + 5;
      *param_1 = param_1 + 5;
      param_1[6] = 2;
      param_1[1] = 2;
      goto LAB_0086483c;
    }
  }
  uVar1 = (&DAT_009b3a88)[iVar3];
  param_1[6] = 0x1000;
  param_1[2] = uVar1;
  *param_1 = uVar1;
  param_1[1] = 0x1000;
LAB_0086483c:
  *(ushort *)(param_1 + 3) = *(ushort *)(param_1 + 3) | 0x1102;
  return 1;
}

// ====== 0x0086484d  FUN_0086484d ======
void __cdecl FUN_0086484d(int param_1,int *param_2)

{
  if ((param_1 != 0) && ((*(byte *)((int)param_2 + 0xd) & 0x10) != 0)) {
    FUN_0085c6ac(param_2);
    *(byte *)((int)param_2 + 0xd) = *(byte *)((int)param_2 + 0xd) & 0xee;
    param_2[6] = 0;
    *param_2 = 0;
    param_2[2] = 0;
  }
  return;
}

// ====== 0x00864877  FUN_00864877 ======
void __thiscall FUN_00864877(void *this,uint *param_1,byte *param_2)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  ushort local_1c [6];
  uint local_10;
  undefined4 uStack_c;
  int local_8;
  
  uVar3 = 0;
  uVar1 = FUN_0086cb94(this,local_1c,&local_8,param_2,0,0,0,0);
  if ((uVar1 & 4) == 0) {
    iVar2 = FUN_0086c46c(local_1c,&local_10);
    if (((uVar1 & 2) != 0) || (iVar2 == 1)) {
      uVar3 = 0x80;
    }
    if (((uVar1 & 1) != 0) || (iVar2 == 2)) {
      uVar3 = uVar3 | 0x100;
    }
  }
  else {
    uVar3 = 0x200;
    local_10 = 0;
    uStack_c = 0;
  }
  *param_1 = uVar3;
  *(ulonglong *)(param_1 + 4) = CONCAT44(uStack_c,local_10);
  param_1[1] = local_8 - (int)param_2;
  return;
}

// ====== 0x008648f6  FUN_008648f6 ======
float10 __cdecl FUN_008648f6(int param_1,double param_2)

{
  DWORD *pDVar1;
  float10 fVar2;
  
  if (DAT_0097d848 == 0) {
    fVar2 = FUN_00864fb1(1,param_1);
    return fVar2;
  }
  pDVar1 = FUN_0085cbd7();
  *pDVar1 = 0x21;
  FUN_0086528a();
  return (float10)param_2;
}

// ====== 0x0086494a  FUN_0086494a ======
float10 __cdecl FUN_0086494a(int param_1,double param_2,double param_3)

{
  DWORD *pDVar1;
  float10 fVar2;
  
  if (DAT_0097d848 == 0) {
    fVar2 = FUN_00864fb1(1,param_1);
    return fVar2;
  }
  pDVar1 = FUN_0085cbd7();
  *pDVar1 = 0x21;
  FUN_0086528a();
  return (float10)(param_2 + param_3);
}

// ====== 0x008649aa  FUN_008649aa ======
float10 __cdecl
FUN_008649aa(uint param_1,uint param_2,undefined8 param_3,double param_4,uint param_5)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  float10 fVar3;
  uint local_5c [14];
  uint local_24;
  
  bVar1 = FUN_00864d9a(param_1,&param_4,param_5);
  if (CONCAT31(extraout_var,bVar1) == 0) {
    local_24 = local_24 & 0xfffffffe;
    FUN_00864ae7(local_5c,&param_5,param_1,param_2,&param_3,&param_4);
  }
  iVar2 = FUN_00865086((byte)param_1);
  if ((DAT_0097d848 == 0) && (iVar2 != 0)) {
    fVar3 = FUN_00864fb1(iVar2,param_2);
    return fVar3;
  }
  FUN_00865039(iVar2);
  FUN_0086528a();
  return (float10)param_4;
}

// ====== 0x00864a42  FUN_00864a42 ======
float10 __cdecl
FUN_00864a42(uint param_1,uint param_2,undefined8 param_3,undefined8 param_4,double param_5,
            uint param_6)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  float10 fVar3;
  uint local_5c [10];
  undefined8 local_34;
  uint local_24;
  
  bVar1 = FUN_00864d9a(param_1,&param_5,param_6);
  if (CONCAT31(extraout_var,bVar1) == 0) {
    local_24 = local_24 & 0xffffffe3 | 3;
    local_34 = param_4;
    FUN_00864ae7(local_5c,&param_6,param_1,param_2,&param_3,&param_5);
  }
  iVar2 = FUN_00865086((byte)param_1);
  if ((DAT_0097d848 == 0) && (iVar2 != 0)) {
    fVar3 = FUN_00864fb1(iVar2,param_2);
    return fVar3;
  }
  FUN_00865039(iVar2);
  FUN_0086528a();
  return (float10)param_5;
}

// ====== 0x00864ae7  FUN_00864ae7 ======
void __cdecl
FUN_00864ae7(uint *param_1,uint *param_2,uint param_3,uint param_4,undefined8 *param_5,
            undefined8 *param_6)

{
  uint *puVar1;
  undefined8 *puVar2;
  uint uVar3;
  
  uVar3 = param_3;
  puVar1 = param_2;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  if ((param_3 & 0x10) != 0) {
    param_3 = 0xc000008f;
    param_1[1] = param_1[1] | 1;
  }
  if ((uVar3 & 2) != 0) {
    param_3 = 0xc0000093;
    param_1[1] = param_1[1] | 2;
  }
  if ((uVar3 & 1) != 0) {
    param_3 = 0xc0000091;
    param_1[1] = param_1[1] | 4;
  }
  if ((uVar3 & 4) != 0) {
    param_3 = 0xc000008e;
    param_1[1] = param_1[1] | 8;
  }
  if ((uVar3 & 8) != 0) {
    param_3 = 0xc0000090;
    param_1[1] = param_1[1] | 0x10;
  }
  param_1[2] = (~*param_2 & 1) << 4 | param_1[2] & 0xffffffef;
  param_1[2] = (~*param_2 & 4) << 1 | param_1[2] & 0xfffffff7;
  param_1[2] = ~*param_2 >> 1 & 4 | param_1[2] & 0xfffffffb;
  param_1[2] = ~*param_2 >> 3 & 2 | param_1[2] & 0xfffffffd;
  param_1[2] = ~*param_2 >> 5 & 1 | param_1[2] & 0xfffffffe;
  uVar3 = FUN_0086526d();
  puVar2 = param_6;
  if ((uVar3 & 1) != 0) {
    param_1[3] = param_1[3] | 0x10;
  }
  if ((uVar3 & 4) != 0) {
    param_1[3] = param_1[3] | 8;
  }
  if ((uVar3 & 8) != 0) {
    param_1[3] = param_1[3] | 4;
  }
  if ((uVar3 & 0x10) != 0) {
    param_1[3] = param_1[3] | 2;
  }
  if ((uVar3 & 0x20) != 0) {
    param_1[3] = param_1[3] | 1;
  }
  uVar3 = *puVar1 & 0xc00;
  if (uVar3 == 0) {
    *param_1 = *param_1 & 0xfffffffc;
  }
  else {
    if (uVar3 == 0x400) {
      uVar3 = *param_1 & 0xfffffffd | 1;
    }
    else {
      if (uVar3 != 0x800) {
        if (uVar3 == 0xc00) {
          *param_1 = *param_1 | 3;
        }
        goto LAB_00864c5c;
      }
      uVar3 = *param_1 & 0xfffffffe | 2;
    }
    *param_1 = uVar3;
  }
LAB_00864c5c:
  uVar3 = *puVar1 & 0x300;
  if (uVar3 == 0) {
    uVar3 = *param_1 & 0xffffffeb | 8;
LAB_00864c92:
    *param_1 = uVar3;
  }
  else {
    if (uVar3 == 0x200) {
      uVar3 = *param_1 & 0xffffffe7 | 4;
      goto LAB_00864c92;
    }
    if (uVar3 == 0x300) {
      *param_1 = *param_1 & 0xffffffe3;
    }
  }
  *param_1 = (param_4 & 0xfff) << 5 | *param_1 & 0xfffe001f;
  param_1[8] = param_1[8] | 1;
  param_1[8] = param_1[8] & 0xffffffe3 | 2;
  *(undefined8 *)(param_1 + 4) = *param_5;
  param_1[0x14] = param_1[0x14] | 1;
  param_1[0x14] = param_1[0x14] & 0xffffffe3 | 2;
  *(undefined8 *)(param_1 + 0x10) = *param_6;
  FUN_0086527b();
  RaiseException(param_3,0,1,(ULONG_PTR *)&param_1);
  if ((param_1[2] & 0x10) != 0) {
    *puVar1 = *puVar1 & 0xfffffffe;
  }
  if ((param_1[2] & 8) != 0) {
    *puVar1 = *puVar1 & 0xfffffffb;
  }
  if ((param_1[2] & 4) != 0) {
    *puVar1 = *puVar1 & 0xfffffff7;
  }
  if ((param_1[2] & 2) != 0) {
    *puVar1 = *puVar1 & 0xffffffef;
  }
  if ((param_1[2] & 1) != 0) {
    *puVar1 = *puVar1 & 0xffffffdf;
  }
  uVar3 = *param_1 & 3;
  if (uVar3 == 0) {
    *puVar1 = *puVar1 & 0xfffff3ff;
  }
  else {
    if (uVar3 == 1) {
      uVar3 = *puVar1 & 0xfffff7ff | 0x400;
    }
    else {
      if (uVar3 != 2) {
        if (uVar3 == 3) {
          *(byte *)((int)puVar1 + 1) = *(byte *)((int)puVar1 + 1) | 0xc;
        }
        goto LAB_00864d67;
      }
      uVar3 = *puVar1 & 0xfffffbff | 0x800;
    }
    *puVar1 = uVar3;
  }
LAB_00864d67:
  uVar3 = *param_1 >> 2 & 7;
  if (uVar3 == 0) {
    uVar3 = *puVar1 & 0xfffff3ff | 0x300;
  }
  else {
    if (uVar3 != 1) {
      if (uVar3 == 2) {
        *puVar1 = *puVar1 & 0xfffff3ff;
      }
      goto LAB_00864d90;
    }
    uVar3 = *puVar1 & 0xfffff3ff | 0x200;
  }
  *puVar1 = uVar3;
LAB_00864d90:
  *puVar2 = *(undefined8 *)(param_1 + 0x10);
  return;
}

// ====== 0x00864d9a  FUN_00864d9a ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

bool __cdecl FUN_00864d9a(uint param_1,double *param_2,uint param_3)

{
  double dVar1;
  bool bVar2;
  uint uVar3;
  bool bVar4;
  float10 fVar5;
  undefined8 local_10;
  int local_8;
  
  uVar3 = param_1 & 0x1f;
  bVar2 = true;
  if (((param_1 & 8) != 0) && ((param_3 & 1) != 0)) {
    FUN_008652ad();
    uVar3 = param_1 & 0x17;
    goto LAB_00864f8f;
  }
  if (((param_1 & 4) != 0) && ((param_3 & 4) != 0)) {
    FUN_008652ad();
    uVar3 = param_1 & 0x1b;
    goto LAB_00864f8f;
  }
  if (((param_1 & 1) == 0) || ((param_3 & 8) == 0)) {
    if (((param_1 & 2) != 0) && ((param_3 & 0x10) != 0)) {
      bVar4 = (param_1 & 0x10) != 0;
      dVar1 = *param_2;
      if (dVar1 != _DAT_0088bb30) {
        fVar5 = FUN_008651ac(SUB84(dVar1,0),(uint)((ulonglong)dVar1 >> 0x20),&local_8);
        local_8 = local_8 + -0x600;
        if (local_8 < -0x432) {
          local_10 = 0.0;
          bVar4 = bVar2;
        }
        else {
          local_10 = (double)(ulonglong)
                             (SUB87((double)fVar5,0) & 0xfffffffffffff | 0x10000000000000);
          if (local_8 < -0x3fd) {
            local_8 = -0x3fd - local_8;
            do {
              if ((((ulonglong)local_10 & 1) != 0) && (!bVar4)) {
                bVar4 = bVar2;
              }
              uVar3 = (uint)local_10 >> 1;
              if (((ulonglong)local_10 & 0x100000000) != 0) {
                local_10._3_1_ = (byte)((ulonglong)local_10 >> 0x18) >> 1;
                local_10._0_3_ = (undefined3)uVar3;
                local_10._0_4_ = CONCAT13(local_10._3_1_,(undefined3)local_10) | 0x80000000;
                uVar3 = (uint)local_10;
              }
              local_10._0_4_ = uVar3;
              local_10 = (double)CONCAT44(local_10._4_4_ >> 1,(uint)local_10);
              local_8 = local_8 + -1;
            } while (local_8 != 0);
          }
          if ((double)fVar5 < _DAT_0088bb30) {
            local_10 = -local_10;
          }
        }
        *param_2 = local_10;
        bVar2 = bVar4;
      }
      if (bVar2) {
        FUN_008652ad();
      }
      uVar3 = param_1 & 0x1d;
    }
    goto LAB_00864f8f;
  }
  FUN_008652ad();
  uVar3 = param_3 & 0xc00;
  dVar1 = _DAT_0097acd0;
  if (uVar3 == 0) {
    if (*param_2 <= _DAT_0088bb30) {
      dVar1 = -_DAT_0097acd0;
    }
LAB_00864eaf:
    *param_2 = dVar1;
  }
  else {
    if (uVar3 == 0x400) {
      dVar1 = _DAT_0097ace0;
      if (*param_2 <= _DAT_0088bb30) {
        dVar1 = -_DAT_0097acd0;
      }
      goto LAB_00864eaf;
    }
    if (uVar3 == 0x800) {
      if (*param_2 <= _DAT_0088bb30) {
        dVar1 = -_DAT_0097ace0;
      }
      goto LAB_00864eaf;
    }
    if (uVar3 == 0xc00) {
      dVar1 = _DAT_0097ace0;
      if (*param_2 <= _DAT_0088bb30) {
        dVar1 = -_DAT_0097ace0;
      }
      goto LAB_00864eaf;
    }
  }
  uVar3 = param_1 & 0x1e;
LAB_00864f8f:
  if (((param_1 & 0x10) != 0) && ((param_3 & 0x20) != 0)) {
    FUN_008652ad();
    uVar3 = uVar3 & 0xffffffef;
  }
  return uVar3 == 0;
}

// ====== 0x00864fb1  FUN_00864fb1 ======
float10 __cdecl FUN_00864fb1(int param_1,int param_2)

{
  undefined *puVar1;
  int iVar2;
  undefined4 in_stack_0000001c;
  undefined4 in_stack_00000020;
  
  puVar1 = FUN_00865061(param_2);
  if (puVar1 != (undefined *)0x0) {
    FUN_0086528a();
    iVar2 = FUN_0086d0a1();
    if (iVar2 == 0) {
      FUN_00865039(param_1);
    }
    return (float10)(double)CONCAT44(in_stack_00000020,in_stack_0000001c);
  }
  FUN_0086528a();
  FUN_00865039(param_1);
  return (float10)(double)CONCAT44(in_stack_00000020,in_stack_0000001c);
}

// ====== 0x00865039  FUN_00865039 ======
void __cdecl FUN_00865039(int param_1)

{
  DWORD *pDVar1;
  
  if (param_1 == 1) {
    pDVar1 = FUN_0085cbd7();
    *pDVar1 = 0x21;
  }
  else if ((1 < param_1) && (param_1 < 4)) {
    pDVar1 = FUN_0085cbd7();
    *pDVar1 = 0x22;
    return;
  }
  return;
}

// ====== 0x00865061  FUN_00865061 ======
undefined * __cdecl FUN_00865061(int param_1)

{
  int *piVar1;
  int iVar2;
  
  iVar2 = 0;
  piVar1 = &DAT_0097abf8;
  do {
    if (*piVar1 == param_1) {
      return (&PTR_DAT_0097abfc)[iVar2 * 2];
    }
    piVar1 = piVar1 + 2;
    iVar2 = iVar2 + 1;
  } while ((int)piVar1 < 0x97acd0);
  return (undefined *)0x0;
}

// ====== 0x00865086  FUN_00865086 ======
int __cdecl FUN_00865086(byte param_1)

{
  undefined4 uStack_4;
  
  if ((param_1 & 0x20) == 0) {
    if ((param_1 & 8) == 0) {
      if ((param_1 & 4) == 0) {
        if ((param_1 & 1) == 0) {
          return (param_1 & 2) << 1;
        }
        uStack_4 = 3;
      }
      else {
        uStack_4 = 2;
      }
    }
    else {
      uStack_4 = 1;
    }
  }
  else {
    uStack_4 = 5;
  }
  return uStack_4;
}

// ====== 0x008650b3  __frnd ======
/* Library Function - Single Match
    __frnd
   
   Libraries: Visual Studio 2008 Release, Visual Studio 2010 Release, Visual Studio 2012 Release,
   Visual Studio 2019 Release */

float10 __cdecl __frnd(double param_1)

{
  return (float10)ROUND(param_1);
}

// ====== 0x008650c5  FUN_008650c5 ======
float10 __cdecl FUN_008650c5(undefined8 param_1,short param_2)

{
  undefined8 local_c;
  
  local_c = (double)CONCAT26((param_2 + 0x3fe) * 0x10 | param_1._6_2_ & 0x800f,(int6)param_1);
  return (float10)local_c;
}

// ====== 0x008650ee  FUN_008650ee ======
int __cdecl FUN_008650ee(undefined4 param_1,undefined8 param_2)

{
  return (int)(short)(((ushort)(param_2._2_4_ >> 4) & 0x7ff) - 0x3fe);
}

// ====== 0x0086512e  FUN_0086512e ======
float10 __cdecl FUN_0086512e(undefined8 param_1,short param_2)

{
  undefined8 local_c;
  
  local_c = (double)CONCAT26(param_2 << 4 | param_1._6_2_ & 0x800f,(int6)param_1);
  return (float10)local_c;
}

// ====== 0x00865152  FUN_00865152 ======
undefined4 __cdecl FUN_00865152(int param_1,uint param_2)

{
  undefined4 uStack_8;
  
  if (param_2 == 0x7ff00000) {
    if (param_1 == 0) {
      return 1;
    }
  }
  else if ((param_2 == 0xfff00000) && (param_1 == 0)) {
    return 2;
  }
  if ((param_2._2_2_ & 0x7ff8) == 0x7ff8) {
    uStack_8 = 3;
  }
  else {
    if (((param_2._2_2_ & 0x7ff8) != 0x7ff0) || (((param_2 & 0x7ffff) == 0 && (param_1 == 0)))) {
      return 0;
    }
    uStack_8 = 4;
  }
  return uStack_8;
}

// ====== 0x008651ac  FUN_008651ac ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __cdecl FUN_008651ac(uint param_1,uint param_2,int *param_3)

{
  ushort uVar1;
  int iVar2;
  bool bVar3;
  int iVar4;
  float10 fVar5;
  undefined8 local_c;
  
  if ((double)CONCAT17(param_2._3_1_,CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))) ==
      _DAT_0088bb30) {
    iVar4 = 0;
    local_c = 0.0;
  }
  else if (((param_2 & 0x7ff00000) == 0) && (((param_2 & 0xfffff) != 0 || (param_1 != 0)))) {
    iVar4 = -0x3fd;
    if (_DAT_0088bb30 <=
        (double)CONCAT17(param_2._3_1_,CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1)))) {
      bVar3 = false;
    }
    else {
      bVar3 = true;
    }
    while ((param_2._2_1_ & 0x10) == 0) {
      iVar2 = CONCAT13(param_2._3_1_,CONCAT12(param_2._2_1_,(ushort)param_2)) << 1;
      param_2._0_2_ = (ushort)iVar2;
      param_2._2_1_ = (byte)((uint)iVar2 >> 0x10);
      param_2._3_1_ = (byte)((uint)iVar2 >> 0x18);
      if ((param_1 & 0x80000000) != 0) {
        param_2._0_2_ = (ushort)param_2 | 1;
      }
      param_1 = param_1 << 1;
      iVar4 = iVar4 + -1;
    }
    uVar1 = CONCAT11(param_2._3_1_,param_2._2_1_) & 0xffef;
    param_2._2_1_ = (byte)uVar1;
    param_2._3_1_ = (byte)(uVar1 >> 8);
    if (bVar3) {
      param_2._3_1_ = param_2._3_1_ | 0x80;
    }
    fVar5 = FUN_008650c5(CONCAT17(param_2._3_1_,
                                  CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))),0);
    local_c = (double)fVar5;
  }
  else {
    fVar5 = FUN_008650c5(CONCAT17(param_2._3_1_,
                                  CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))),0);
    local_c = (double)fVar5;
    iVar4 = (short)((ushort)(param_2 >> 0x14) & 0x7ff) + -0x3fe;
  }
  *param_3 = iVar4;
  return (float10)local_c;
}

// ====== 0x0086526d  FUN_0086526d ======
int FUN_0086526d(void)

{
  short in_FPUStatusWord;
  
  return (int)in_FPUStatusWord;
}

// ====== 0x0086527b  FUN_0086527b ======
int FUN_0086527b(void)

{
  short in_FPUStatusWord;
  
  return (int)in_FPUStatusWord;
}

// ====== 0x0086528a  FUN_0086528a ======
int FUN_0086528a(void)

{
  short in_FPUControlWord;
  
  return (int)in_FPUControlWord;
}

// ====== 0x008652ad  FUN_008652ad ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_008652ad(void)

{
  return;
}

// ====== 0x00865303  FUN_00865303 ======
LONG __cdecl FUN_00865303(int param_1,_EXCEPTION_POINTERS *param_2)

{
  code *pcVar1;
  DWORD DVar2;
  DWORD DVar3;
  DWORD *pDVar4;
  int *piVar5;
  LONG LVar6;
  int iVar7;
  int iVar8;
  
  pDVar4 = FUN_008613e1();
  piVar5 = FUN_00865441(param_1,(int *)pDVar4[0x14]);
  if ((piVar5 == (int *)0x0) || (pcVar1 = (code *)piVar5[2], pcVar1 == (code *)0x0)) {
    LVar6 = UnhandledExceptionFilter(param_2);
  }
  else if (pcVar1 == (code *)&DAT_00000005) {
    piVar5[2] = 0;
    LVar6 = 1;
  }
  else {
    if (pcVar1 != (code *)0x1) {
      DVar2 = pDVar4[0x15];
      pDVar4[0x15] = (DWORD)param_2;
      if (piVar5[1] == 8) {
        if (DAT_0097ad88 < DAT_0097ad8c + DAT_0097ad88) {
          iVar7 = DAT_0097ad88 * 0xc;
          iVar8 = DAT_0097ad88;
          do {
            *(undefined4 *)(iVar7 + 8 + pDVar4[0x14]) = 0;
            iVar8 = iVar8 + 1;
            iVar7 = iVar7 + 0xc;
          } while (iVar8 < DAT_0097ad8c + DAT_0097ad88);
        }
        iVar7 = *piVar5;
        DVar3 = pDVar4[0x16];
        if (iVar7 == -0x3fffff72) {
          pDVar4[0x16] = 0x83;
        }
        else if (iVar7 == -0x3fffff70) {
          pDVar4[0x16] = 0x81;
        }
        else if (iVar7 == -0x3fffff6f) {
          pDVar4[0x16] = 0x84;
        }
        else if (iVar7 == -0x3fffff6d) {
          pDVar4[0x16] = 0x85;
        }
        else if (iVar7 == -0x3fffff73) {
          pDVar4[0x16] = 0x82;
        }
        else if (iVar7 == -0x3fffff71) {
          pDVar4[0x16] = 0x86;
        }
        else if (iVar7 == -0x3fffff6e) {
          pDVar4[0x16] = 0x8a;
        }
        (*pcVar1)(8,pDVar4[0x16]);
        pDVar4[0x16] = DVar3;
      }
      else {
        piVar5[2] = 0;
        (*pcVar1)(piVar5[1]);
      }
      pDVar4[0x15] = DVar2;
    }
    LVar6 = -1;
  }
  return LVar6;
}

// ====== 0x00865441  FUN_00865441 ======
int * __cdecl FUN_00865441(int param_1,int *param_2)

{
  int *piVar1;
  
  piVar1 = param_2;
  if (*param_2 != param_1) {
    do {
      piVar1 = piVar1 + 3;
      if (param_2 + DAT_0097ad94 * 3 <= piVar1) break;
    } while (*piVar1 != param_1);
  }
  if ((param_2 + DAT_0097ad94 * 3 <= piVar1) || (*piVar1 != param_1)) {
    piVar1 = (int *)0x0;
  }
  return piVar1;
}

// ====== 0x0086547b  FUN_0086547b ======
byte * FUN_0086547b(void)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  byte *pbVar4;
  
  if (DAT_009b534c == 0) {
    FUN_008647a4();
  }
  bVar1 = *DAT_009b5344;
  pbVar4 = DAT_009b5344;
  if (bVar1 == 0x22) {
    while( true ) {
      pbVar3 = pbVar4;
      bVar1 = pbVar3[1];
      pbVar4 = pbVar3 + 1;
      if ((bVar1 == 0x22) || (bVar1 == 0)) break;
      iVar2 = FUN_0086d138((uint)bVar1);
      if (iVar2 != 0) {
        pbVar4 = pbVar3 + 2;
      }
    }
    if (*pbVar4 == 0x22) goto LAB_008654b8;
  }
  else {
    while (0x20 < bVar1) {
      bVar1 = pbVar4[1];
      pbVar4 = pbVar4 + 1;
    }
  }
  for (; (*pbVar4 != 0 && (*pbVar4 < 0x21)); pbVar4 = pbVar4 + 1) {
LAB_008654b8:
  }
  return pbVar4;
}

// ====== 0x008654d3  FUN_008654d3 ======
void FUN_008654d3(void)

{
  char cVar1;
  size_t sVar2;
  undefined4 *puVar3;
  void *pvVar4;
  int iVar5;
  uint *puVar6;
  
  if (DAT_009b534c == 0) {
    FUN_008647a4();
  }
  iVar5 = 0;
  for (puVar6 = DAT_009b3938; (char)*puVar6 != '\0'; puVar6 = (uint *)((int)puVar6 + sVar2 + 1)) {
    if ((char)*puVar6 != '=') {
      iVar5 = iVar5 + 1;
    }
    sVar2 = _strlen((char *)puVar6);
  }
  puVar3 = (undefined4 *)_malloc(iVar5 * 4 + 4);
  DAT_009b3914 = puVar3;
  if (puVar3 == (undefined4 *)0x0) {
    __amsg_exit(9);
  }
  cVar1 = (char)*DAT_009b3938;
  puVar6 = DAT_009b3938;
  while (cVar1 != '\0') {
    sVar2 = _strlen((char *)puVar6);
    if ((char)*puVar6 != '=') {
      pvVar4 = _malloc(sVar2 + 1);
      *puVar3 = pvVar4;
      if (pvVar4 == (void *)0x0) {
        __amsg_exit(9);
      }
      FUN_00863840((uint *)*puVar3,puVar6);
      puVar3 = puVar3 + 1;
    }
    puVar6 = (uint *)((int)puVar6 + sVar2 + 1);
    cVar1 = (char)*puVar6;
  }
  FUN_0085adc4((undefined *)DAT_009b3938);
  DAT_009b3938 = (uint *)0x0;
  *puVar3 = 0;
  DAT_009b5348 = 1;
  return;
}

// ====== 0x0086558c  FUN_0086558c ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0086558c(void)

{
  undefined4 *puVar1;
  byte *pbVar2;
  int local_c;
  int local_8;
  
  if (DAT_009b534c == 0) {
    FUN_008647a4();
  }
  GetModuleFileNameA((HMODULE)0x0,&DAT_009b3a90,0x104);
  _DAT_009b3924 = &DAT_009b3a90;
  pbVar2 = &DAT_009b3a90;
  if (*DAT_009b5344 != 0) {
    pbVar2 = DAT_009b5344;
  }
  FUN_00865625(pbVar2,(undefined4 *)0x0,(byte *)0x0,&local_8,&local_c);
  puVar1 = (undefined4 *)_malloc(local_c + local_8 * 4);
  if (puVar1 == (undefined4 *)0x0) {
    __amsg_exit(8);
  }
  FUN_00865625(pbVar2,puVar1,(byte *)(puVar1 + local_8),&local_8,&local_c);
  _DAT_009b390c = puVar1;
  _DAT_009b3908 = local_8 + -1;
  return;
}

// ====== 0x00865625  FUN_00865625 ======
void __cdecl FUN_00865625(byte *param_1,undefined4 *param_2,byte *param_3,int *param_4,int *param_5)

{
  byte bVar1;
  bool bVar2;
  bool bVar3;
  byte *pbVar4;
  byte *pbVar5;
  uint uVar6;
  undefined4 *puVar7;
  
  *param_5 = 0;
  *param_4 = 1;
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = param_3;
    param_2 = param_2 + 1;
  }
  if (*param_1 == 0x22) {
    while( true ) {
      bVar1 = param_1[1];
      pbVar4 = param_1 + 1;
      if ((bVar1 == 0x22) || (bVar1 == 0)) break;
      if ((((&DAT_009b4221)[bVar1] & 4) != 0) && (*param_5 = *param_5 + 1, param_3 != (byte *)0x0))
      {
        *param_3 = *pbVar4;
        param_3 = param_3 + 1;
        pbVar4 = param_1 + 2;
      }
      *param_5 = *param_5 + 1;
      param_1 = pbVar4;
      if (param_3 != (byte *)0x0) {
        *param_3 = *pbVar4;
        param_3 = param_3 + 1;
      }
    }
    *param_5 = *param_5 + 1;
    if (param_3 != (byte *)0x0) {
      *param_3 = 0;
      param_3 = param_3 + 1;
    }
    if (*pbVar4 == 0x22) {
      pbVar4 = param_1 + 2;
    }
  }
  else {
    do {
      *param_5 = *param_5 + 1;
      if (param_3 != (byte *)0x0) {
        *param_3 = *param_1;
        param_3 = param_3 + 1;
      }
      bVar1 = *param_1;
      pbVar4 = param_1 + 1;
      if (((&DAT_009b4221)[bVar1] & 4) != 0) {
        *param_5 = *param_5 + 1;
        if (param_3 != (byte *)0x0) {
          *param_3 = *pbVar4;
          param_3 = param_3 + 1;
        }
        pbVar4 = param_1 + 2;
      }
      if (bVar1 == 0x20) break;
      if (bVar1 == 0) goto LAB_008656d0;
      param_1 = pbVar4;
    } while (bVar1 != 9);
    if (bVar1 == 0) {
LAB_008656d0:
      pbVar4 = pbVar4 + -1;
    }
    else if (param_3 != (byte *)0x0) {
      param_3[-1] = 0;
    }
  }
  bVar2 = false;
  puVar7 = param_2;
  while (*pbVar4 != 0) {
    for (; (*pbVar4 == 0x20 || (*pbVar4 == 9)); pbVar4 = pbVar4 + 1) {
    }
    if (*pbVar4 == 0) break;
    if (puVar7 != (undefined4 *)0x0) {
      *puVar7 = param_3;
      puVar7 = puVar7 + 1;
      param_2 = puVar7;
    }
    *param_4 = *param_4 + 1;
    while( true ) {
      bVar3 = true;
      uVar6 = 0;
      for (; *pbVar4 == 0x5c; pbVar4 = pbVar4 + 1) {
        uVar6 = uVar6 + 1;
      }
      if (*pbVar4 == 0x22) {
        pbVar5 = pbVar4;
        if ((uVar6 & 1) == 0) {
          if ((!bVar2) || (pbVar5 = pbVar4 + 1, pbVar4[1] != 0x22)) {
            bVar3 = false;
            pbVar5 = pbVar4;
          }
          bVar2 = !bVar2;
          puVar7 = param_2;
        }
        uVar6 = uVar6 >> 1;
        pbVar4 = pbVar5;
      }
      for (; uVar6 != 0; uVar6 = uVar6 - 1) {
        if (param_3 != (byte *)0x0) {
          *param_3 = 0x5c;
          param_3 = param_3 + 1;
        }
        *param_5 = *param_5 + 1;
      }
      bVar1 = *pbVar4;
      if ((bVar1 == 0) || ((!bVar2 && ((bVar1 == 0x20 || (bVar1 == 9)))))) break;
      if (bVar3) {
        if (param_3 == (byte *)0x0) {
          if (((&DAT_009b4221)[bVar1] & 4) != 0) {
            pbVar4 = pbVar4 + 1;
            *param_5 = *param_5 + 1;
          }
        }
        else {
          if (((&DAT_009b4221)[bVar1] & 4) != 0) {
            *param_3 = bVar1;
            param_3 = param_3 + 1;
            pbVar4 = pbVar4 + 1;
            *param_5 = *param_5 + 1;
          }
          *param_3 = *pbVar4;
          param_3 = param_3 + 1;
        }
        *param_5 = *param_5 + 1;
      }
      pbVar4 = pbVar4 + 1;
    }
    if (param_3 != (byte *)0x0) {
      *param_3 = 0;
      param_3 = param_3 + 1;
    }
    *param_5 = *param_5 + 1;
  }
  if (puVar7 != (undefined4 *)0x0) {
    *puVar7 = 0;
  }
  *param_4 = *param_4 + 1;
  return;
}

// ====== 0x008657d9  FUN_008657d9 ======
LPSTR FUN_008657d9(void)

{
  char cVar1;
  WCHAR WVar2;
  WCHAR *pWVar3;
  WCHAR *pWVar4;
  int iVar5;
  size_t _Size;
  LPSTR pCVar6;
  char *pcVar7;
  LPWCH lpWideCharStr;
  LPCH pCVar9;
  LPSTR local_8;
  char *pcVar8;
  
  lpWideCharStr = (LPWCH)0x0;
  pCVar9 = (LPCH)0x0;
  if (DAT_009b3b94 == 0) {
    lpWideCharStr = GetEnvironmentStringsW();
    if (lpWideCharStr != (LPWCH)0x0) {
      DAT_009b3b94 = 1;
LAB_00865830:
      if ((lpWideCharStr == (LPWCH)0x0) &&
         (lpWideCharStr = GetEnvironmentStringsW(), lpWideCharStr == (LPWCH)0x0)) {
        return (LPSTR)0x0;
      }
      WVar2 = *lpWideCharStr;
      pWVar4 = lpWideCharStr;
      while (WVar2 != L'\0') {
        do {
          pWVar3 = pWVar4;
          pWVar4 = pWVar3 + 1;
        } while (*pWVar4 != L'\0');
        pWVar4 = pWVar3 + 2;
        WVar2 = *pWVar4;
      }
      iVar5 = ((int)pWVar4 - (int)lpWideCharStr >> 1) + 1;
      _Size = WideCharToMultiByte(0,0,lpWideCharStr,iVar5,(LPSTR)0x0,0,(LPCSTR)0x0,(LPBOOL)0x0);
      local_8 = (LPSTR)0x0;
      if (((_Size != 0) && (pCVar6 = (LPSTR)_malloc(_Size), pCVar6 != (LPSTR)0x0)) &&
         (iVar5 = WideCharToMultiByte(0,0,lpWideCharStr,iVar5,pCVar6,_Size,(LPCSTR)0x0,(LPBOOL)0x0),
         local_8 = pCVar6, iVar5 == 0)) {
        FUN_0085adc4(pCVar6);
        local_8 = (LPSTR)0x0;
      }
      FreeEnvironmentStringsW(lpWideCharStr);
      return local_8;
    }
    pCVar9 = GetEnvironmentStrings();
    if (pCVar9 == (LPCH)0x0) {
      return (LPSTR)0x0;
    }
    DAT_009b3b94 = 2;
  }
  else {
    if (DAT_009b3b94 == 1) goto LAB_00865830;
    if (DAT_009b3b94 != 2) {
      return (LPSTR)0x0;
    }
  }
  if ((pCVar9 == (LPCH)0x0) && (pCVar9 = GetEnvironmentStrings(), pCVar9 == (LPCH)0x0)) {
    return (LPSTR)0x0;
  }
  cVar1 = *pCVar9;
  pcVar7 = pCVar9;
  while (cVar1 != '\0') {
    do {
      pcVar8 = pcVar7;
      pcVar7 = pcVar8 + 1;
    } while (*pcVar7 != '\0');
    pcVar7 = pcVar8 + 2;
    cVar1 = *pcVar7;
  }
  pCVar6 = (LPSTR)_malloc((size_t)(pcVar7 + (1 - (int)pCVar9)));
  if (pCVar6 == (LPSTR)0x0) {
    pCVar6 = (LPSTR)0x0;
  }
  else {
    FUN_0085ffd0((undefined4 *)pCVar6,(undefined4 *)pCVar9,(uint)(pcVar7 + (1 - (int)pCVar9)));
  }
  FreeEnvironmentStringsA(pCVar9);
  return pCVar6;
}

// ====== 0x0086590b  FUN_0086590b ======
void FUN_0086590b(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  DWORD DVar4;
  HANDLE hFile;
  UINT *pUVar5;
  int iVar6;
  uint uVar7;
  UINT UVar8;
  UINT UVar9;
  _STARTUPINFOA local_4c;
  byte *local_8;
  
  puVar2 = (undefined4 *)_malloc(0x480);
  if (puVar2 == (undefined4 *)0x0) {
    __amsg_exit(0x1b);
  }
  uNumber_009b4100 = 0x20;
  DAT_009b4000 = puVar2;
  for (; puVar2 < DAT_009b4000 + 0x120; puVar2 = puVar2 + 9) {
    *(undefined1 *)(puVar2 + 1) = 0;
    *puVar2 = 0xffffffff;
    puVar2[2] = 0;
    *(undefined1 *)((int)puVar2 + 5) = 10;
  }
  GetStartupInfoA(&local_4c);
  if ((local_4c.cbReserved2 != 0) && ((UINT *)local_4c.lpReserved2 != (UINT *)0x0)) {
    UVar8 = *(UINT *)local_4c.lpReserved2;
    pUVar5 = (UINT *)((int)local_4c.lpReserved2 + 4);
    local_8 = (byte *)((int)pUVar5 + UVar8);
    if (0x7ff < (int)UVar8) {
      UVar8 = 0x800;
    }
    UVar9 = UVar8;
    if ((int)uNumber_009b4100 < (int)UVar8) {
      puVar2 = &DAT_009b4004;
      do {
        puVar3 = (undefined4 *)_malloc(0x480);
        UVar9 = uNumber_009b4100;
        if (puVar3 == (undefined4 *)0x0) break;
        uNumber_009b4100 = uNumber_009b4100 + 0x20;
        *puVar2 = puVar3;
        puVar1 = puVar3;
        for (; puVar3 < puVar1 + 0x120; puVar3 = puVar3 + 9) {
          *(undefined1 *)(puVar3 + 1) = 0;
          *puVar3 = 0xffffffff;
          puVar3[2] = 0;
          *(undefined1 *)((int)puVar3 + 5) = 10;
          puVar1 = (undefined4 *)*puVar2;
        }
        puVar2 = puVar2 + 1;
        UVar9 = UVar8;
      } while ((int)uNumber_009b4100 < (int)UVar8);
    }
    uVar7 = 0;
    if (0 < (int)UVar9) {
      do {
        if (((*(HANDLE *)local_8 != (HANDLE)0xffffffff) && ((*pUVar5 & 1) != 0)) &&
           (((*pUVar5 & 8) != 0 || (DVar4 = GetFileType(*(HANDLE *)local_8), DVar4 != 0)))) {
          puVar2 = (undefined4 *)((int)(&DAT_009b4000)[(int)uVar7 >> 5] + (uVar7 & 0x1f) * 0x24);
          *puVar2 = *(undefined4 *)local_8;
          *(byte *)(puVar2 + 1) = (byte)*pUVar5;
        }
        local_8 = local_8 + 4;
        uVar7 = uVar7 + 1;
        pUVar5 = (UINT *)((int)pUVar5 + 1);
      } while ((int)uVar7 < (int)UVar9);
    }
  }
  iVar6 = 0;
  do {
    puVar2 = DAT_009b4000 + iVar6 * 9;
    if (DAT_009b4000[iVar6 * 9] == -1) {
      *(undefined1 *)(puVar2 + 1) = 0x81;
      if (iVar6 == 0) {
        DVar4 = 0xfffffff6;
      }
      else {
        DVar4 = 0xfffffff5 - (iVar6 != 1);
      }
      hFile = GetStdHandle(DVar4);
      if ((hFile != (HANDLE)0xffffffff) && (DVar4 = GetFileType(hFile), DVar4 != 0)) {
        *puVar2 = hFile;
        if ((DVar4 & 0xff) != 2) {
          if ((DVar4 & 0xff) == 3) {
            *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 8;
          }
          goto LAB_00865ab0;
        }
      }
      *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 0x40;
    }
    else {
      *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 0x80;
    }
LAB_00865ab0:
    iVar6 = iVar6 + 1;
    if (2 < iVar6) {
      SetHandleCount(uNumber_009b4100);
      return;
    }
  } while( true );
}

// ====== 0x00865ac7  FUN_00865ac7 ======
void FUN_00865ac7(void)

{
  LPCRITICAL_SECTION lpCriticalSection;
  uint *puVar1;
  uint uVar2;
  
  puVar1 = &DAT_009b4000;
  do {
    uVar2 = *puVar1;
    if (uVar2 != 0) {
      if (uVar2 < uVar2 + 0x480) {
        lpCriticalSection = (LPCRITICAL_SECTION)(uVar2 + 0xc);
        do {
          if (lpCriticalSection[-1].SpinCount != 0) {
            DeleteCriticalSection(lpCriticalSection);
          }
          uVar2 = uVar2 + 0x24;
          lpCriticalSection = (LPCRITICAL_SECTION)&lpCriticalSection[1].OwningThread;
        } while (uVar2 < *puVar1 + 0x480);
      }
      FUN_0085adc4((undefined *)*puVar1);
      *puVar1 = 0;
    }
    puVar1 = puVar1 + 1;
  } while ((int)puVar1 < 0x9b4100);
  return;
}

// ====== 0x00865b1b  FUN_00865b1b ======
void __cdecl FUN_00865b1b(undefined4 *param_1)

{
  int iVar1;
  HMODULE pHVar2;
  
  *param_1 = 0;
  pHVar2 = GetModuleHandleA((LPCSTR)0x0);
  if (((short)pHVar2->unused == 0x5a4d) && (iVar1 = pHVar2[0xf].unused, iVar1 != 0)) {
    *(undefined1 *)param_1 = *(undefined1 *)((int)&pHVar2[6].unused + iVar1 + 2);
    *(undefined1 *)((int)param_1 + 1) = *(undefined1 *)((int)&pHVar2[6].unused + iVar1 + 3);
  }
  return;
}

// ====== 0x00865b48  FUN_00865b48 ======
int FUN_00865b48(void)

{
  char cVar1;
  byte bVar2;
  BOOL BVar3;
  DWORD DVar4;
  int iVar5;
  byte *pbVar6;
  char *pcVar7;
  byte *this;
  byte unaff_BL;
  char local_1230 [4240];
  char local_1a0 [260];
  DWORD local_9c;
  uint local_98;
  DWORD local_8c;
  CHAR aCStackY_18 [4];
  
  FUN_0085f3a0();
  local_9c = 0x94;
  BVar3 = GetVersionExA((LPOSVERSIONINFOA)&local_9c);
  if (((BVar3 == 0) || (local_8c != 2)) || (local_98 < 5)) {
    aCStackY_18[0] = -0x5e;
    aCStackY_18[1] = '[';
    aCStackY_18[2] = -0x7a;
    aCStackY_18[3] = '\0';
    DVar4 = GetEnvironmentVariableA("__MSVCRT_HEAP_SELECT",local_1230,0x1090);
    if (DVar4 != 0) {
      pcVar7 = local_1230;
      while (local_1230[0] != '\0') {
        cVar1 = *pcVar7;
        if (('`' < cVar1) && (cVar1 < '{')) {
          *pcVar7 = cVar1 + -0x20;
        }
        pcVar7 = pcVar7 + 1;
        local_1230[0] = *pcVar7;
      }
      aCStackY_18[0] = -0x20;
      aCStackY_18[1] = '[';
      aCStackY_18[2] = -0x7a;
      aCStackY_18[3] = '\0';
      iVar5 = _strncmp("__GLOBAL_HEAP_SELECTED",local_1230,0x16);
      if (iVar5 == 0) {
        pcVar7 = local_1230;
      }
      else {
        aCStackY_18[0] = '\x02';
        aCStackY_18[1] = '\\';
        aCStackY_18[2] = -0x7a;
        aCStackY_18[3] = '\0';
        GetModuleFileNameA((HMODULE)0x0,local_1a0,0x104);
        pcVar7 = local_1a0;
        while (local_1a0[0] != '\0') {
          cVar1 = *pcVar7;
          if (('`' < cVar1) && (cVar1 < '{')) {
            *pcVar7 = cVar1 + -0x20;
          }
          pcVar7 = pcVar7 + 1;
          local_1a0[0] = *pcVar7;
        }
        pcVar7 = _strstr(local_1230,local_1a0);
      }
      if ((pcVar7 != (char *)0x0) && (pcVar7 = _strchr(pcVar7,0x2c), pcVar7 != (char *)0x0)) {
        pbVar6 = (byte *)(pcVar7 + 1);
        bVar2 = *pbVar6;
        this = pbVar6;
        while (bVar2 != 0) {
          if (*this == 0x3b) {
            *this = 0;
          }
          else {
            this = this + 1;
          }
          bVar2 = *this;
        }
        aCStackY_18[0] = 'h';
        aCStackY_18[1] = '\\';
        aCStackY_18[2] = -0x7a;
        aCStackY_18[3] = '\0';
        iVar5 = FUN_0085c337(this,pbVar6,(int *)0x0,&DAT_0000000a);
        if (iVar5 == 2) {
          return 2;
        }
        if (iVar5 == 3) {
          return 3;
        }
        if (iVar5 == 1) {
          return 1;
        }
      }
    }
    FUN_00865b1b((undefined4 *)&stack0xfffffff8);
    iVar5 = 3 - (uint)(unaff_BL < 6);
  }
  else {
    iVar5 = 1;
  }
  return iVar5;
}

// ====== 0x00865c90  FUN_00865c90 ======
undefined4 __cdecl FUN_00865c90(int param_1)

{
  undefined **ppuVar1;
  
  hHeap_009b3ff8 = HeapCreate((uint)(param_1 == 0),0x1000,0);
  if (hHeap_009b3ff8 != (HANDLE)0x0) {
    DAT_009b3ffc = FUN_00865b48();
    if (DAT_009b3ffc == 3) {
      ppuVar1 = (undefined **)FUN_00865e67(0x3f8);
    }
    else {
      if (DAT_009b3ffc != 2) {
        return 1;
      }
      ppuVar1 = FUN_00866dd0();
    }
    if (ppuVar1 != (undefined **)0x0) {
      return 1;
    }
    HeapDestroy(hHeap_009b3ff8);
  }
  return 0;
}

// ====== 0x00865db4  FUN_00865db4 ======
undefined4 __cdecl FUN_00865db4(uint param_1)

{
  int iVar1;
  undefined **ppuVar2;
  uint uVar3;
  
  uVar3 = param_1;
  if (DAT_009b3ffc == 3) {
    if (param_1 < 0x3f9) {
      DAT_009b3ff4 = param_1;
      return 1;
    }
  }
  else if (DAT_009b3ffc == 2) {
    uVar3 = param_1 + 0xf & 0xfffffff0;
    if (uVar3 < 0x781) {
      DAT_0097cde4 = uVar3;
      return 1;
    }
  }
  else if ((DAT_009b3ffc == 1) && (param_1 != 0)) {
    FUN_00865b1b(&param_1);
    if ((byte)param_1 < 6) {
      uVar3 = uVar3 + 0xf & 0xfffffff0;
      if ((uVar3 < 0x781) && (ppuVar2 = FUN_00866dd0(), ppuVar2 != (undefined **)0x0)) {
        DAT_0097cde4 = uVar3;
        DAT_009b3ffc = 2;
        return 1;
      }
    }
    else if ((uVar3 < 0x3f9) && (iVar1 = FUN_00865e67(uVar3), iVar1 != 0)) {
      DAT_009b3ff4 = uVar3;
      DAT_009b3ffc = 3;
      return 1;
    }
  }
  return 0;
}

// ====== 0x00865e67  FUN_00865e67 ======
undefined4 FUN_00865e67(undefined4 param_1)

{
  lpMem_009b3ff0 = HeapAlloc(hHeap_009b3ff8,0,0x140);
  if (lpMem_009b3ff0 == (LPVOID)0x0) {
    return 0;
  }
  DAT_009b3fe8 = 0;
  DAT_009b3fec = 0;
  DAT_009b3fe0 = lpMem_009b3ff0;
  DAT_009b3ff4 = param_1;
  DAT_009b3fd8 = 0x10;
  return 1;
}

// ====== 0x00865eaf  FUN_00865eaf ======
uint __cdecl FUN_00865eaf(int param_1)

{
  LPVOID pvVar1;
  
  pvVar1 = lpMem_009b3ff0;
  while( true ) {
    if ((LPVOID)((int)lpMem_009b3ff0 + DAT_009b3fec * 0x14) <= pvVar1) {
      return 0;
    }
    if ((uint)(param_1 - *(int *)((int)pvVar1 + 0xc)) < 0x100000) break;
    pvVar1 = (LPVOID)((int)pvVar1 + 0x14);
  }
  return (uint)pvVar1;
}

// ====== 0x00865eda  FUN_00865eda ======
void __cdecl FUN_00865eda(uint *param_1,int param_2)

{
  char *pcVar1;
  uint *puVar2;
  int *piVar3;
  char cVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  byte bVar8;
  uint uVar9;
  uint *puVar10;
  uint *puVar11;
  uint *puVar12;
  uint uVar13;
  uint uVar14;
  uint local_8;
  
  uVar5 = param_1[4];
  puVar12 = (uint *)(param_2 + -4);
  uVar14 = param_2 - param_1[3] >> 0xf;
  piVar3 = (int *)(uVar14 * 0x204 + 0x144 + uVar5);
  uVar13 = *puVar12;
  local_8 = uVar13 - 1;
  if ((local_8 & 1) == 0) {
    uVar6 = *(uint *)(local_8 + (int)puVar12);
    uVar7 = *(uint *)(param_2 + -8);
    if ((uVar6 & 1) == 0) {
      uVar9 = ((int)uVar6 >> 4) - 1;
      if (0x3f < uVar9) {
        uVar9 = 0x3f;
      }
      if (*(int *)((int)puVar12 + uVar13 + 3) == *(int *)((int)puVar12 + uVar13 + 7)) {
        if (uVar9 < 0x20) {
          pcVar1 = (char *)(uVar9 + 4 + uVar5);
          uVar9 = ~(0x80000000U >> ((byte)uVar9 & 0x1f));
          puVar10 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
          *puVar10 = *puVar10 & uVar9;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            *param_1 = *param_1 & uVar9;
          }
        }
        else {
          pcVar1 = (char *)(uVar9 + 4 + uVar5);
          uVar9 = ~(0x80000000U >> ((byte)uVar9 - 0x20 & 0x1f));
          puVar10 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
          *puVar10 = *puVar10 & uVar9;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            param_1[1] = param_1[1] & uVar9;
          }
        }
      }
      local_8 = local_8 + uVar6;
      *(undefined4 *)(*(int *)((int)puVar12 + uVar13 + 7) + 4) =
           *(undefined4 *)((int)puVar12 + uVar13 + 3);
      *(undefined4 *)(*(int *)((int)puVar12 + uVar13 + 3) + 8) =
           *(undefined4 *)((int)puVar12 + uVar13 + 7);
    }
    puVar10 = (uint *)(((int)local_8 >> 4) - 1);
    if ((uint *)0x3f < puVar10) {
      puVar10 = (uint *)0x3f;
    }
    puVar11 = param_1;
    if ((uVar7 & 1) == 0) {
      puVar12 = (uint *)((int)puVar12 - uVar7);
      puVar11 = (uint *)(((int)uVar7 >> 4) - 1);
      if ((uint *)0x3f < puVar11) {
        puVar11 = (uint *)0x3f;
      }
      local_8 = local_8 + uVar7;
      puVar10 = (uint *)(((int)local_8 >> 4) - 1);
      if ((uint *)0x3f < puVar10) {
        puVar10 = (uint *)0x3f;
      }
      if (puVar11 != puVar10) {
        if (puVar12[1] == puVar12[2]) {
          if (puVar11 < (uint *)0x20) {
            uVar13 = ~(0x80000000U >> ((byte)puVar11 & 0x1f));
            puVar2 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
            *puVar2 = *puVar2 & uVar13;
            pcVar1 = (char *)((int)puVar11 + uVar5 + 4);
            *pcVar1 = *pcVar1 + -1;
            if (*pcVar1 == '\0') {
              *param_1 = *param_1 & uVar13;
            }
          }
          else {
            uVar13 = ~(0x80000000U >> ((byte)puVar11 - 0x20 & 0x1f));
            puVar2 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
            *puVar2 = *puVar2 & uVar13;
            pcVar1 = (char *)((int)puVar11 + uVar5 + 4);
            *pcVar1 = *pcVar1 + -1;
            if (*pcVar1 == '\0') {
              param_1[1] = param_1[1] & uVar13;
            }
          }
        }
        *(uint *)(puVar12[2] + 4) = puVar12[1];
        *(uint *)(puVar12[1] + 8) = puVar12[2];
      }
    }
    if (((uVar7 & 1) != 0) || (puVar11 != puVar10)) {
      puVar12[1] = piVar3[(int)puVar10 * 2 + 1];
      puVar12[2] = (uint)(piVar3 + (int)puVar10 * 2);
      (piVar3 + (int)puVar10 * 2)[1] = (int)puVar12;
      *(uint **)(puVar12[1] + 8) = puVar12;
      if (puVar12[1] == puVar12[2]) {
        cVar4 = *(char *)((int)puVar10 + uVar5 + 4);
        *(char *)((int)puVar10 + uVar5 + 4) = cVar4 + '\x01';
        bVar8 = (byte)puVar10;
        if (puVar10 < (uint *)0x20) {
          if (cVar4 == '\0') {
            *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
          }
          puVar10 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
          *puVar10 = *puVar10 | 0x80000000U >> (bVar8 & 0x1f);
        }
        else {
          if (cVar4 == '\0') {
            param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
          }
          puVar10 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
          *puVar10 = *puVar10 | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
        }
      }
    }
    *puVar12 = local_8;
    *(uint *)((local_8 - 4) + (int)puVar12) = local_8;
    *piVar3 = *piVar3 + -1;
    if (*piVar3 == 0) {
      if (DAT_009b3fe8 != (uint *)0x0) {
        VirtualFree((LPVOID)(DAT_009b3fdc * 0x8000 + DAT_009b3fe8[3]),0x8000,0x4000);
        DAT_009b3fe8[2] = DAT_009b3fe8[2] | 0x80000000U >> ((byte)DAT_009b3fdc & 0x1f);
        *(undefined4 *)(DAT_009b3fe8[4] + 0xc4 + DAT_009b3fdc * 4) = 0;
        *(char *)(DAT_009b3fe8[4] + 0x43) = *(char *)(DAT_009b3fe8[4] + 0x43) + -1;
        if (*(char *)(DAT_009b3fe8[4] + 0x43) == '\0') {
          DAT_009b3fe8[1] = DAT_009b3fe8[1] & 0xfffffffe;
        }
        if (DAT_009b3fe8[2] == 0xffffffff) {
          VirtualFree((LPVOID)DAT_009b3fe8[3],0,0x8000);
          HeapFree(hHeap_009b3ff8,0,(LPVOID)DAT_009b3fe8[4]);
          FUN_00859530(DAT_009b3fe8,DAT_009b3fe8 + 5,
                       (DAT_009b3fec * 0x14 - (int)DAT_009b3fe8) + -0x14 + (int)lpMem_009b3ff0);
          DAT_009b3fec = DAT_009b3fec + -1;
          if (DAT_009b3fe8 < param_1) {
            param_1 = param_1 + -5;
          }
          DAT_009b3fe0 = lpMem_009b3ff0;
        }
      }
      DAT_009b3fe8 = param_1;
      DAT_009b3fdc = uVar14;
    }
  }
  return;
}

// ====== 0x00866203  FUN_00866203 ======
int * __cdecl FUN_00866203(uint *param_1)

{
  char *pcVar1;
  int *piVar2;
  char cVar3;
  int *piVar4;
  byte bVar5;
  uint uVar6;
  int iVar7;
  uint *puVar8;
  int iVar9;
  int *piVar10;
  uint *puVar11;
  uint *puVar12;
  uint uVar13;
  int iVar14;
  uint local_10;
  uint local_c;
  int local_8;
  
  puVar8 = (uint *)((int)lpMem_009b3ff0 + DAT_009b3fec * 0x14);
  uVar6 = (int)param_1 + 0x17U & 0xfffffff0;
  iVar7 = ((int)((int)param_1 + 0x17U) >> 4) + -1;
  bVar5 = (byte)iVar7;
  if (iVar7 < 0x20) {
    local_10 = 0xffffffff >> (bVar5 & 0x1f);
    local_c = 0xffffffff;
  }
  else {
    local_c = 0xffffffff >> (bVar5 - 0x20 & 0x1f);
    local_10 = 0;
  }
  param_1 = DAT_009b3fe0;
  if (DAT_009b3fe0 < puVar8) {
    do {
      if ((param_1[1] & local_c) != 0 || (*param_1 & local_10) != 0) break;
      param_1 = param_1 + 5;
    } while (param_1 < puVar8);
  }
  puVar11 = (uint *)lpMem_009b3ff0;
  if (param_1 == puVar8) {
    for (; (puVar11 < DAT_009b3fe0 && ((puVar11[1] & local_c) == 0 && (*puVar11 & local_10) == 0));
        puVar11 = puVar11 + 5) {
    }
    param_1 = puVar11;
    if (puVar11 == DAT_009b3fe0) {
      for (; (puVar11 < puVar8 && (puVar11[2] == 0)); puVar11 = puVar11 + 5) {
      }
      puVar12 = (uint *)lpMem_009b3ff0;
      param_1 = puVar11;
      if (puVar11 == puVar8) {
        for (; (puVar12 < DAT_009b3fe0 && (puVar12[2] == 0)); puVar12 = puVar12 + 5) {
        }
        param_1 = puVar12;
        if ((puVar12 == DAT_009b3fe0) && (param_1 = FUN_0086650c(), param_1 == (uint *)0x0)) {
          return (int *)0x0;
        }
      }
      iVar7 = FUN_008665bd((int)param_1);
      *(int *)param_1[4] = iVar7;
      if (*(int *)param_1[4] == -1) {
        return (int *)0x0;
      }
    }
  }
  piVar4 = (int *)param_1[4];
  local_8 = *piVar4;
  if ((local_8 == -1) ||
     ((piVar4[local_8 + 0x31] & local_c) == 0 && (piVar4[local_8 + 0x11] & local_10) == 0)) {
    local_8 = 0;
    puVar8 = (uint *)(piVar4 + 0x11);
    if ((piVar4[0x31] & local_c) == 0 && (piVar4[0x11] & local_10) == 0) {
      do {
        puVar11 = puVar8 + 0x21;
        local_8 = local_8 + 1;
        puVar8 = puVar8 + 1;
      } while ((*puVar11 & local_c) == 0 && (local_10 & *puVar8) == 0);
    }
  }
  iVar7 = 0;
  piVar2 = piVar4 + local_8 * 0x81 + 0x51;
  local_10 = piVar4[local_8 + 0x11] & local_10;
  if (local_10 == 0) {
    local_10 = piVar4[local_8 + 0x31] & local_c;
    iVar7 = 0x20;
  }
  for (; -1 < (int)local_10; local_10 = local_10 << 1) {
    iVar7 = iVar7 + 1;
  }
  piVar10 = (int *)piVar2[iVar7 * 2 + 1];
  iVar9 = *piVar10 - uVar6;
  iVar14 = (iVar9 >> 4) + -1;
  if (0x3f < iVar14) {
    iVar14 = 0x3f;
  }
  DAT_009b3fe0 = param_1;
  if (iVar14 != iVar7) {
    if (piVar10[1] == piVar10[2]) {
      if (iVar7 < 0x20) {
        pcVar1 = (char *)((int)piVar4 + iVar7 + 4);
        uVar13 = ~(0x80000000U >> ((byte)iVar7 & 0x1f));
        piVar4[local_8 + 0x11] = uVar13 & piVar4[local_8 + 0x11];
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          *param_1 = *param_1 & uVar13;
        }
      }
      else {
        pcVar1 = (char *)((int)piVar4 + iVar7 + 4);
        uVar13 = ~(0x80000000U >> ((byte)iVar7 - 0x20 & 0x1f));
        piVar4[local_8 + 0x31] = piVar4[local_8 + 0x31] & uVar13;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          param_1[1] = param_1[1] & uVar13;
        }
      }
    }
    *(int *)(piVar10[2] + 4) = piVar10[1];
    *(int *)(piVar10[1] + 8) = piVar10[2];
    if (iVar9 == 0) goto LAB_008664c9;
    piVar10[1] = piVar2[iVar14 * 2 + 1];
    piVar10[2] = (int)(piVar2 + iVar14 * 2);
    (piVar2 + iVar14 * 2)[1] = (int)piVar10;
    *(int **)(piVar10[1] + 8) = piVar10;
    if (piVar10[1] == piVar10[2]) {
      cVar3 = *(char *)(iVar14 + 4 + (int)piVar4);
      bVar5 = (byte)iVar14;
      if (iVar14 < 0x20) {
        *(char *)(iVar14 + 4 + (int)piVar4) = cVar3 + '\x01';
        if (cVar3 == '\0') {
          *param_1 = *param_1 | 0x80000000U >> (bVar5 & 0x1f);
        }
        piVar4[local_8 + 0x11] = piVar4[local_8 + 0x11] | 0x80000000U >> (bVar5 & 0x1f);
      }
      else {
        *(char *)(iVar14 + 4 + (int)piVar4) = cVar3 + '\x01';
        if (cVar3 == '\0') {
          param_1[1] = param_1[1] | 0x80000000U >> (bVar5 - 0x20 & 0x1f);
        }
        piVar4[local_8 + 0x31] = piVar4[local_8 + 0x31] | 0x80000000U >> (bVar5 - 0x20 & 0x1f);
      }
    }
  }
  if (iVar9 != 0) {
    *piVar10 = iVar9;
    *(int *)(iVar9 + -4 + (int)piVar10) = iVar9;
  }
LAB_008664c9:
  piVar10 = (int *)((int)piVar10 + iVar9);
  *piVar10 = uVar6 + 1;
  *(uint *)((int)piVar10 + (uVar6 - 4)) = uVar6 + 1;
  iVar7 = *piVar2;
  *piVar2 = iVar7 + 1;
  if (((iVar7 == 0) && (param_1 == DAT_009b3fe8)) && (local_8 == DAT_009b3fdc)) {
    DAT_009b3fe8 = (uint *)0x0;
  }
  *piVar4 = local_8;
  return piVar10 + 1;
}

// ====== 0x0086650c  FUN_0086650c ======
undefined4 * FUN_0086650c(void)

{
  undefined4 *puVar1;
  LPVOID pvVar2;
  
  if (DAT_009b3fec == DAT_009b3fd8) {
    pvVar2 = HeapReAlloc(hHeap_009b3ff8,0,lpMem_009b3ff0,(DAT_009b3fd8 * 5 + 0x50) * 4);
    if (pvVar2 == (LPVOID)0x0) {
      return (undefined4 *)0x0;
    }
    DAT_009b3fd8 = DAT_009b3fd8 + 0x10;
    lpMem_009b3ff0 = pvVar2;
  }
  puVar1 = (undefined4 *)((int)lpMem_009b3ff0 + DAT_009b3fec * 0x14);
  pvVar2 = HeapAlloc(hHeap_009b3ff8,8,0x41c4);
  puVar1[4] = pvVar2;
  if (pvVar2 != (LPVOID)0x0) {
    pvVar2 = VirtualAlloc((LPVOID)0x0,0x100000,0x2000,4);
    puVar1[3] = pvVar2;
    if (pvVar2 != (LPVOID)0x0) {
      puVar1[2] = 0xffffffff;
      *puVar1 = 0;
      puVar1[1] = 0;
      DAT_009b3fec = DAT_009b3fec + 1;
      *(undefined4 *)puVar1[4] = 0xffffffff;
      return puVar1;
    }
    HeapFree(hHeap_009b3ff8,0,(LPVOID)puVar1[4]);
  }
  return (undefined4 *)0x0;
}

// ====== 0x008665bd  FUN_008665bd ======
int __cdecl FUN_008665bd(int param_1)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  LPVOID pvVar6;
  int *piVar7;
  int iVar8;
  int iVar9;
  int *lpAddress;
  
  iVar3 = *(int *)(param_1 + 0x10);
  iVar9 = 0;
  for (iVar4 = *(int *)(param_1 + 8); -1 < iVar4; iVar4 = iVar4 << 1) {
    iVar9 = iVar9 + 1;
  }
  iVar8 = 0x3f;
  iVar4 = iVar9 * 0x204 + 0x144 + iVar3;
  iVar5 = iVar4;
  do {
    *(int *)(iVar5 + 8) = iVar5;
    *(int *)(iVar5 + 4) = iVar5;
    iVar5 = iVar5 + 8;
    iVar8 = iVar8 + -1;
  } while (iVar8 != 0);
  lpAddress = (int *)(iVar9 * 0x8000 + *(int *)(param_1 + 0xc));
  pvVar6 = VirtualAlloc(lpAddress,0x8000,0x1000,4);
  if (pvVar6 == (LPVOID)0x0) {
    iVar9 = -1;
  }
  else {
    if (lpAddress <= lpAddress + 0x1c00) {
      piVar7 = lpAddress + 4;
      do {
        piVar7[-2] = -1;
        piVar7[0x3fb] = -1;
        piVar7[-1] = 0xff0;
        *piVar7 = (int)(piVar7 + 0x3ff);
        piVar7[1] = (int)(piVar7 + -0x401);
        piVar7[0x3fa] = 0xff0;
        piVar1 = piVar7 + 0x3fc;
        piVar7 = piVar7 + 0x400;
      } while (piVar1 <= lpAddress + 0x1c00);
    }
    *(int **)(iVar4 + 0x1fc) = lpAddress + 3;
    lpAddress[5] = iVar4 + 0x1f8;
    *(int **)(iVar4 + 0x200) = lpAddress + 0x1c03;
    lpAddress[0x1c04] = iVar4 + 0x1f8;
    *(undefined4 *)(iVar3 + 0x44 + iVar9 * 4) = 0;
    *(undefined4 *)(iVar3 + 0xc4 + iVar9 * 4) = 1;
    cVar2 = *(char *)(iVar3 + 0x43);
    *(char *)(iVar3 + 0x43) = cVar2 + '\x01';
    if (cVar2 == '\0') {
      *(uint *)(param_1 + 4) = *(uint *)(param_1 + 4) | 1;
    }
    *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & ~(0x80000000U >> ((byte)iVar9 & 0x1f));
  }
  return iVar9;
}

// ====== 0x008666b8  FUN_008666b8 ======
undefined4 __cdecl FUN_008666b8(uint *param_1,int param_2,int param_3)

{
  char *pcVar1;
  int *piVar2;
  int iVar3;
  char cVar4;
  uint uVar5;
  int iVar6;
  uint *puVar7;
  byte bVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint local_c;
  
  uVar5 = param_1[4];
  uVar12 = param_3 + 0x17U & 0xfffffff0;
  uVar10 = param_2 - param_1[3] >> 0xf;
  iVar3 = uVar10 * 0x204 + 0x144 + uVar5;
  iVar6 = *(int *)(param_2 + -4);
  iVar9 = iVar6 + -1;
  uVar13 = *(uint *)(iVar6 + -5 + param_2);
  iVar6 = iVar6 + -5 + param_2;
  if (iVar9 < (int)uVar12) {
    if (((uVar13 & 1) != 0) || ((int)(uVar13 + iVar9) < (int)uVar12)) {
      return 0;
    }
    local_c = ((int)uVar13 >> 4) - 1;
    if (0x3f < local_c) {
      local_c = 0x3f;
    }
    if (*(int *)(iVar6 + 4) == *(int *)(iVar6 + 8)) {
      if (local_c < 0x20) {
        pcVar1 = (char *)(local_c + 4 + uVar5);
        uVar11 = ~(0x80000000U >> ((byte)local_c & 0x1f));
        puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
        *puVar7 = *puVar7 & uVar11;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          *param_1 = *param_1 & uVar11;
        }
      }
      else {
        pcVar1 = (char *)(local_c + 4 + uVar5);
        uVar11 = ~(0x80000000U >> ((byte)local_c - 0x20 & 0x1f));
        puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
        *puVar7 = *puVar7 & uVar11;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          param_1[1] = param_1[1] & uVar11;
        }
      }
    }
    *(undefined4 *)(*(int *)(iVar6 + 8) + 4) = *(undefined4 *)(iVar6 + 4);
    *(undefined4 *)(*(int *)(iVar6 + 4) + 8) = *(undefined4 *)(iVar6 + 8);
    iVar6 = uVar13 + (iVar9 - uVar12);
    if (0 < iVar6) {
      uVar13 = (iVar6 >> 4) - 1;
      iVar9 = param_2 + -4 + uVar12;
      if (0x3f < uVar13) {
        uVar13 = 0x3f;
      }
      iVar3 = iVar3 + uVar13 * 8;
      *(undefined4 *)(iVar9 + 4) = *(undefined4 *)(iVar3 + 4);
      *(int *)(iVar9 + 8) = iVar3;
      *(int *)(iVar3 + 4) = iVar9;
      *(int *)(*(int *)(iVar9 + 4) + 8) = iVar9;
      if (*(int *)(iVar9 + 4) == *(int *)(iVar9 + 8)) {
        cVar4 = *(char *)(uVar13 + 4 + uVar5);
        *(char *)(uVar13 + 4 + uVar5) = cVar4 + '\x01';
        bVar8 = (byte)uVar13;
        if (uVar13 < 0x20) {
          if (cVar4 == '\0') {
            *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
          }
          puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
        }
        else {
          if (cVar4 == '\0') {
            param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
          }
          puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
          bVar8 = bVar8 - 0x20;
        }
        *puVar7 = *puVar7 | 0x80000000U >> (bVar8 & 0x1f);
      }
      piVar2 = (int *)(param_2 + -4 + uVar12);
      *piVar2 = iVar6;
      *(int *)(iVar6 + -4 + (int)piVar2) = iVar6;
    }
    *(uint *)(param_2 + -4) = uVar12 + 1;
    *(uint *)(param_2 + -8 + uVar12) = uVar12 + 1;
  }
  else if ((int)uVar12 < iVar9) {
    param_3 = iVar9 - uVar12;
    *(uint *)(param_2 + -4) = uVar12 + 1;
    piVar2 = (int *)(param_2 + -4 + uVar12);
    uVar11 = (param_3 >> 4) - 1;
    piVar2[-1] = uVar12 + 1;
    if (0x3f < uVar11) {
      uVar11 = 0x3f;
    }
    if ((uVar13 & 1) == 0) {
      uVar12 = ((int)uVar13 >> 4) - 1;
      if (0x3f < uVar12) {
        uVar12 = 0x3f;
      }
      if (*(int *)(iVar6 + 4) == *(int *)(iVar6 + 8)) {
        if (uVar12 < 0x20) {
          pcVar1 = (char *)(uVar12 + 4 + uVar5);
          uVar12 = ~(0x80000000U >> ((byte)uVar12 & 0x1f));
          puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
          *puVar7 = *puVar7 & uVar12;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            *param_1 = *param_1 & uVar12;
          }
        }
        else {
          pcVar1 = (char *)(uVar12 + 4 + uVar5);
          uVar12 = ~(0x80000000U >> ((byte)uVar12 - 0x20 & 0x1f));
          puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
          *puVar7 = *puVar7 & uVar12;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            param_1[1] = param_1[1] & uVar12;
          }
        }
      }
      *(undefined4 *)(*(int *)(iVar6 + 8) + 4) = *(undefined4 *)(iVar6 + 4);
      *(undefined4 *)(*(int *)(iVar6 + 4) + 8) = *(undefined4 *)(iVar6 + 8);
      param_3 = param_3 + uVar13;
      uVar11 = (param_3 >> 4) - 1;
      if (0x3f < uVar11) {
        uVar11 = 0x3f;
      }
    }
    iVar6 = iVar3 + uVar11 * 8;
    piVar2[1] = *(int *)(iVar3 + 4 + uVar11 * 8);
    piVar2[2] = iVar6;
    *(int **)(iVar6 + 4) = piVar2;
    *(int **)(piVar2[1] + 8) = piVar2;
    if (piVar2[1] == piVar2[2]) {
      cVar4 = *(char *)(uVar11 + 4 + uVar5);
      *(char *)(uVar11 + 4 + uVar5) = cVar4 + '\x01';
      bVar8 = (byte)uVar11;
      if (uVar11 < 0x20) {
        if (cVar4 == '\0') {
          *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
        }
        puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
      }
      else {
        if (cVar4 == '\0') {
          param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
        }
        puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
        bVar8 = bVar8 - 0x20;
      }
      *puVar7 = *puVar7 | 0x80000000U >> (bVar8 & 0x1f);
    }
    *piVar2 = param_3;
    *(int *)(param_3 + -4 + (int)piVar2) = param_3;
  }
  return 1;
}

// ====== 0x00866a7f  FUN_00866a7f ======
undefined4 FUN_00866a7f(void)

{
  LPVOID lp;
  BOOL BVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint *puVar7;
  uint *puVar8;
  uint *puVar9;
  uint *puVar10;
  int *piVar11;
  bool bVar12;
  int local_140 [64];
  uint *local_40;
  uint *local_3c;
  uint *local_38;
  int local_34;
  uint local_30;
  uint *local_2c;
  uint local_28;
  int local_24;
  uint local_20;
  uint local_1c;
  uint local_18;
  int local_14;
  uint *local_10;
  int local_c;
  int *local_8;
  
  BVar1 = IsBadWritePtr(lpMem_009b3ff0,DAT_009b3fec * 0x14);
  if (BVar1 == 0) {
    local_24 = 0;
    puVar8 = (uint *)lpMem_009b3ff0;
    if (0 < DAT_009b3fec) {
      do {
        lp = (LPVOID)puVar8[4];
        local_3c = puVar8;
        BVar1 = IsBadWritePtr(lp,0x41c4);
        if (BVar1 != 0) {
          return 0xfffffffe;
        }
        local_10 = (uint *)puVar8[3];
        local_30 = 0;
        local_2c = (uint *)((int)lp + 0x144);
        local_18 = puVar8[2];
        puVar9 = (uint *)((int)lp + 0xc4);
        local_1c = 0;
        local_34 = 0;
        do {
          local_28 = 0;
          local_20 = 0;
          local_8 = (int *)0x0;
          bVar12 = -1 < (int)local_18;
          piVar11 = local_140;
          local_40 = puVar9;
          for (iVar5 = 0x40; iVar5 != 0; iVar5 = iVar5 + -1) {
            *piVar11 = 0;
            piVar11 = piVar11 + 1;
          }
          if (bVar12) {
            BVar1 = IsBadWritePtr(local_10,0x8000);
            if (BVar1 != 0) {
              return 0xfffffffc;
            }
            iVar5 = 0;
            puVar8 = local_10 + 0x3ff;
            do {
              puVar9 = puVar8 + -0x3fc;
              if ((puVar8[-0x3fd] != 0xffffffff) || (*puVar8 != 0xffffffff)) {
                return 0xfffffffb;
              }
              do {
                uVar4 = *puVar9;
                if ((uVar4 & 1) == 0) {
                  iVar3 = ((int)uVar4 >> 4) + -1;
                  if (0x3f < iVar3) {
                    iVar3 = 0x3f;
                  }
                  local_140[iVar3] = local_140[iVar3] + 1;
                  uVar6 = uVar4;
                }
                else {
                  if (0x400 < (int)(uVar4 - 1)) {
                    return 0xfffffffa;
                  }
                  local_8 = (int *)((int)local_8 + 1);
                  uVar6 = uVar4 - 1;
                }
                if ((((int)uVar6 < 0x10) || ((uVar6 & 0xf) != 0)) || (0xff0 < (int)uVar6)) {
                  return 0xfffffff9;
                }
                puVar10 = (uint *)((uVar6 - 4) + (int)puVar9);
                puVar9 = (uint *)(uVar6 + (int)puVar9);
                if (*puVar10 != uVar4) {
                  return 0xfffffff8;
                }
              } while (puVar9 < puVar8);
              if (puVar9 != puVar8) {
                return 0xfffffff8;
              }
              puVar8 = puVar8 + 0x400;
              iVar5 = iVar5 + 1;
            } while (iVar5 < 8);
            if ((int *)*local_2c != local_8) {
              return 0xfffffff7;
            }
            local_c = 0;
            local_8 = local_140;
            puVar10 = local_2c;
            do {
              local_14 = 0;
              puVar8 = (uint *)puVar10[1];
              local_38 = puVar10;
              if ((uint *)puVar10[1] != puVar10) {
                do {
                  puVar9 = puVar8;
                  if (local_14 == *local_8) break;
                  if ((puVar9 < local_10) || (local_10 + 0x2000 <= puVar9)) {
                    return 0xfffffff6;
                  }
                  puVar7 = (uint *)(((uint)puVar9 & 0xfffff000) + 0xc);
                  puVar8 = (uint *)(((uint)puVar9 & 0xfffff000) + 0xffc);
                  if (puVar7 == puVar8) {
                    return 0xfffffff5;
                  }
                  do {
                    if (puVar7 == puVar9) break;
                    puVar7 = (uint *)((int)puVar7 + (*puVar7 & 0xfffffffe));
                  } while (puVar7 != puVar8);
                  if (puVar7 == puVar8) {
                    return 0xfffffff5;
                  }
                  iVar5 = ((int)*puVar9 >> 4) + -1;
                  if (0x3f < iVar5) {
                    iVar5 = 0x3f;
                  }
                  if (iVar5 != local_c) {
                    return 0xfffffff4;
                  }
                  if ((uint *)puVar9[2] != local_38) {
                    return 0xfffffff3;
                  }
                  local_14 = local_14 + 1;
                  puVar8 = (uint *)puVar9[1];
                  local_38 = puVar9;
                } while ((uint *)puVar9[1] != puVar10);
                if (local_14 != 0) {
                  if (local_c < 0x20) {
                    uVar4 = 0x80000000 >> ((byte)local_c & 0x1f);
                    local_28 = local_28 | uVar4;
                    local_30 = local_30 | uVar4;
                  }
                  else {
                    uVar4 = 0x80000000 >> ((byte)local_c - 0x20 & 0x1f);
                    local_20 = local_20 | uVar4;
                    local_1c = local_1c | uVar4;
                  }
                }
              }
              if (((uint *)local_38[1] != puVar10) || (local_14 != *local_8)) {
                return 0xfffffff2;
              }
              if ((uint *)puVar10[2] != local_38) {
                return 0xfffffff1;
              }
              local_c = local_c + 1;
              local_8 = local_8 + 1;
              puVar8 = local_3c;
              puVar9 = local_40;
              puVar10 = puVar10 + 2;
            } while (local_c < 0x40);
          }
          if ((local_28 != puVar9[-0x20]) || (local_20 != *puVar9)) {
            return 0xfffffff0;
          }
          local_10 = local_10 + 0x2000;
          local_2c = local_2c + 0x81;
          local_18 = local_18 << 1;
          local_34 = local_34 + 1;
          puVar9 = puVar9 + 1;
        } while (local_34 < 0x20);
        if ((local_30 != *puVar8) || (local_1c != puVar8[1])) {
          return 0xffffffef;
        }
        puVar8 = puVar8 + 5;
        local_24 = local_24 + 1;
        local_40 = puVar9;
      } while (local_24 < DAT_009b3fec);
    }
    uVar2 = 0;
  }
  else {
    uVar2 = 0xffffffff;
  }
  return uVar2;
}

// ====== 0x00866dd0  FUN_00866dd0 ======
undefined ** FUN_00866dd0(void)

{
  bool bVar1;
  int *lpAddress;
  LPVOID pvVar2;
  undefined **ppuVar3;
  int iVar4;
  undefined **lpMem;
  
  if (DAT_0097add0 == -1) {
    lpMem = &PTR_LOOP_0097adc0;
  }
  else {
    lpMem = (undefined **)HeapAlloc(hHeap_009b3ff8,0,0x2020);
    if (lpMem == (undefined **)0x0) {
      return (undefined **)0x0;
    }
  }
  lpAddress = (int *)VirtualAlloc((LPVOID)0x0,0x400000,0x2000,4);
  if (lpAddress != (int *)0x0) {
    pvVar2 = VirtualAlloc(lpAddress,0x10000,0x1000,4);
    if (pvVar2 != (LPVOID)0x0) {
      if (lpMem == &PTR_LOOP_0097adc0) {
        if (PTR_LOOP_0097adc0 == (undefined *)0x0) {
          PTR_LOOP_0097adc0 = (undefined *)&PTR_LOOP_0097adc0;
        }
        if (PTR_LOOP_0097adc4 == (undefined *)0x0) {
          PTR_LOOP_0097adc4 = (undefined *)&PTR_LOOP_0097adc0;
        }
      }
      else {
        *lpMem = (undefined *)&PTR_LOOP_0097adc0;
        lpMem[1] = PTR_LOOP_0097adc4;
        PTR_LOOP_0097adc4 = (undefined *)lpMem;
        *(undefined ***)lpMem[1] = lpMem;
      }
      lpMem[5] = (undefined *)(lpAddress + 0x100000);
      ppuVar3 = lpMem + 6;
      lpMem[3] = (undefined *)(lpMem + 0x26);
      lpMem[4] = (undefined *)lpAddress;
      lpMem[2] = (undefined *)ppuVar3;
      iVar4 = 0;
      do {
        bVar1 = 0xf < iVar4;
        iVar4 = iVar4 + 1;
        *ppuVar3 = (undefined *)((bVar1 - 1 & 0xf1) - 1);
        ppuVar3[1] = (undefined *)0xf1;
        ppuVar3 = ppuVar3 + 2;
      } while (iVar4 < 0x400);
      _memset(lpAddress,0,0x10000);
      for (; lpAddress < lpMem[4] + 0x10000; lpAddress = lpAddress + 0x400) {
        *(undefined1 *)(lpAddress + 0x3e) = 0xff;
        *lpAddress = (int)(lpAddress + 2);
        lpAddress[1] = 0xf0;
      }
      return lpMem;
    }
    VirtualFree(lpAddress,0,0x8000);
  }
  if (lpMem != &PTR_LOOP_0097adc0) {
    HeapFree(hHeap_009b3ff8,0,lpMem);
  }
  return (undefined **)0x0;
}

// ====== 0x00866f14  FUN_00866f14 ======
void __cdecl FUN_00866f14(undefined **param_1)

{
  VirtualFree(param_1[4],0,0x8000);
  if ((undefined **)PTR_LOOP_0097cde0 == param_1) {
    PTR_LOOP_0097cde0 = param_1[1];
  }
  if (param_1 != &PTR_LOOP_0097adc0) {
    *(undefined **)param_1[1] = *param_1;
    *(undefined **)(*param_1 + 4) = param_1[1];
    HeapFree(hHeap_009b3ff8,0,param_1);
    return;
  }
  DAT_0097add0 = 0xffffffff;
  return;
}

// ====== 0x00866f6a  FUN_00866f6a ======
void __cdecl FUN_00866f6a(int param_1)

{
  BOOL BVar1;
  undefined **ppuVar2;
  int iVar3;
  undefined **ppuVar4;
  undefined **ppuVar5;
  int local_8;
  
  ppuVar4 = (undefined **)PTR_LOOP_0097adc4;
  do {
    ppuVar5 = ppuVar4;
    if (ppuVar4[4] != (undefined *)0xffffffff) {
      local_8 = 0;
      ppuVar5 = ppuVar4 + 0x804;
      iVar3 = 0x3ff000;
      do {
        if (*ppuVar5 == (undefined *)0xf0) {
          BVar1 = VirtualFree(ppuVar4[4] + iVar3,0x1000,0x4000);
          if (BVar1 != 0) {
            *ppuVar5 = (undefined *)0xffffffff;
            DAT_009b3b98 = DAT_009b3b98 + -1;
            if (((undefined **)ppuVar4[3] == (undefined **)0x0) || (ppuVar5 < ppuVar4[3])) {
              ppuVar4[3] = (undefined *)ppuVar5;
            }
            local_8 = local_8 + 1;
            param_1 = param_1 + -1;
            if (param_1 == 0) break;
          }
        }
        iVar3 = iVar3 + -0x1000;
        ppuVar5 = ppuVar5 + -2;
      } while (-1 < iVar3);
      ppuVar5 = (undefined **)ppuVar4[1];
      if ((local_8 != 0) && (ppuVar4[6] == (undefined *)0xffffffff)) {
        ppuVar2 = ppuVar4 + 8;
        iVar3 = 1;
        do {
          if (*ppuVar2 != (undefined *)0xffffffff) break;
          iVar3 = iVar3 + 1;
          ppuVar2 = ppuVar2 + 2;
        } while (iVar3 < 0x400);
        if (iVar3 == 0x400) {
          FUN_00866f14(ppuVar4);
        }
      }
    }
    if ((ppuVar5 == (undefined **)PTR_LOOP_0097adc4) || (ppuVar4 = ppuVar5, param_1 < 1)) {
      return;
    }
  } while( true );
}

// ====== 0x0086702c  FUN_0086702c ======
int __cdecl FUN_0086702c(undefined *param_1,undefined4 *param_2,uint *param_3)

{
  undefined **ppuVar1;
  uint uVar2;
  
  ppuVar1 = &PTR_LOOP_0097adc0;
  while ((param_1 <= ppuVar1[4] || (ppuVar1[5] <= param_1))) {
    ppuVar1 = (undefined **)*ppuVar1;
    if (ppuVar1 == &PTR_LOOP_0097adc0) {
      return 0;
    }
  }
  if (((uint)param_1 & 0xf) != 0) {
    return 0;
  }
  if (((uint)param_1 & 0xfff) < 0x100) {
    return 0;
  }
  *param_2 = ppuVar1;
  uVar2 = (uint)param_1 & 0xfffff000;
  *param_3 = uVar2;
  return ((int)(param_1 + (-0x100 - uVar2)) >> 4) + 8 + uVar2;
}

// ====== 0x00867083  FUN_00867083 ======
void __cdecl FUN_00867083(int param_1,int param_2,byte *param_3)

{
  int *piVar1;
  
  piVar1 = (int *)(param_1 + 0x18 + (param_2 - *(int *)(param_1 + 0x10) >> 0xc) * 8);
  *piVar1 = *piVar1 + (uint)*param_3;
  *param_3 = 0;
  piVar1[1] = 0xf1;
  if ((*piVar1 == 0xf0) && (DAT_009b3b98 = DAT_009b3b98 + 1, DAT_009b3b98 == 0x20)) {
    FUN_00866f6a(0x10);
  }
  return;
}

// ====== 0x008670c8  FUN_008670c8 ======
/* WARNING: Type propagation algorithm not settling */

int * __cdecl FUN_008670c8(uint param_1)

{
  uint *puVar1;
  undefined **ppuVar2;
  undefined *puVar3;
  int *piVar4;
  int *piVar5;
  undefined **ppuVar6;
  int *piVar7;
  uint *puVar8;
  undefined **ppuVar9;
  int local_8;
  
  piVar7 = (int *)PTR_LOOP_0097cde0;
  do {
    if (piVar7[4] != -1) {
      puVar8 = (uint *)piVar7[2];
      piVar4 = (int *)(((int)puVar8 + (-0x18 - (int)piVar7) >> 3) * 0x1000 + piVar7[4]);
      if (puVar8 < piVar7 + 0x806) {
        do {
          if (((int)param_1 <= (int)*puVar8) && (param_1 < puVar8[1])) {
            piVar5 = (int *)FUN_008672d0(piVar4,*puVar8,param_1);
            if (piVar5 != (int *)0x0) goto LAB_00867193;
            puVar8[1] = param_1;
          }
          puVar8 = puVar8 + 2;
          piVar4 = piVar4 + 0x400;
        } while (puVar8 < piVar7 + 0x806);
      }
      puVar1 = (uint *)piVar7[2];
      piVar4 = (int *)piVar7[4];
      for (puVar8 = (uint *)(piVar7 + 6); puVar8 < puVar1; puVar8 = puVar8 + 2) {
        if (((int)param_1 <= (int)*puVar8) && (param_1 < puVar8[1])) {
          piVar5 = (int *)FUN_008672d0(piVar4,*puVar8,param_1);
          if (piVar5 != (int *)0x0) {
LAB_00867193:
            PTR_LOOP_0097cde0 = (undefined *)piVar7;
            *puVar8 = *puVar8 - param_1;
            piVar7[2] = (int)puVar8;
            return piVar5;
          }
          puVar8[1] = param_1;
        }
        piVar4 = piVar4 + 0x400;
      }
    }
    piVar7 = (int *)*piVar7;
    if (piVar7 == (int *)PTR_LOOP_0097cde0) {
      ppuVar9 = &PTR_LOOP_0097adc0;
      while ((ppuVar9[4] == (undefined *)0xffffffff || (ppuVar9[3] == (undefined *)0x0))) {
        ppuVar9 = (undefined **)*ppuVar9;
        if (ppuVar9 == &PTR_LOOP_0097adc0) {
          ppuVar9 = FUN_00866dd0();
          if (ppuVar9 == (undefined **)0x0) {
            return (int *)0x0;
          }
          piVar7 = (int *)ppuVar9[4];
          *(char *)(piVar7 + 2) = (char)param_1;
          PTR_LOOP_0097cde0 = (undefined *)ppuVar9;
          *piVar7 = (int)piVar7 + param_1 + 8;
          piVar7[1] = 0xf0 - param_1;
          ppuVar9[6] = ppuVar9[6] + -(param_1 & 0xff);
          return piVar7 + 0x40;
        }
      }
      ppuVar2 = (undefined **)ppuVar9[3];
      local_8 = 0;
      piVar7 = (int *)(ppuVar9[4] + ((int)ppuVar2 + (-0x18 - (int)ppuVar9) >> 3) * 0x1000);
      puVar3 = *ppuVar2;
      ppuVar6 = ppuVar2;
      for (; (puVar3 == (undefined *)0xffffffff && (local_8 < 0x10)); local_8 = local_8 + 1) {
        ppuVar6 = ppuVar6 + 2;
        puVar3 = *ppuVar6;
      }
      piVar4 = (int *)VirtualAlloc(piVar7,local_8 << 0xc,0x1000,4);
      if (piVar4 != piVar7) {
        return (int *)0x0;
      }
      _memset(piVar7,local_8 << 0xc,0);
      ppuVar6 = ppuVar2;
      if (0 < local_8) {
        piVar4 = piVar7 + 1;
        do {
          *(undefined1 *)(piVar4 + 0x3d) = 0xff;
          piVar4[-1] = (int)(piVar4 + 1);
          *piVar4 = 0xf0;
          *ppuVar6 = (undefined *)0xf0;
          ppuVar6[1] = (undefined *)0xf1;
          piVar4 = piVar4 + 0x400;
          ppuVar6 = ppuVar6 + 2;
          local_8 = local_8 + -1;
        } while (local_8 != 0);
      }
      for (; (ppuVar6 < ppuVar9 + 0x806 && (*ppuVar6 != (undefined *)0xffffffff));
          ppuVar6 = ppuVar6 + 2) {
      }
      PTR_LOOP_0097cde0 = (undefined *)ppuVar9;
      ppuVar9[3] = (undefined *)(-(uint)(ppuVar6 < ppuVar9 + 0x806) & (uint)ppuVar6);
      *(char *)(piVar7 + 2) = (char)param_1;
      ppuVar9[2] = (undefined *)ppuVar2;
      *ppuVar2 = *ppuVar2 + -param_1;
      piVar7[1] = piVar7[1] - param_1;
      *piVar7 = (int)piVar7 + param_1 + 8;
      return piVar7 + 0x40;
    }
  } while( true );
}

// ====== 0x008672d0  FUN_008672d0 ======
int __cdecl FUN_008672d0(int *param_1,uint param_2,uint param_3)

{
  byte *pbVar1;
  byte *pbVar2;
  byte bVar3;
  byte *pbVar4;
  uint uVar5;
  byte *pbVar6;
  
  pbVar2 = (byte *)*param_1;
  pbVar1 = (byte *)(param_1 + 0x3e);
  bVar3 = (byte)param_3;
  if ((uint)param_1[1] < param_3) {
    pbVar6 = pbVar2;
    if (pbVar2[param_1[1]] != 0) {
      pbVar6 = pbVar2 + param_1[1];
    }
    while( true ) {
      while( true ) {
        if (pbVar1 <= pbVar6 + param_3) {
          pbVar6 = (byte *)(param_1 + 2);
          while( true ) {
            while( true ) {
              if (pbVar2 <= pbVar6) {
                return 0;
              }
              if (pbVar1 <= pbVar6 + param_3) {
                return 0;
              }
              if (*pbVar6 == 0) break;
              pbVar6 = pbVar6 + *pbVar6;
            }
            uVar5 = 1;
            pbVar4 = pbVar6;
            while (pbVar4 = pbVar4 + 1, *pbVar4 == 0) {
              uVar5 = uVar5 + 1;
            }
            if (param_3 <= uVar5) break;
            param_2 = param_2 - uVar5;
            pbVar6 = pbVar4;
            if (param_2 < param_3) {
              return 0;
            }
          }
          if (pbVar6 + param_3 < pbVar1) {
            *param_1 = (int)(pbVar6 + param_3);
            param_1[1] = uVar5 - param_3;
          }
          else {
            param_1[1] = 0;
            *param_1 = (int)(param_1 + 2);
          }
          *pbVar6 = bVar3;
          pbVar2 = pbVar6 + 8;
          goto LAB_008673e3;
        }
        if (*pbVar6 == 0) break;
        pbVar6 = pbVar6 + *pbVar6;
      }
      uVar5 = 1;
      pbVar4 = pbVar6;
      while (pbVar4 = pbVar4 + 1, *pbVar4 == 0) {
        uVar5 = uVar5 + 1;
      }
      if (param_3 <= uVar5) break;
      if (pbVar6 == pbVar2) {
        param_1[1] = uVar5;
        pbVar6 = pbVar4;
      }
      else {
        param_2 = param_2 - uVar5;
        pbVar6 = pbVar4;
        if (param_2 < param_3) {
          return 0;
        }
      }
    }
    if (pbVar6 + param_3 < pbVar1) {
      *param_1 = (int)(pbVar6 + param_3);
      param_1[1] = uVar5 - param_3;
    }
    else {
      param_1[1] = 0;
      *param_1 = (int)(param_1 + 2);
    }
    *pbVar6 = bVar3;
    pbVar2 = pbVar6 + 8;
  }
  else {
    *pbVar2 = bVar3;
    if (pbVar2 + param_3 < pbVar1) {
      *param_1 = *param_1 + param_3;
      param_1[1] = param_1[1] - param_3;
    }
    else {
      param_1[1] = 0;
      *param_1 = (int)(param_1 + 2);
    }
    pbVar2 = pbVar2 + 8;
  }
LAB_008673e3:
  return (int)pbVar2 * 0x10 + (int)param_1 * -0xf;
}

// ====== 0x008673f4  FUN_008673f4 ======
undefined4 __cdecl FUN_008673f4(int param_1,int *param_2,byte *param_3,uint param_4)

{
  byte *pbVar1;
  int *piVar2;
  byte bVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  
  uVar6 = (uint)*param_3;
  piVar2 = (int *)(param_1 + 0x18 + ((int)param_2 - *(int *)(param_1 + 0x10) >> 0xc) * 8);
  if (param_4 < uVar6) {
    *param_3 = (byte)param_4;
    *piVar2 = *piVar2 + (uVar6 - param_4);
    piVar2[1] = 0xf1;
  }
  else {
    if (param_4 <= uVar6) {
      return 0;
    }
    pbVar1 = param_3 + param_4;
    if (param_2 + 0x3e < pbVar1) {
      return 0;
    }
    for (pbVar4 = param_3 + uVar6; (pbVar4 < pbVar1 && (*pbVar4 == 0)); pbVar4 = pbVar4 + 1) {
    }
    if (pbVar4 != pbVar1) {
      return 0;
    }
    *param_3 = (byte)param_4;
    if ((param_3 <= (byte *)*param_2) && ((byte *)*param_2 < pbVar1)) {
      if (pbVar1 < param_2 + 0x3e) {
        iVar5 = 0;
        *param_2 = (int)pbVar1;
        bVar3 = *pbVar1;
        while (bVar3 == 0) {
          iVar5 = iVar5 + 1;
          bVar3 = pbVar1[iVar5];
        }
        param_2[1] = iVar5;
      }
      else {
        param_2[1] = 0;
        *param_2 = (int)(param_2 + 2);
      }
    }
    *piVar2 = *piVar2 + (uVar6 - param_4);
  }
  return 1;
}

// ====== 0x0086749d  FUN_0086749d ======
int FUN_0086749d(void)

{
  byte *pbVar1;
  byte bVar2;
  undefined **ppuVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  int *piVar7;
  undefined **local_24;
  int local_20;
  int local_1c;
  undefined *local_14;
  int local_10;
  int local_c;
  int local_8;
  
  local_20 = 0;
  local_24 = &PTR_LOOP_0097adc0;
  do {
    if ((undefined **)PTR_LOOP_0097cde0 == local_24) {
      local_20 = local_20 + 1;
    }
    piVar6 = (int *)local_24[4];
    if (piVar6 != (int *)0xffffffff) {
      local_1c = 0;
      local_10 = 0;
      ppuVar3 = local_24 + 6;
      piVar7 = piVar6 + 2;
      do {
        if (*ppuVar3 == (undefined *)0xffffffff) {
          if ((local_10 == 0) && ((undefined **)local_24[3] != ppuVar3)) {
            return -1;
          }
          local_10 = local_10 + 1;
        }
        else {
          if (piVar7 + 0x3c <= (int *)*piVar6) {
            return -2;
          }
          if ((char)piVar7[0x3c] != -1) {
            return -3;
          }
          local_c = 0;
          local_14 = (undefined *)0x0;
          local_8 = 0;
          iVar4 = 0;
          do {
            pbVar1 = (byte *)((int)piVar7 + iVar4);
            if (pbVar1 == (byte *)*piVar6) {
              local_c = local_c + 1;
            }
            if (*pbVar1 == 0) {
              local_14 = local_14 + 1;
              local_8 = local_8 + 1;
              iVar5 = iVar4 + 1;
            }
            else {
              if ((int)ppuVar3[1] <= local_8) {
                return -4;
              }
              if (local_c == 1) {
                if (local_8 < piVar7[-1]) {
                  return -5;
                }
                local_c = 2;
              }
              local_8 = 0;
              bVar2 = *pbVar1;
              iVar5 = iVar4;
              while (iVar5 = iVar5 + 1, iVar5 < (int)((uint)bVar2 + iVar4)) {
                if (*(char *)((int)piVar7 + iVar5) != '\0') {
                  return -6;
                }
                bVar2 = *(byte *)(iVar4 + 8 + (int)piVar6);
              }
            }
            iVar4 = iVar5;
          } while (iVar5 < 0xf0);
          if (local_14 != *ppuVar3) {
            return -7;
          }
          if (local_c == 0) {
            return -8;
          }
        }
        local_1c = local_1c + 1;
        ppuVar3 = ppuVar3 + 2;
        piVar6 = piVar6 + 0x400;
        piVar7 = piVar7 + 0x400;
      } while (local_1c < 0x400);
    }
    local_24 = (undefined **)*local_24;
    if (local_24 == &PTR_LOOP_0097adc0) {
      return (-(uint)(local_20 != 0) & 9) - 9;
    }
  } while( true );
}

// ====== 0x00867625  FUN_00867625 ======
undefined4 __cdecl FUN_00867625(undefined4 param_1)

{
  int iVar1;
  
  if (DAT_009b3ba0 != (code *)0x0) {
    iVar1 = (*DAT_009b3ba0)(param_1);
    if (iVar1 != 0) {
      return 1;
    }
  }
  return 0;
}

// ====== 0x00867640  FUN_00867640 ======
int __cdecl
FUN_00867640(LCID param_1,uint param_2,char *param_3,int param_4,LPWSTR param_5,int param_6,
            UINT param_7,int param_8)

{
  int iVar1;
  int iVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089b9d0;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (DAT_009b3ba4 == 0) {
    ExceptionList = &local_14;
    iVar1 = LCMapStringW(0,0x100,(LPCWSTR)&lpSrcStr_0089b9cc,1,(LPWSTR)0x0,0);
    if (iVar1 == 0) {
      iVar1 = LCMapStringA(0,0x100,(LPCSTR)&lpSrcStr_0089b9c8,1,(LPSTR)0x0,0);
      if (iVar1 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_009b3ba4 = 2;
    }
    else {
      DAT_009b3ba4 = 1;
    }
  }
  if (0 < param_4) {
    param_4 = FUN_00867864(param_3,param_4);
  }
  if (DAT_009b3ba4 == 2) {
    iVar1 = LCMapStringA(param_1,param_2,param_3,param_4,(LPSTR)param_5,param_6);
    ExceptionList = local_14;
    return iVar1;
  }
  if (DAT_009b3ba4 == 1) {
    if (param_7 == 0) {
      param_7 = CodePage_009b3a78;
    }
    iVar1 = MultiByteToWideChar(param_7,(-(uint)(param_8 != 0) & 8) + 1,param_3,param_4,(LPWSTR)0x0,
                                0);
    if (iVar1 != 0) {
      local_8 = 0;
      FUN_0085f3a0();
      local_8 = 0xffffffff;
      if ((&stack0x00000000 != (undefined1 *)0x3c) &&
         (iVar2 = MultiByteToWideChar(param_7,1,param_3,param_4,(LPWSTR)&stack0xffffffc4,iVar1),
         iVar2 != 0)) {
        iVar2 = LCMapStringW(param_1,param_2,(LPCWSTR)&stack0xffffffc4,iVar1,(LPWSTR)0x0,0);
        if (iVar2 != 0) {
          if ((param_2 & 0x400) == 0) {
            local_8 = 1;
            FUN_0085f3a0();
            local_8 = 0xffffffff;
            if (&stack0x00000000 == (undefined1 *)0x3c) {
              ExceptionList = local_14;
              return 0;
            }
            iVar1 = LCMapStringW(param_1,param_2,(LPCWSTR)&stack0xffffffc4,iVar1,
                                 (LPWSTR)&stack0xffffffc4,iVar2);
            if (iVar1 == 0) {
              ExceptionList = local_14;
              return 0;
            }
            if (param_6 == 0) {
              param_6 = 0;
              param_5 = (LPWSTR)0x0;
            }
            iVar2 = WideCharToMultiByte(param_7,0x220,(LPCWSTR)&stack0xffffffc4,iVar2,(LPSTR)param_5
                                        ,param_6,(LPCSTR)0x0,(LPBOOL)0x0);
            iVar1 = iVar2;
          }
          else {
            if (param_6 == 0) {
              ExceptionList = local_14;
              return iVar2;
            }
            if (param_6 < iVar2) {
              ExceptionList = local_14;
              return 0;
            }
            iVar1 = LCMapStringW(param_1,param_2,(LPCWSTR)&stack0xffffffc4,iVar1,param_5,param_6);
          }
          if (iVar1 != 0) {
            ExceptionList = local_14;
            return iVar2;
          }
        }
      }
    }
  }
  ExceptionList = local_14;
  return 0;
}

// ====== 0x00867864  FUN_00867864 ======
int __cdecl FUN_00867864(char *param_1,int param_2)

{
  char *pcVar1;
  int iVar2;
  
  pcVar1 = param_1;
  iVar2 = param_2;
  if (param_2 != 0) {
    do {
      iVar2 = iVar2 + -1;
      if (*pcVar1 == '\0') break;
      pcVar1 = pcVar1 + 1;
    } while (iVar2 != 0);
  }
  if (*pcVar1 == '\0') {
    return (int)pcVar1 - (int)param_1;
  }
  return param_2;
}

// ====== 0x0086788f  FUN_0086788f ======
uint __cdecl FUN_0086788f(undefined4 *param_1)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  
  uVar2 = param_1[3];
  if (((uVar2 & 0x83) != 0) && ((uVar2 & 0x40) == 0)) {
    if ((uVar2 & 2) == 0) {
      param_1[3] = uVar2 | 1;
      if ((uVar2 & 0x10c) == 0) {
        FUN_0086b817(param_1);
      }
      else {
        *param_1 = param_1[2];
      }
      iVar3 = FUN_00867a9a(param_1[4],(char *)param_1[2],(char *)param_1[6]);
      param_1[1] = iVar3;
      if ((iVar3 != 0) && (iVar3 != -1)) {
        if ((param_1[3] & 0x82) == 0) {
          uVar2 = param_1[4];
          if (uVar2 == 0xffffffff) {
            puVar4 = &DAT_0097ad98;
          }
          else {
            puVar4 = (undefined *)((&DAT_009b4000)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
          }
          if ((puVar4[4] & 0x82) == 0x82) {
            param_1[3] = param_1[3] | 0x2000;
          }
        }
        if (((param_1[6] == 0x200) && ((param_1[3] & 8) != 0)) && ((param_1[3] & 0x400) == 0)) {
          param_1[6] = 0x1000;
        }
        param_1[1] = iVar3 + -1;
        bVar1 = *(byte *)*param_1;
        *param_1 = (byte *)*param_1 + 1;
        return (uint)bVar1;
      }
      param_1[3] = param_1[3] | (-(uint)(iVar3 != 0) & 0x10) + 0x10;
      param_1[1] = 0;
    }
    else {
      param_1[3] = uVar2 | 0x20;
    }
  }
  return 0xffffffff;
}

// ====== 0x00867970  __aulldiv ======
/* Library Function - Single Match
    __aulldiv
   
   Library: Visual Studio */

undefined8 __aulldiv(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  
  uVar3 = param_1;
  uVar8 = param_4;
  uVar6 = param_2;
  uVar9 = param_3;
  if (param_4 == 0) {
    uVar3 = param_2 / param_3;
    iVar4 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) /
                 (ulonglong)param_3);
  }
  else {
    do {
      uVar5 = uVar8 >> 1;
      uVar9 = uVar9 >> 1 | (uint)((uVar8 & 1) != 0) << 0x1f;
      uVar7 = uVar6 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar6 & 1) != 0) << 0x1f;
      uVar8 = uVar5;
      uVar6 = uVar7;
    } while (uVar5 != 0);
    uVar1 = CONCAT44(uVar7,uVar3) / (ulonglong)uVar9;
    iVar4 = (int)uVar1;
    lVar2 = (ulonglong)param_3 * (uVar1 & 0xffffffff);
    uVar3 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar8 = uVar3 + iVar4 * param_4;
    if (((CARRY4(uVar3,iVar4 * param_4)) || (param_2 < uVar8)) ||
       ((param_2 <= uVar8 && (param_1 < (uint)lVar2)))) {
      iVar4 = iVar4 + -1;
    }
    uVar3 = 0;
  }
  return CONCAT44(uVar3,iVar4);
}

// ====== 0x008679d8  FUN_008679d8 ======
int __cdecl
FUN_008679d8(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6,int param_7)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  uint uVar3;
  int iVar4;
  int local_28 [2];
  int local_20;
  int local_18;
  uint local_14;
  int local_c;
  
  uVar3 = param_1 - 0x76c;
  if (((int)uVar3 < 0x46) || (0x8a < (int)uVar3)) {
    iVar2 = -1;
  }
  else {
    iVar4 = *(int *)(&DAT_0097d718 + param_2 * 4) + param_3;
    if (((uVar3 & 3) == 0) && (2 < param_2)) {
      iVar4 = iVar4 + 1;
    }
    FUN_008684fb();
    local_20 = param_4;
    local_18 = param_2 + -1;
    iVar2 = ((param_4 + (uVar3 * 0x16d + iVar4 + (param_1 + -0x76d >> 2)) * 0x18) * 0x3c + param_5)
            * 0x3c + DAT_0097cdf0 + 0x7c558180 + param_6;
    if ((param_7 == 1) ||
       (((param_7 == -1 && (DAT_0097cdf4 != 0)) &&
        (local_14 = uVar3, local_c = iVar4, bVar1 = FUN_008687c6(local_28),
        CONCAT31(extraout_var,bVar1) != 0)))) {
      iVar2 = iVar2 + DAT_0097cdf8;
    }
  }
  return iVar2;
}

// ====== 0x00867a9a  FUN_00867a9a ======
int __cdecl FUN_00867a9a(uint param_1,char *param_2,char *param_3)

{
  int iVar1;
  DWORD *pDVar2;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    FUN_008680cf(param_1);
    iVar1 = FUN_00867aff(param_1,param_2,param_3);
    FUN_0086812e(param_1);
    return iVar1;
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 9;
  pDVar2 = FUN_0085cbe0();
  *pDVar2 = 0;
  return -1;
}

// ====== 0x00867aff  FUN_00867aff ======
int __cdecl FUN_00867aff(uint param_1,char *param_2,char *param_3)

{
  int *piVar1;
  byte *pbVar2;
  char cVar3;
  byte bVar4;
  BOOL BVar5;
  DWORD DVar6;
  DWORD *pDVar7;
  char *pcVar8;
  int iVar9;
  DWORD local_10;
  char *local_c;
  char local_5;
  
  local_c = (char *)0x0;
  if (param_3 != (char *)0x0) {
    piVar1 = &DAT_009b4000 + ((int)param_1 >> 5);
    iVar9 = (param_1 & 0x1f) * 0x24;
    bVar4 = *(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar9 + 4);
    if ((bVar4 & 2) == 0) {
      pcVar8 = param_2;
      if (((bVar4 & 0x48) != 0) &&
         (cVar3 = *(char *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar9 + 5), cVar3 != '\n')) {
        param_3 = param_3 + -1;
        *param_2 = cVar3;
        pcVar8 = param_2 + 1;
        local_c = (char *)0x1;
        *(undefined1 *)(*piVar1 + 5 + iVar9) = 10;
      }
      BVar5 = ReadFile(*(HANDLE *)(*piVar1 + iVar9),pcVar8,(DWORD)param_3,&local_10,
                       (LPOVERLAPPED)0x0);
      if (BVar5 == 0) {
        DVar6 = GetLastError();
        if (DVar6 == 5) {
          pDVar7 = FUN_0085cbd7();
          *pDVar7 = 9;
          pDVar7 = FUN_0085cbe0();
          *pDVar7 = 5;
        }
        else {
          if (DVar6 == 0x6d) {
            return 0;
          }
          FUN_0085cb64(DVar6);
        }
        return -1;
      }
      bVar4 = *(byte *)(*piVar1 + 4 + iVar9);
      if ((bVar4 & 0x80) == 0) {
        return (int)local_c + local_10;
      }
      if ((local_10 == 0) || (*param_2 != '\n')) {
        bVar4 = bVar4 & 0xfb;
      }
      else {
        bVar4 = bVar4 | 4;
      }
      *(byte *)(*piVar1 + 4 + iVar9) = bVar4;
      param_3 = param_2;
      local_c = param_2 + (int)local_c + local_10;
      pcVar8 = param_2;
      if (param_2 < local_c) {
        do {
          cVar3 = *param_3;
          if (cVar3 == '\x1a') {
            pbVar2 = (byte *)(*piVar1 + 4 + iVar9);
            bVar4 = *pbVar2;
            if ((bVar4 & 0x40) == 0) {
              *pbVar2 = bVar4 | 2;
            }
            break;
          }
          if (cVar3 == '\r') {
            if (param_3 < local_c + -1) {
              if (param_3[1] == '\n') {
                param_3 = param_3 + 2;
                goto LAB_00867c8a;
              }
              *pcVar8 = '\r';
              pcVar8 = pcVar8 + 1;
              param_3 = param_3 + 1;
            }
            else {
              param_3 = param_3 + 1;
              BVar5 = ReadFile(*(HANDLE *)(*piVar1 + iVar9),&local_5,1,&local_10,(LPOVERLAPPED)0x0);
              if (((BVar5 == 0) && (DVar6 = GetLastError(), DVar6 != 0)) || (local_10 == 0)) {
LAB_00867ca4:
                *pcVar8 = '\r';
LAB_00867ca7:
                pcVar8 = pcVar8 + 1;
              }
              else if ((*(byte *)(*piVar1 + 4 + iVar9) & 0x48) == 0) {
                if ((pcVar8 == param_2) && (local_5 == '\n')) {
LAB_00867c8a:
                  *pcVar8 = '\n';
                  goto LAB_00867ca7;
                }
                FUN_008681b5(param_1,-1,1);
                if (local_5 != '\n') goto LAB_00867ca4;
              }
              else {
                if (local_5 == '\n') goto LAB_00867c8a;
                *pcVar8 = '\r';
                pcVar8 = pcVar8 + 1;
                *(char *)(*piVar1 + 5 + iVar9) = local_5;
              }
            }
          }
          else {
            *pcVar8 = cVar3;
            pcVar8 = pcVar8 + 1;
            param_3 = param_3 + 1;
          }
        } while (param_3 < local_c);
      }
      return (int)pcVar8 - (int)param_2;
    }
  }
  return 0;
}

// ====== 0x00867ce0  _strcmp ======
/* Library Function - Single Match
    _strcmp
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

int __cdecl _strcmp(char *_Str1,char *_Str2)

{
  undefined2 uVar1;
  undefined4 uVar2;
  byte bVar3;
  byte bVar4;
  bool bVar5;
  
  if (((uint)_Str1 & 3) != 0) {
    if (((uint)_Str1 & 1) != 0) {
      bVar4 = *_Str1;
      _Str1 = _Str1 + 1;
      bVar5 = bVar4 < (byte)*_Str2;
      if (bVar4 != *_Str2) goto LAB_00867d24;
      _Str2 = _Str2 + 1;
      if (bVar4 == 0) {
        return 0;
      }
      if (((uint)_Str1 & 2) == 0) goto LAB_00867cf0;
    }
    uVar1 = *(undefined2 *)_Str1;
    _Str1 = _Str1 + 2;
    bVar4 = (byte)uVar1;
    bVar5 = bVar4 < (byte)*_Str2;
    if (bVar4 != *_Str2) goto LAB_00867d24;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((ushort)uVar1 >> 8);
    bVar5 = bVar4 < ((byte *)_Str2)[1];
    if (bVar4 != ((byte *)_Str2)[1]) goto LAB_00867d24;
    if (bVar4 == 0) {
      return 0;
    }
    _Str2 = (char *)((byte *)_Str2 + 2);
  }
LAB_00867cf0:
  while( true ) {
    uVar2 = *(undefined4 *)_Str1;
    bVar4 = (byte)uVar2;
    bVar5 = bVar4 < (byte)*_Str2;
    if (bVar4 != *_Str2) break;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((uint)uVar2 >> 8);
    bVar5 = bVar4 < ((byte *)_Str2)[1];
    if (bVar4 != ((byte *)_Str2)[1]) break;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((uint)uVar2 >> 0x10);
    bVar5 = bVar4 < ((byte *)_Str2)[2];
    if (bVar4 != ((byte *)_Str2)[2]) break;
    bVar3 = (byte)((uint)uVar2 >> 0x18);
    if (bVar4 == 0) {
      return 0;
    }
    bVar5 = bVar3 < ((byte *)_Str2)[3];
    if (bVar3 != ((byte *)_Str2)[3]) break;
    _Str2 = (char *)((byte *)_Str2 + 4);
    _Str1 = _Str1 + 4;
    if (bVar3 == 0) {
      return 0;
    }
  }
LAB_00867d24:
  return (uint)bVar5 * -2 + 1;
}

// ====== 0x00867d64  FUN_00867d64 ======
int FUN_00867d64(int *param_1)

{
  int *piVar1;
  bool bVar2;
  int iVar3;
  undefined3 extraout_var;
  
  piVar1 = (int *)*param_1;
  if (((*piVar1 == -0x1f928c9d) && (piVar1[4] == 3)) && (piVar1[5] == 0x19930520)) {
    iVar3 = FUN_008614f4();
    return iVar3;
  }
  if ((DAT_009b3ba8 != (FARPROC)0x0) &&
     (bVar2 = FUN_0086bf01(DAT_009b3ba8), CONCAT31(extraout_var,bVar2) != 0)) {
    iVar3 = (*DAT_009b3ba8)(param_1);
    return iVar3;
  }
  return 0;
}

// ====== 0x00867dc8  FUN_00867dc8 ======
uint FUN_00867dc8(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int *piVar3;
  uint uVar4;
  int local_8;
  int local_4;
  
  uVar4 = 0xffffffff;
  FUN_00860a61(0x12);
  local_8 = 0;
  local_4 = 0;
  piVar3 = &DAT_009b4000;
  while (puVar2 = (undefined4 *)*piVar3, puVar1 = puVar2, puVar2 != (undefined4 *)0x0) {
    for (; puVar2 < puVar1 + 0x120; puVar2 = puVar2 + 9) {
      if ((*(byte *)(puVar2 + 1) & 1) == 0) {
        if (puVar2[2] == 0) {
          FUN_00860a61(0x11);
          if (puVar2[2] == 0) {
            InitializeCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
            puVar2[2] = puVar2[2] + 1;
          }
          FUN_00860ac2(0x11);
        }
        EnterCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
        if ((*(byte *)(puVar2 + 1) & 1) == 0) {
          *puVar2 = 0xffffffff;
          uVar4 = ((int)puVar2 - *piVar3) / 0x24 + local_4;
          if (uVar4 != 0xffffffff) goto LAB_00867eda;
          break;
        }
        LeaveCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
      }
      puVar1 = (undefined4 *)*piVar3;
    }
    local_4 = local_4 + 0x20;
    piVar3 = piVar3 + 1;
    local_8 = local_8 + 1;
    if (0x9b40ff < (int)piVar3) goto LAB_00867eda;
  }
  puVar2 = (undefined4 *)_malloc(0x480);
  if (puVar2 != (undefined4 *)0x0) {
    uNumber_009b4100 = uNumber_009b4100 + 0x20;
    (&DAT_009b4000)[local_8] = puVar2;
    puVar1 = puVar2;
    for (; puVar2 < puVar1 + 0x120; puVar2 = puVar2 + 9) {
      *(undefined1 *)(puVar2 + 1) = 0;
      *puVar2 = 0xffffffff;
      puVar2[2] = 0;
      *(undefined1 *)((int)puVar2 + 5) = 10;
      puVar1 = (undefined4 *)(&DAT_009b4000)[local_8];
    }
    uVar4 = local_8 << 5;
    FUN_008680cf(uVar4);
  }
LAB_00867eda:
  FUN_00860ac2(0x12);
  return uVar4;
}

// ====== 0x00867eeb  FUN_00867eeb ======
undefined4 __cdecl FUN_00867eeb(uint param_1,HANDLE param_2)

{
  DWORD *pDVar1;
  int iVar2;
  DWORD nStdHandle;
  
  if (param_1 < uNumber_009b4100) {
    iVar2 = (param_1 & 0x1f) * 0x24;
    if (*(int *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar2) == -1) {
      if (DAT_00979e88 == 1) {
        if (param_1 == 0) {
          nStdHandle = 0xfffffff6;
        }
        else if (param_1 == 1) {
          nStdHandle = 0xfffffff5;
        }
        else {
          if (param_1 != 2) goto LAB_00867f44;
          nStdHandle = 0xfffffff4;
        }
        SetStdHandle(nStdHandle,param_2);
      }
LAB_00867f44:
      *(HANDLE *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar2) = param_2;
      return 0;
    }
  }
  pDVar1 = FUN_0085cbd7();
  *pDVar1 = 9;
  pDVar1 = FUN_0085cbe0();
  *pDVar1 = 0;
  return 0xffffffff;
}

// ====== 0x00867f67  FUN_00867f67 ======
undefined4 __cdecl FUN_00867f67(uint param_1)

{
  int *piVar1;
  DWORD *pDVar2;
  int iVar3;
  DWORD nStdHandle;
  
  if (param_1 < uNumber_009b4100) {
    iVar3 = (param_1 & 0x1f) * 0x24;
    piVar1 = (int *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar3);
    if (((*(byte *)(piVar1 + 1) & 1) != 0) && (*piVar1 != -1)) {
      if (DAT_00979e88 == 1) {
        if (param_1 == 0) {
          nStdHandle = 0xfffffff6;
        }
        else if (param_1 == 1) {
          nStdHandle = 0xfffffff5;
        }
        else {
          if (param_1 != 2) goto LAB_00867fc3;
          nStdHandle = 0xfffffff4;
        }
        SetStdHandle(nStdHandle,(HANDLE)0x0);
      }
LAB_00867fc3:
      *(undefined4 *)((&DAT_009b4000)[(int)param_1 >> 5] + iVar3) = 0xffffffff;
      return 0;
    }
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 9;
  pDVar2 = FUN_0085cbe0();
  *pDVar2 = 0;
  return 0xffffffff;
}

// ====== 0x00867fe6  FUN_00867fe6 ======
undefined4 __cdecl FUN_00867fe6(uint param_1)

{
  DWORD *pDVar1;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    return *(undefined4 *)((&DAT_009b4000)[(int)param_1 >> 5] + (param_1 & 0x1f) * 0x24);
  }
  pDVar1 = FUN_0085cbd7();
  *pDVar1 = 9;
  pDVar1 = FUN_0085cbe0();
  *pDVar1 = 0;
  return 0xffffffff;
}

// ====== 0x00868028  FUN_00868028 ======
uint __cdecl FUN_00868028(HANDLE param_1,uint param_2)

{
  DWORD DVar1;
  uint uVar2;
  DWORD *pDVar3;
  byte bVar4;
  
  bVar4 = 0;
  if ((param_2 & 8) != 0) {
    bVar4 = 0x20;
  }
  if ((param_2 & 0x4000) != 0) {
    bVar4 = bVar4 | 0x80;
  }
  if ((param_2 & 0x80) != 0) {
    bVar4 = bVar4 | 0x10;
  }
  DVar1 = GetFileType(param_1);
  if (DVar1 == 0) {
    DVar1 = GetLastError();
    FUN_0085cb64(DVar1);
  }
  else {
    if (DVar1 == 2) {
      bVar4 = bVar4 | 0x40;
    }
    else if (DVar1 == 3) {
      bVar4 = bVar4 | 8;
    }
    uVar2 = FUN_00867dc8();
    if (uVar2 != 0xffffffff) {
      FUN_00867eeb(uVar2,param_1);
      *(byte *)((&DAT_009b4000)[(int)uVar2 >> 5] + 4 + (uVar2 & 0x1f) * 0x24) = bVar4 | 1;
      FUN_0086812e(uVar2);
      return uVar2;
    }
    pDVar3 = FUN_0085cbd7();
    *pDVar3 = 0x18;
    pDVar3 = FUN_0085cbe0();
    *pDVar3 = 0;
  }
  return 0xffffffff;
}

// ====== 0x008680cf  FUN_008680cf ======
void __cdecl FUN_008680cf(uint param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = (param_1 & 0x1f) * 0x24;
  iVar1 = (&DAT_009b4000)[(int)param_1 >> 5] + iVar2;
  if (*(int *)(iVar1 + 8) == 0) {
    FUN_00860a61(0x11);
    if (*(int *)(iVar1 + 8) == 0) {
      InitializeCriticalSection((LPCRITICAL_SECTION)(iVar1 + 0xc));
      *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
    }
    FUN_00860ac2(0x11);
  }
  EnterCriticalSection((LPCRITICAL_SECTION)((&DAT_009b4000)[(int)param_1 >> 5] + 0xc + iVar2));
  return;
}

// ====== 0x0086812e  FUN_0086812e ======
void __cdecl FUN_0086812e(uint param_1)

{
  LeaveCriticalSection
            ((LPCRITICAL_SECTION)
             ((&DAT_009b4000)[(int)param_1 >> 5] + 0xc + (param_1 & 0x1f) * 0x24));
  return;
}

// ====== 0x00868150  FUN_00868150 ======
DWORD __cdecl FUN_00868150(uint param_1,LONG param_2,DWORD param_3)

{
  DWORD DVar1;
  DWORD *pDVar2;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    FUN_008680cf(param_1);
    DVar1 = FUN_008681b5(param_1,param_2,param_3);
    FUN_0086812e(param_1);
    return DVar1;
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 9;
  pDVar2 = FUN_0085cbe0();
  *pDVar2 = 0;
  return 0xffffffff;
}

// ====== 0x008681b5  FUN_008681b5 ======
DWORD __cdecl FUN_008681b5(uint param_1,LONG param_2,DWORD param_3)

{
  byte *pbVar1;
  HANDLE hFile;
  DWORD *pDVar2;
  DWORD DVar3;
  uint uVar4;
  
  hFile = (HANDLE)FUN_00867fe6(param_1);
  if (hFile == (HANDLE)0xffffffff) {
    pDVar2 = FUN_0085cbd7();
    *pDVar2 = 9;
  }
  else {
    DVar3 = SetFilePointer(hFile,param_2,(PLONG)0x0,param_3);
    if (DVar3 == 0xffffffff) {
      uVar4 = GetLastError();
    }
    else {
      uVar4 = 0;
    }
    if (uVar4 == 0) {
      pbVar1 = (byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24);
      *pbVar1 = *pbVar1 & 0xfd;
      return DVar3;
    }
    FUN_0085cb64(uVar4);
  }
  return 0xffffffff;
}

// ====== 0x00868228  FUN_00868228 ======
int * __cdecl FUN_00868228(int param_1,int param_2)

{
  int iVar1;
  uint *puVar2;
  uint *puVar3;
  uint *_Size;
  int *local_24;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089b9e8;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  puVar2 = (uint *)(param_1 * param_2);
  puVar3 = puVar2;
  ExceptionList = &local_14;
  if (puVar2 < (uint *)0xffffffe1) {
    if (puVar2 == (uint *)0x0) {
      puVar3 = (uint *)0x1;
    }
    puVar3 = (uint *)((int)puVar3 + 0xfU & 0xfffffff0);
    ExceptionList = &local_14;
  }
  do {
    local_24 = (int *)0x0;
    if (puVar3 < (uint *)0xffffffe1) {
      if (DAT_009b3ffc == 3) {
        if (puVar2 <= DAT_009b3ff4) {
          FUN_00860a61(9);
          local_8 = 0;
          local_24 = FUN_00866203(puVar2);
          local_8 = 0xffffffff;
          FUN_008682c1();
          _Size = puVar2;
          if (local_24 == (int *)0x0) goto LAB_00868315;
LAB_00868304:
          _memset(local_24,0,(size_t)_Size);
        }
LAB_00868310:
        if (local_24 != (int *)0x0) {
          ExceptionList = local_14;
          return local_24;
        }
      }
      else {
        if ((DAT_009b3ffc != 2) || (DAT_0097cde4 < puVar3)) goto LAB_00868310;
        FUN_00860a61(9);
        local_8 = 1;
        local_24 = FUN_008670c8((uint)puVar3 >> 4);
        local_8 = 0xffffffff;
        FUN_0086834a();
        _Size = puVar3;
        if (local_24 != (int *)0x0) goto LAB_00868304;
      }
LAB_00868315:
      local_24 = (int *)HeapAlloc(hHeap_009b3ff8,8,(SIZE_T)puVar3);
    }
    if (local_24 != (int *)0x0) {
      ExceptionList = local_14;
      return local_24;
    }
    if (DAT_009b3b9c == 0) {
      ExceptionList = local_14;
      return (int *)0x0;
    }
    iVar1 = FUN_00867625(puVar3);
    if (iVar1 == 0) {
      ExceptionList = local_14;
      return (int *)0x0;
    }
  } while( true );
}

// ====== 0x008682c1  FUN_008682c1 ======
void FUN_008682c1(void)

{
  FUN_00860ac2(9);
  return;
}

// ====== 0x0086834a  FUN_0086834a ======
void FUN_0086834a(void)

{
  FUN_00860ac2(9);
  return;
}

// ====== 0x008683e6  FUN_008683e6 ======
uint __cdecl FUN_008683e6(uint param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined1 uVar5;
  undefined2 local_8;
  
  uVar4 = param_1;
  if (param_1 < 0x100) {
    if (((&DAT_009b4221)[param_1] & 0x20) == 0x20) {
      uVar4 = (uint)(byte)(&DAT_009b4120)[param_1];
    }
  }
  else {
    uVar5 = (undefined1)param_1;
    uVar2 = param_1 >> 8;
    uVar1 = param_1 >> 8;
    param_1 = CONCAT13(uVar5,CONCAT12((char)uVar1,(undefined2)param_1));
    if ((((&DAT_009b4221)[uVar2 & 0xff] & 4) != 0) &&
       (iVar3 = FUN_00867640(DAT_009b4324,0x200,(char *)((int)&param_1 + 2),2,&local_8,2,
                             CodePage_009b4104,1), iVar3 != 0)) {
      uVar4 = (uint)CONCAT11((undefined1)local_8,local_8._1_1_);
    }
  }
  return uVar4;
}

// ====== 0x00868461  FUN_00868461 ======
byte * __cdecl FUN_00868461(byte *param_1,byte *param_2,uint param_3)

{
  byte bVar1;
  byte bVar2;
  uint uVar3;
  byte *pbVar4;
  byte *pbVar5;
  
  if (DAT_009b411c == 0) {
    param_1 = (byte *)_strncpy((char *)param_1,(char *)param_2,param_3);
  }
  else {
    FUN_00860a61(0x19);
    uVar3 = param_3;
    pbVar5 = param_1;
    pbVar4 = param_1;
    if (param_3 != 0) {
      do {
        bVar1 = *param_2;
        param_3 = uVar3 - 1;
        bVar2 = (&DAT_009b4221)[bVar1];
        *pbVar4 = bVar1;
        if ((bVar2 & 4) == 0) {
          pbVar5 = pbVar4 + 1;
          param_2 = param_2 + 1;
          if (bVar1 == 0) goto LAB_008684d2;
        }
        else {
          pbVar5 = pbVar4 + 1;
          if (param_3 == 0) {
            *pbVar4 = 0;
            goto LAB_008684d2;
          }
          bVar1 = param_2[1];
          param_3 = uVar3 - 2;
          *pbVar5 = bVar1;
          pbVar5 = pbVar4 + 2;
          param_2 = param_2 + 2;
          if (bVar1 == 0) {
            *pbVar4 = 0;
            goto LAB_008684d2;
          }
        }
        uVar3 = param_3;
        pbVar4 = pbVar5;
      } while (param_3 != 0);
      param_3 = 0;
    }
LAB_008684d2:
    if (param_3 != 0) {
      for (uVar3 = param_3 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
        pbVar5[0] = 0;
        pbVar5[1] = 0;
        pbVar5[2] = 0;
        pbVar5[3] = 0;
        pbVar5 = pbVar5 + 4;
      }
      for (uVar3 = param_3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *pbVar5 = 0;
        pbVar5 = pbVar5 + 1;
      }
    }
    FUN_00860ac2(0x19);
  }
  return param_1;
}

// ====== 0x008684fb  FUN_008684fb ======
void FUN_008684fb(void)

{
  if (DAT_009b3c68 == 0) {
    FUN_00860a61(0xb);
    if (DAT_009b3c68 == 0) {
      FUN_0086853f();
      DAT_009b3c68 = DAT_009b3c68 + 1;
    }
    FUN_00860ac2(0xb);
  }
  return;
}

// ====== 0x00868529  FUN_00868529 ======
void FUN_00868529(void)

{
  FUN_00860a61(0xb);
  FUN_0086853f();
  FUN_00860ac2(0xb);
  return;
}

// ====== 0x0086853f  FUN_0086853f ======
void FUN_0086853f(void)

{
  char cVar1;
  char cVar2;
  uint *_Str1;
  DWORD DVar3;
  int iVar4;
  size_t sVar5;
  void *this;
  uint *_Source;
  int local_8;
  
  FUN_00860a61(0xc);
  DAT_0097ce98 = 0xffffffff;
  DAT_0097ce88 = 0xffffffff;
  DAT_009b3bb0 = 0;
  _Str1 = (uint *)FUN_0085c8a0("TZ");
  if (_Str1 == (uint *)0x0) {
    FUN_00860ac2(0xc);
    DVar3 = GetTimeZoneInformation((LPTIME_ZONE_INFORMATION)&DAT_009b3bb8);
    if (DVar3 == 0xffffffff) {
      return;
    }
    DAT_0097cdf0 = (void *)(DAT_009b3bb8 * 0x3c);
    DAT_009b3bb0 = 1;
    if (DAT_009b3bfe != 0) {
      DAT_0097cdf0 = (void *)((int)DAT_0097cdf0 + DAT_009b3c0c * 0x3c);
    }
    if ((DAT_009b3c52 == 0) || (DAT_009b3c60 == 0)) {
      DAT_0097cdf4 = 0;
      DAT_0097cdf8 = 0;
    }
    else {
      DAT_0097cdf4 = 1;
      DAT_0097cdf8 = (DAT_009b3c60 - DAT_009b3c0c) * 0x3c;
    }
    iVar4 = WideCharToMultiByte(CodePage_009b3a78,0x220,(LPCWSTR)&lpWideCharStr_009b3bbc,-1,
                                lpMultiByteStr_0097ce7c,0x3f,(LPCSTR)0x0,&local_8);
    if ((iVar4 == 0) || (local_8 != 0)) {
      *lpMultiByteStr_0097ce7c = 0;
    }
    else {
      lpMultiByteStr_0097ce7c[0x3f] = 0;
    }
    iVar4 = WideCharToMultiByte(CodePage_009b3a78,0x220,(LPCWSTR)&lpWideCharStr_009b3c10,-1,
                                lpMultiByteStr_0097ce80,0x3f,(LPCSTR)0x0,&local_8);
    if ((iVar4 != 0) && (local_8 == 0)) {
      lpMultiByteStr_0097ce80[0x3f] = 0;
      return;
    }
LAB_008687b0:
    *lpMultiByteStr_0097ce80 = 0;
  }
  else {
    if (((char)*_Str1 != '\0') &&
       ((DAT_009b3c64 == (uint *)0x0 ||
        (iVar4 = _strcmp((char *)_Str1,(char *)DAT_009b3c64), iVar4 != 0)))) {
      FUN_0085adc4((undefined *)DAT_009b3c64);
      sVar5 = _strlen((char *)_Str1);
      DAT_009b3c64 = (uint *)_malloc(sVar5 + 1);
      if (DAT_009b3c64 != (uint *)0x0) {
        FUN_00863840(DAT_009b3c64,_Str1);
        FUN_00860ac2(0xc);
        _strncpy(lpMultiByteStr_0097ce7c,(char *)_Str1,3);
        _Source = (uint *)((int)_Str1 + 3);
        lpMultiByteStr_0097ce7c[3] = 0;
        cVar2 = *(char *)_Source;
        if (cVar2 == '-') {
          _Source = _Str1 + 1;
        }
        iVar4 = FUN_0085aed8(this,(byte *)_Source);
        DAT_0097cdf0 = (void *)(iVar4 * 0xe10);
        for (; (cVar1 = (char)*_Source, cVar1 == '+' || (('/' < cVar1 && (cVar1 < ':'))));
            _Source = (uint *)((int)_Source + 1)) {
        }
        if ((char)*_Source == ':') {
          _Source = (uint *)((int)_Source + 1);
          iVar4 = FUN_0085aed8(DAT_0097cdf0,(byte *)_Source);
          DAT_0097cdf0 = (void *)((int)DAT_0097cdf0 + iVar4 * 0x3c);
          for (; ('/' < (char)*_Source && ((char)*_Source < ':'));
              _Source = (uint *)((int)_Source + 1)) {
          }
          if ((char)*_Source == ':') {
            _Source = (uint *)((int)_Source + 1);
            iVar4 = FUN_0085aed8(DAT_0097cdf0,(byte *)_Source);
            DAT_0097cdf0 = (void *)((int)DAT_0097cdf0 + iVar4);
            for (; ('/' < (char)*_Source && ((char)*_Source < ':'));
                _Source = (uint *)((int)_Source + 1)) {
            }
          }
        }
        if (cVar2 == '-') {
          DAT_0097cdf0 = (void *)-(int)DAT_0097cdf0;
        }
        DAT_0097cdf4 = (int)(char)*_Source;
        if (DAT_0097cdf4 != 0) {
          _strncpy(lpMultiByteStr_0097ce80,(char *)_Source,3);
          lpMultiByteStr_0097ce80[3] = 0;
          return;
        }
        goto LAB_008687b0;
      }
    }
    FUN_00860ac2(0xc);
  }
  return;
}

// ====== 0x008687c6  FUN_008687c6 ======
bool __cdecl FUN_008687c6(int *param_1)

{
  bool bVar1;
  
  FUN_00860a61(0xb);
  bVar1 = FUN_008687e7(param_1);
  FUN_00860ac2(0xb);
  return bVar1;
}

// ====== 0x008687e7  FUN_008687e7 ======
bool __cdecl FUN_008687e7(int *param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  if (DAT_0097cdf4 != 0) {
    uVar5 = param_1[5];
    if ((uVar5 != DAT_0097ce88) || (uVar5 != DAT_0097ce98)) {
      if (DAT_009b3bb0 == 0) {
        FUN_00868993(1,1,uVar5,4,1,0,0,2,0,0,0);
        FUN_00868993(0,1,param_1[5],10,5,0,0,2,0,0,0);
      }
      else {
        if (DAT_009b3c50 != 0) {
          uVar6 = (uint)DAT_009b3c56;
          uVar3 = 0;
          uVar4 = 0;
        }
        else {
          uVar3 = (uint)DAT_009b3c54;
          uVar6 = 0;
          uVar4 = (uint)DAT_009b3c56;
        }
        FUN_00868993(1,(uint)(DAT_009b3c50 == 0),uVar5,(uint)DAT_009b3c52,uVar4,uVar3,uVar6,
                     (uint)DAT_009b3c58,(uint)DAT_009b3c5a,(uint)DAT_009b3c5c,(uint)DAT_009b3c5e);
        if (DAT_009b3bfc != 0) {
          uVar6 = (uint)DAT_009b3c02;
          uVar3 = 0;
          uVar4 = 0;
          uVar5 = param_1[5];
        }
        else {
          uVar3 = (uint)DAT_009b3c00;
          uVar6 = 0;
          uVar4 = (uint)DAT_009b3c02;
          uVar5 = param_1[5];
        }
        FUN_00868993(0,(uint)(DAT_009b3bfc == 0),uVar5,(uint)DAT_009b3bfe,uVar4,uVar3,uVar6,
                     (uint)DAT_009b3c04,(uint)DAT_009b3c06,(uint)DAT_009b3c08,(uint)DAT_009b3c0a);
      }
    }
    iVar1 = param_1[7];
    if (DAT_0097ce8c < DAT_0097ce9c) {
      if ((DAT_0097ce8c <= iVar1) && (iVar1 <= DAT_0097ce9c)) {
        if ((DAT_0097ce8c < iVar1) && (iVar1 < DAT_0097ce9c)) {
          return true;
        }
LAB_0086895f:
        iVar2 = ((param_1[2] * 0x3c + param_1[1]) * 0x3c + *param_1) * 1000;
        if (iVar1 == DAT_0097ce8c) {
          return DAT_0097ce90 <= iVar2;
        }
        return iVar2 < DAT_0097cea0;
      }
    }
    else {
      if (iVar1 < DAT_0097ce9c) {
        return true;
      }
      if (DAT_0097ce8c < iVar1) {
        return true;
      }
      if ((iVar1 <= DAT_0097ce9c) || (DAT_0097ce8c <= iVar1)) goto LAB_0086895f;
    }
  }
  return false;
}

// ====== 0x00868993  FUN_00868993 ======
void __cdecl
FUN_00868993(int param_1,int param_2,uint param_3,int param_4,int param_5,int param_6,int param_7,
            int param_8,int param_9,int param_10,int param_11)

{
  int iVar1;
  int iVar2;
  
  if (param_2 == 1) {
    if ((param_3 & 3) == 0) {
      iVar1 = *(int *)(&DAT_0097d6e4 + param_4 * 4);
    }
    else {
      iVar1 = *(int *)(&DAT_0097d718 + param_4 * 4);
    }
    iVar2 = (int)(param_3 * 0x16d + -0x63db + iVar1 + 1 + ((int)(param_3 - 1) >> 2)) % 7;
    if (param_6 < iVar2) {
      iVar1 = iVar1 + 1 + (param_5 * 7 - iVar2) + param_6;
    }
    else {
      iVar1 = iVar1 + -6 + (param_5 * 7 - iVar2) + param_6;
    }
    if (param_5 == 5) {
      if ((param_3 & 3) == 0) {
        iVar2 = *(int *)(&DAT_0097d6e8 + param_4 * 4);
      }
      else {
        iVar2 = (&DAT_0097d71c)[param_4];
      }
      if (iVar2 < iVar1) {
        iVar1 = iVar1 + -7;
      }
    }
  }
  else {
    if ((param_3 & 3) == 0) {
      iVar1 = *(int *)(&DAT_0097d6e4 + param_4 * 4);
    }
    else {
      iVar1 = *(int *)(&DAT_0097d718 + param_4 * 4);
    }
    iVar1 = iVar1 + param_7;
  }
  if (param_1 == 1) {
    DAT_0097ce88 = param_3;
    DAT_0097ce90 = ((param_8 * 0x3c + param_9) * 0x3c + param_10) * 1000 + param_11;
    DAT_0097ce8c = iVar1;
  }
  else {
    DAT_0097cea0 = ((param_8 * 0x3c + param_9) * 0x3c + DAT_0097cdf8 + param_10) * 1000 + param_11;
    if (DAT_0097cea0 < 0) {
      DAT_0097cea0 = DAT_0097cea0 + 86400000;
      DAT_0097ce9c = iVar1 + -1;
    }
    else {
      DAT_0097ce9c = iVar1;
      if (86399999 < DAT_0097cea0) {
        DAT_0097cea0 = DAT_0097cea0 + -86400000;
        DAT_0097ce9c = iVar1 + 1;
      }
    }
    DAT_0097ce98 = param_3;
  }
  return;
}

// ====== 0x00868ae0  __aullrem ======
/* Library Function - Single Match
    __aullrem
   
   Library: Visual Studio */

undefined8 __aullrem(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  
  uVar3 = param_1;
  uVar4 = param_4;
  uVar9 = param_2;
  uVar10 = param_3;
  if (param_4 == 0) {
    iVar6 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) %
                 (ulonglong)param_3);
    iVar7 = 0;
  }
  else {
    do {
      uVar5 = uVar4 >> 1;
      uVar10 = uVar10 >> 1 | (uint)((uVar4 & 1) != 0) << 0x1f;
      uVar8 = uVar9 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar9 & 1) != 0) << 0x1f;
      uVar4 = uVar5;
      uVar9 = uVar8;
    } while (uVar5 != 0);
    uVar1 = CONCAT44(uVar8,uVar3) / (ulonglong)uVar10;
    uVar3 = (int)uVar1 * param_4;
    lVar2 = (uVar1 & 0xffffffff) * (ulonglong)param_3;
    uVar9 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar4 = (uint)lVar2;
    uVar10 = uVar9 + uVar3;
    if (((CARRY4(uVar9,uVar3)) || (param_2 < uVar10)) || ((param_2 <= uVar10 && (param_1 < uVar4))))
    {
      bVar11 = uVar4 < param_3;
      uVar4 = uVar4 - param_3;
      uVar10 = (uVar10 - param_4) - (uint)bVar11;
    }
    iVar6 = -(uVar4 - param_1);
    iVar7 = -(uint)(uVar4 - param_1 != 0) - ((uVar10 - param_2) - (uint)(uVar4 < param_1));
  }
  return CONCAT44(iVar7,iVar6);
}

// ====== 0x00868b55  FUN_00868b55 ======
DWORD __cdecl FUN_00868b55(uint param_1)

{
  HANDLE hFile;
  BOOL BVar1;
  DWORD DVar2;
  DWORD *pDVar3;
  int iVar4;
  
  if (uNumber_009b4100 <= param_1) {
LAB_00868bd6:
    pDVar3 = FUN_0085cbd7();
    *pDVar3 = 9;
    return 0xffffffff;
  }
  iVar4 = (param_1 & 0x1f) * 0x24;
  if ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + iVar4) & 1) == 0) goto LAB_00868bd6;
  FUN_008680cf(param_1);
  if ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + iVar4) & 1) != 0) {
    hFile = (HANDLE)FUN_00867fe6(param_1);
    BVar1 = FlushFileBuffers(hFile);
    if (BVar1 == 0) {
      DVar2 = GetLastError();
    }
    else {
      DVar2 = 0;
    }
    if (DVar2 == 0) goto LAB_00868bcb;
    pDVar3 = FUN_0085cbe0();
    *pDVar3 = DVar2;
  }
  pDVar3 = FUN_0085cbd7();
  *pDVar3 = 9;
  DVar2 = 0xffffffff;
LAB_00868bcb:
  FUN_0086812e(param_1);
  return DVar2;
}

// ====== 0x00868be8  FUN_00868be8 ======
uint __cdecl FUN_00868be8(WCHAR param_1,ushort param_2)

{
  BOOL BVar1;
  uint local_8;
  
  if (param_1 == L'\xffff') {
    return 0;
  }
  if ((ushort)param_1 < 0x100) {
    local_8 = (uint)*(ushort *)(PTR_DAT_0097a138 + (uint)(ushort)param_1 * 2);
  }
  else {
    BVar1 = FUN_0086d1b2(1,&param_1,1,(LPWORD)&local_8,0,0);
    if (BVar1 == 0) {
      return 0;
    }
  }
  return local_8 & 0xffff & (uint)param_2;
}

// ====== 0x00868c4a  __mbsnbicoll ======
/* Library Function - Single Match
    __mbsnbicoll
   
   Library: Visual Studio 2003 Release */

int __cdecl __mbsnbicoll(uchar *_Str1,uchar *_Str2,size_t _MaxCount)

{
  int iVar1;
  
  if (_MaxCount == 0) {
    return 0;
  }
  iVar1 = FUN_0086a851(DAT_009b4324,1,_Str1,_MaxCount,_Str2,_MaxCount,CodePage_009b4104);
  if (iVar1 == 0) {
    return 0x7fffffff;
  }
  return iVar1 + -2;
}

// ====== 0x00868c89  FUN_00868c89 ======
undefined4 FUN_00868c89(void)

{
  LPCWSTR lpWideCharStr;
  size_t _Size;
  uint *lpMultiByteStr;
  int iVar1;
  undefined4 *puVar2;
  
  lpWideCharStr = (LPCWSTR)*DAT_009b391c;
  puVar2 = DAT_009b391c;
  while( true ) {
    if (lpWideCharStr == (LPCWSTR)0x0) {
      return 0;
    }
    _Size = WideCharToMultiByte(1,0,lpWideCharStr,-1,(LPSTR)0x0,0,(LPCSTR)0x0,(LPBOOL)0x0);
    if (((_Size == 0) || (lpMultiByteStr = (uint *)_malloc(_Size), lpMultiByteStr == (uint *)0x0))
       || (iVar1 = WideCharToMultiByte(1,0,(LPCWSTR)*puVar2,-1,(LPSTR)lpMultiByteStr,_Size,
                                       (LPCSTR)0x0,(LPBOOL)0x0), iVar1 == 0)) break;
    FUN_0086d377(lpMultiByteStr,0);
    lpWideCharStr = (LPCWSTR)puVar2[1];
    puVar2 = puVar2 + 1;
  }
  return 0xffffffff;
}

// ====== 0x00868cf7  FUN_00868cf7 ======
BOOL __cdecl
FUN_00868cf7(DWORD param_1,LPCSTR param_2,int param_3,LPWORD param_4,UINT param_5,LCID param_6,
            int param_7)

{
  undefined1 *puVar1;
  BOOL BVar2;
  int iVar3;
  WORD local_20 [2];
  undefined1 *local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089ba48;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  local_1c = &stack0xffffffc8;
  iVar3 = DAT_009b3c6c;
  ExceptionList = &local_14;
  puVar1 = &stack0xffffffc8;
  if (DAT_009b3c6c == 0) {
    ExceptionList = &local_14;
    BVar2 = GetStringTypeW(1,(LPCWSTR)&lpSrcStr_0089b9cc,1,local_20);
    iVar3 = 1;
    puVar1 = local_1c;
    if (BVar2 == 0) {
      BVar2 = GetStringTypeA(0,1,(LPCSTR)&lpSrcStr_0089b9c8,1,local_20);
      if (BVar2 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      iVar3 = 2;
      puVar1 = local_1c;
    }
  }
  local_1c = puVar1;
  DAT_009b3c6c = iVar3;
  if (DAT_009b3c6c != 2) {
    if (DAT_009b3c6c == 1) {
      if (param_5 == 0) {
        param_5 = CodePage_009b3a78;
      }
      iVar3 = MultiByteToWideChar(param_5,(-(uint)(param_7 != 0) & 8) + 1,param_2,param_3,
                                  (LPWSTR)0x0,0);
      if (iVar3 != 0) {
        local_8 = 0;
        FUN_0085f3a0();
        local_1c = &stack0xffffffc8;
        _memset(&stack0xffffffc8,0,iVar3 * 2);
        local_8 = 0xffffffff;
        if ((&stack0x00000000 != (undefined1 *)0x38) &&
           (iVar3 = MultiByteToWideChar(param_5,1,param_2,param_3,(LPWSTR)&stack0xffffffc8,iVar3),
           iVar3 != 0)) {
          BVar2 = GetStringTypeW(param_1,(LPCWSTR)&stack0xffffffc8,iVar3,param_4);
          ExceptionList = local_14;
          return BVar2;
        }
      }
    }
    ExceptionList = local_14;
    return 0;
  }
  if (param_6 == 0) {
    param_6 = DAT_009b3a68;
  }
  BVar2 = GetStringTypeA(param_6,param_1,param_2,param_3,param_4);
  ExceptionList = local_14;
  return BVar2;
}

// ====== 0x00868e40  __copysign ======
/* Library Function - Single Match
    __copysign
   
   Libraries: Visual Studio 2003 Release, Visual Studio 2019 Release */

double __cdecl __copysign(double _Number,double _Sign)

{
  return (double)CONCAT44((_Sign._4_4_ ^ _Number._4_4_) & 0x7fffffff ^ _Sign._4_4_,_Number._0_4_);
}

// ====== 0x00868e61  FUN_00868e61 ======
float10 __cdecl FUN_00868e61(undefined4 param_1,uint param_2)

{
  return (float10)(double)(CONCAT44(~param_2,param_1) ^ 0x7fffffff00000000);
}

// ====== 0x00868e9c  FUN_00868e9c ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __cdecl FUN_00868e9c(uint param_1,undefined4 param_2)

{
  double dVar1;
  uint uVar2;
  int iVar3;
  float10 fVar4;
  uint uVar5;
  int local_8;
  
  uVar2 = FUN_0086528a();
  dVar1 = (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
  if ((param_2._2_2_ & 0x7ff0) == 0x7ff0) {
    iVar3 = FUN_00865152(param_1,(uint)((ulonglong)dVar1 >> 0x20));
    if (0 < iVar3) {
      if (iVar3 < 3) {
        FUN_0086528a();
        return (float10)(double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
      }
      if (iVar3 == 3) {
        fVar4 = FUN_008648f6(0x25,(double)CONCAT44((int)(CONCAT26(param_2._2_2_,
                                                                  CONCAT24((undefined2)param_2,
                                                                           param_1)) >> 0x20),
                                                   param_1));
        return fVar4;
      }
    }
    dVar1 = (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) + _DAT_0088b9c0;
    uVar5 = 8;
  }
  else {
    if (dVar1 != _DAT_0088bb30) {
      FUN_008651ac(param_1,(uint)(CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) >>
                                 0x20),&local_8);
      FUN_0086528a();
      return (float10)(local_8 + -1);
    }
    dVar1 = -_DAT_0097acd0;
    uVar5 = 4;
  }
  fVar4 = FUN_008649aa(uVar5,0x25,CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)),
                       dVar1,uVar2);
  return fVar4;
}

// ====== 0x00868f83  FUN_00868f83 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __cdecl FUN_00868f83(int param_1,uint param_2,int param_3,uint param_4)

{
  int iVar1;
  int iVar2;
  float10 fVar3;
  uint uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  double dVar7;
  undefined8 local_20;
  short local_c [2];
  uint local_8;
  
  local_8 = FUN_0086528a();
  if (((param_2._2_2_ & 0x7ff0) == 0x7ff0) || ((param_4._2_2_ & 0x7ff0) == 0x7ff0)) {
    if ((((param_2._2_2_ & 0x7ff8) == 0x7ff0) && (((param_2 & 0x7ffff) != 0 || (param_1 != 0)))) ||
       (((param_4._2_2_ & 0x7ff8) == 0x7ff0 && (((param_4 & 0x7ffff) != 0 || (param_3 != 0)))))) {
      dVar7 = (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) +
              (double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3));
      uVar6 = CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3));
      uVar5 = CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
      uVar4 = 8;
      goto LAB_008691dc;
    }
    if (((param_2._2_2_ & 0x7ff8) == 0x7ff8) || ((param_4._2_2_ & 0x7ff8) == 0x7ff8)) {
      fVar3 = FUN_0086494a(0x26,(double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)
                                                ),
                           (double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)));
      return fVar3;
    }
  }
  if ((double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)) ==
      (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1))) {
    FUN_0086528a();
    return (float10)(double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
  }
  if ((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) == _DAT_0088bb30) {
    if ((double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)) <=
        (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1))) {
      local_20 = -4.94065645841247e-324;
    }
    else {
      local_20 = 4.94065645841247e-324;
    }
  }
  if (((_DAT_0088bb30 < (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1))) &&
      ((double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)) <
       (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)))) ||
     (((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) < _DAT_0088bb30 &&
      ((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) <
       (double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)))))) {
    iVar2 = param_1 + -1;
    local_20 = (double)CONCAT44(param_2,iVar2);
    if (param_1 == 0) {
      iVar1 = param_2 - 1;
LAB_00869101:
      local_20 = (double)CONCAT44(iVar1,(int)local_20);
    }
  }
  else if (((_DAT_0088bb30 < (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)))
           && ((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) <
               (double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)))) ||
          (((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) < _DAT_0088bb30 &&
           ((double)CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3)) <
            (double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)))))) {
    iVar2 = param_1 + 1;
    local_20 = (double)CONCAT44(param_2,iVar2);
    if (iVar2 == 0) {
      iVar1 = param_2 + 1;
      goto LAB_00869101;
    }
  }
  else {
    iVar2 = (int)local_20;
  }
  if ((((ulonglong)local_20 & 0x7ff0000000000000) == 0) &&
     ((((ulonglong)local_20 & 0xfffff00000000) != 0 || (iVar2 != 0)))) {
    fVar3 = FUN_008651ac(SUB84(local_20,0),local_20._4_4_,(int *)local_c);
    fVar3 = FUN_008650c5((double)fVar3,local_c[0] + 0x600);
    dVar7 = (double)fVar3;
    uVar6 = CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3));
    uVar5 = CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
    uVar4 = 0x12;
  }
  else {
    if (((local_20._4_4_ != 0x7ff00000) || (iVar2 != 0)) &&
       ((local_20._4_4_ != 0xfff00000 || (iVar2 != 0)))) {
      FUN_0086528a();
      return (float10)local_20;
    }
    fVar3 = FUN_008651ac(SUB84(local_20,0),local_20._4_4_,(int *)local_c);
    fVar3 = FUN_008650c5((double)fVar3,local_c[0] + -0x600);
    dVar7 = (double)fVar3;
    uVar6 = CONCAT26(param_4._2_2_,CONCAT24((undefined2)param_4,param_3));
    uVar5 = CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1));
    uVar4 = 0x11;
  }
LAB_008691dc:
  fVar3 = FUN_00864a42(uVar4,0x26,uVar5,uVar6,dVar7,local_8);
  return fVar3;
}

// ====== 0x0086925a  FUN_0086925a ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int __cdecl FUN_0086925a(int param_1,uint param_2)

{
  int iVar1;
  
  if ((param_2._2_2_ & 0x7ff0) == 0x7ff0) {
    iVar1 = FUN_00865152(param_1,(uint)(CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)
                                                ) >> 0x20));
    if (iVar1 != 1) {
      if (iVar1 == 2) {
        iVar1 = 4;
      }
      else if (iVar1 == 3) {
        iVar1 = 2;
      }
      else {
        iVar1 = 1;
      }
      return iVar1;
    }
    return 0x200;
  }
  if (((param_2 & 0x7ff00000) == 0) && (((param_2 & 0xfffff) != 0 || (param_1 != 0)))) {
    return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffff90) + 0x80;
  }
  if ((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) == _DAT_0088bb30) {
    return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffffe0) + 0x40;
  }
  return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffff08) + 0x100;
}

// ====== 0x0086937d  FUN_0086937d ======
uint __cdecl FUN_0086937d(char *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  uint uVar26;
  uint uVar27;
  uint uVar28;
  uint uVar29;
  uint uVar30;
  uint uVar31;
  uint uVar32;
  uint uVar33;
  uint uVar34;
  uint uVar35;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  uint uVar39;
  uint uVar40;
  uint uVar41;
  uint uVar42;
  uint uVar43;
  
  uVar1 = (uint)DAT_009b3caa;
  uVar43 = (uint)DAT_009b3cac;
  if (param_1 == (char *)0x0) {
    uVar43 = 0xffffffff;
  }
  else {
    uVar2 = FUN_0086d5bd(1,uVar1,0x31,param_1 + 4);
    uVar3 = FUN_0086d5bd(1,uVar1,0x32,param_1 + 8);
    uVar4 = FUN_0086d5bd(1,uVar1,0x33,param_1 + 0xc);
    uVar5 = FUN_0086d5bd(1,uVar1,0x34,param_1 + 0x10);
    uVar6 = FUN_0086d5bd(1,uVar1,0x35,param_1 + 0x14);
    uVar7 = FUN_0086d5bd(1,uVar1,0x36,param_1 + 0x18);
    uVar8 = FUN_0086d5bd(1,uVar1,0x37,param_1);
    uVar9 = FUN_0086d5bd(1,uVar1,0x2a,param_1 + 0x20);
    uVar10 = FUN_0086d5bd(1,uVar1,0x2b,param_1 + 0x24);
    uVar11 = FUN_0086d5bd(1,uVar1,0x2c,param_1 + 0x28);
    uVar12 = FUN_0086d5bd(1,uVar1,0x2d,param_1 + 0x2c);
    uVar13 = FUN_0086d5bd(1,uVar1,0x2e,param_1 + 0x30);
    uVar14 = FUN_0086d5bd(1,uVar1,0x2f,param_1 + 0x34);
    uVar15 = FUN_0086d5bd(1,uVar1,0x30,param_1 + 0x1c);
    uVar16 = FUN_0086d5bd(1,uVar1,0x44,param_1 + 0x38);
    uVar17 = FUN_0086d5bd(1,uVar1,0x45,param_1 + 0x3c);
    uVar18 = FUN_0086d5bd(1,uVar1,0x46,param_1 + 0x40);
    uVar19 = FUN_0086d5bd(1,uVar1,0x47,param_1 + 0x44);
    uVar20 = FUN_0086d5bd(1,uVar1,0x48,param_1 + 0x48);
    uVar21 = FUN_0086d5bd(1,uVar1,0x49,param_1 + 0x4c);
    uVar22 = FUN_0086d5bd(1,uVar1,0x4a,param_1 + 0x50);
    uVar23 = FUN_0086d5bd(1,uVar1,0x4b,param_1 + 0x54);
    uVar24 = FUN_0086d5bd(1,uVar1,0x4c,param_1 + 0x58);
    uVar25 = FUN_0086d5bd(1,uVar1,0x4d,param_1 + 0x5c);
    uVar26 = FUN_0086d5bd(1,uVar1,0x4e,param_1 + 0x60);
    uVar27 = FUN_0086d5bd(1,uVar1,0x4f,param_1 + 100);
    uVar28 = FUN_0086d5bd(1,uVar1,0x38,param_1 + 0x68);
    uVar29 = FUN_0086d5bd(1,uVar1,0x39,param_1 + 0x6c);
    uVar30 = FUN_0086d5bd(1,uVar1,0x3a,param_1 + 0x70);
    uVar31 = FUN_0086d5bd(1,uVar1,0x3b,param_1 + 0x74);
    uVar32 = FUN_0086d5bd(1,uVar1,0x3c,param_1 + 0x78);
    uVar33 = FUN_0086d5bd(1,uVar1,0x3d,param_1 + 0x7c);
    uVar34 = FUN_0086d5bd(1,uVar1,0x3e,param_1 + 0x80);
    uVar35 = FUN_0086d5bd(1,uVar1,0x3f,param_1 + 0x84);
    uVar36 = FUN_0086d5bd(1,uVar1,0x40,param_1 + 0x88);
    uVar37 = FUN_0086d5bd(1,uVar1,0x41,param_1 + 0x8c);
    uVar38 = FUN_0086d5bd(1,uVar1,0x42,param_1 + 0x90);
    uVar39 = FUN_0086d5bd(1,uVar1,0x43,param_1 + 0x94);
    uVar40 = FUN_0086d5bd(1,uVar1,0x28,param_1 + 0x98);
    uVar1 = FUN_0086d5bd(1,uVar1,0x29,param_1 + 0x9c);
    uVar41 = FUN_0086d5bd(1,uVar43,0x1f,param_1 + 0xa0);
    uVar42 = FUN_0086d5bd(1,uVar43,0x20,param_1 + 0xa4);
    uVar43 = FUN_0086d5bd(1,uVar43,0x1003,param_1 + 0xa8);
    uVar43 = uVar43 | uVar2 | uVar3 | uVar4 | uVar5 | uVar6 | uVar7 | uVar8 | uVar9 | uVar10 |
                      uVar11 | uVar12 | uVar13 | uVar14 | uVar15 | uVar16 | uVar17 | uVar18 | uVar19
                      | uVar20 | uVar21 | uVar22 | uVar23 | uVar24 | uVar25 | uVar26 | uVar27 |
                      uVar28 | uVar29 | uVar30 | uVar31 | uVar32 | uVar33 | uVar34 | uVar35 | uVar36
                      | uVar37 | uVar38 | uVar39 | uVar40 | uVar1 | uVar41 | uVar42;
  }
  return uVar43;
}

// ====== 0x008696cb  FUN_008696cb ======
void __cdecl FUN_008696cb(undefined4 *param_1)

{
  if (param_1 != (undefined4 *)0x0) {
    FUN_0085adc4((undefined *)param_1[1]);
    FUN_0085adc4((undefined *)param_1[2]);
    FUN_0085adc4((undefined *)param_1[3]);
    FUN_0085adc4((undefined *)param_1[4]);
    FUN_0085adc4((undefined *)param_1[5]);
    FUN_0085adc4((undefined *)param_1[6]);
    FUN_0085adc4((undefined *)*param_1);
    FUN_0085adc4((undefined *)param_1[8]);
    FUN_0085adc4((undefined *)param_1[9]);
    FUN_0085adc4((undefined *)param_1[10]);
    FUN_0085adc4((undefined *)param_1[0xb]);
    FUN_0085adc4((undefined *)param_1[0xc]);
    FUN_0085adc4((undefined *)param_1[0xd]);
    FUN_0085adc4((undefined *)param_1[7]);
    FUN_0085adc4((undefined *)param_1[0xe]);
    FUN_0085adc4((undefined *)param_1[0xf]);
    FUN_0085adc4((undefined *)param_1[0x10]);
    FUN_0085adc4((undefined *)param_1[0x11]);
    FUN_0085adc4((undefined *)param_1[0x12]);
    FUN_0085adc4((undefined *)param_1[0x13]);
    FUN_0085adc4((undefined *)param_1[0x14]);
    FUN_0085adc4((undefined *)param_1[0x15]);
    FUN_0085adc4((undefined *)param_1[0x16]);
    FUN_0085adc4((undefined *)param_1[0x17]);
    FUN_0085adc4((undefined *)param_1[0x18]);
    FUN_0085adc4((undefined *)param_1[0x19]);
    FUN_0085adc4((undefined *)param_1[0x1a]);
    FUN_0085adc4((undefined *)param_1[0x1b]);
    FUN_0085adc4((undefined *)param_1[0x1c]);
    FUN_0085adc4((undefined *)param_1[0x1d]);
    FUN_0085adc4((undefined *)param_1[0x1e]);
    FUN_0085adc4((undefined *)param_1[0x1f]);
    FUN_0085adc4((undefined *)param_1[0x20]);
    FUN_0085adc4((undefined *)param_1[0x21]);
    FUN_0085adc4((undefined *)param_1[0x22]);
    FUN_0085adc4((undefined *)param_1[0x23]);
    FUN_0085adc4((undefined *)param_1[0x24]);
    FUN_0085adc4((undefined *)param_1[0x25]);
    FUN_0085adc4((undefined *)param_1[0x26]);
    FUN_0085adc4((undefined *)param_1[0x27]);
    FUN_0085adc4((undefined *)param_1[0x28]);
    FUN_0085adc4((undefined *)param_1[0x29]);
    FUN_0085adc4((undefined *)param_1[0x2a]);
  }
  return;
}

// ====== 0x00869a30  FUN_00869a30 ======
void __cdecl FUN_00869a30(char *param_1)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  
  cVar2 = *param_1;
  do {
    if (cVar2 == '\0') {
      return;
    }
    if ((cVar2 < '0') || ('9' < cVar2)) {
      pcVar3 = param_1;
      if (cVar2 != ';') goto LAB_00869a47;
      do {
        pcVar1 = pcVar3 + 1;
        *pcVar3 = pcVar3[1];
        pcVar3 = pcVar1;
      } while (*pcVar1 != '\0');
    }
    else {
      *param_1 = cVar2 + -0x30;
LAB_00869a47:
      param_1 = param_1 + 1;
    }
    cVar2 = *param_1;
  } while( true );
}

// ====== 0x00869b32  FUN_00869b32 ======
uint __cdecl FUN_00869b32(int param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  
  uVar15 = (uint)DAT_009b3ca0;
  if (param_1 == 0) {
    uVar15 = 0xffffffff;
  }
  else {
    uVar1 = FUN_0086d5bd(1,uVar15,0x15,(char *)(param_1 + 0xc));
    uVar2 = FUN_0086d5bd(1,uVar15,0x14,(char *)(param_1 + 0x10));
    uVar3 = FUN_0086d5bd(1,uVar15,0x16,(char *)(param_1 + 0x14));
    uVar4 = FUN_0086d5bd(1,uVar15,0x17,(char *)(param_1 + 0x18));
    uVar5 = FUN_0086d5bd(1,uVar15,0x18,(char *)(param_1 + 0x1c));
    FUN_00869c54(*(char **)(param_1 + 0x1c));
    uVar6 = FUN_0086d5bd(1,uVar15,0x50,(char *)(param_1 + 0x20));
    uVar7 = FUN_0086d5bd(1,uVar15,0x51,(char *)(param_1 + 0x24));
    uVar8 = FUN_0086d5bd(0,uVar15,0x1a,(char *)(param_1 + 0x28));
    uVar9 = FUN_0086d5bd(0,uVar15,0x19,(char *)(param_1 + 0x29));
    uVar10 = FUN_0086d5bd(0,uVar15,0x54,(char *)(param_1 + 0x2a));
    uVar11 = FUN_0086d5bd(0,uVar15,0x55,(char *)(param_1 + 0x2b));
    uVar12 = FUN_0086d5bd(0,uVar15,0x56,(char *)(param_1 + 0x2c));
    uVar13 = FUN_0086d5bd(0,uVar15,0x57,(char *)(param_1 + 0x2d));
    uVar14 = FUN_0086d5bd(0,uVar15,0x52,(char *)(param_1 + 0x2e));
    uVar15 = FUN_0086d5bd(0,uVar15,0x53,(char *)(param_1 + 0x2f));
    uVar15 = uVar15 | uVar1 | uVar2 | uVar3 | uVar4 | uVar5 | uVar6 | uVar7 | uVar8 | uVar9 | uVar10
                      | uVar11 | uVar12 | uVar13 | uVar14;
  }
  return uVar15;
}

// ====== 0x00869c54  FUN_00869c54 ======
void __cdecl FUN_00869c54(char *param_1)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  
  cVar2 = *param_1;
  do {
    if (cVar2 == '\0') {
      return;
    }
    if ((cVar2 < '0') || ('9' < cVar2)) {
      pcVar3 = param_1;
      if (cVar2 != ';') goto LAB_00869c6b;
      do {
        pcVar1 = pcVar3 + 1;
        *pcVar3 = pcVar3[1];
        pcVar3 = pcVar1;
      } while (*pcVar1 != '\0');
    }
    else {
      *param_1 = cVar2 + -0x30;
LAB_00869c6b:
      param_1 = param_1 + 1;
    }
    cVar2 = *param_1;
  } while( true );
}

// ====== 0x00869c8b  FUN_00869c8b ======
void __cdecl FUN_00869c8b(int param_1)

{
  if ((param_1 != 0) && (*(undefined **)(param_1 + 0xc) != &DAT_009b3998)) {
    FUN_0085adc4(*(undefined **)(param_1 + 0xc));
    FUN_0085adc4(*(undefined **)(param_1 + 0x10));
    FUN_0085adc4(*(undefined **)(param_1 + 0x14));
    FUN_0085adc4(*(undefined **)(param_1 + 0x18));
    FUN_0085adc4(*(undefined **)(param_1 + 0x1c));
    FUN_0085adc4(*(undefined **)(param_1 + 0x20));
    FUN_0085adc4(*(undefined **)(param_1 + 0x24));
  }
  return;
}

// ====== 0x00869cd9  FUN_00869cd9 ======
undefined4 FUN_00869cd9(void)

{
  BYTE *pBVar1;
  LPWORD pWVar2;
  byte bVar3;
  int iVar4;
  undefined2 *puVar5;
  BOOL BVar6;
  BYTE *pBVar7;
  uint uVar8;
  LPCWSTR pWVar9;
  undefined4 uVar10;
  _cpinfo local_28;
  undefined2 *local_14;
  undefined2 *local_10;
  LPCWSTR local_c;
  LPCSTR local_8;
  
  uVar10 = 0;
  local_8 = (LPCSTR)0x0;
  local_c = (LPCWSTR)0x0;
  if (DAT_009b3a68 == 0) {
    PTR_DAT_0097a134 = &DAT_0097a13e;
    PTR_DAT_0097a138 = &DAT_0097a13e;
    FUN_0085adc4((undefined *)DAT_009b3c84);
    FUN_0085adc4((undefined *)DAT_009b3c88);
    DAT_009b3c84 = (undefined2 *)0x0;
    DAT_009b3c88 = (undefined2 *)0x0;
    return 0;
  }
  if ((CodePage_009b3a78 != 0) ||
     (iVar4 = FUN_0086d5bd(0,(uint)DAT_009b3c98,0x1004,(char *)&CodePage_009b3a78), iVar4 == 0)) {
    puVar5 = (undefined2 *)_malloc(0x202);
    local_14 = puVar5;
    local_10 = (undefined2 *)_malloc(0x202);
    local_8 = (LPCSTR)_malloc(0x101);
    local_c = (LPCWSTR)_malloc(0x202);
    if ((puVar5 != (undefined2 *)0x0) &&
       (((local_10 != (undefined2 *)0x0 && (local_8 != (LPCSTR)0x0)) && (local_c != (LPCWSTR)0x0))))
    {
      iVar4 = 0;
      do {
        local_8[iVar4] = (CHAR)iVar4;
        iVar4 = iVar4 + 1;
      } while (iVar4 < 0x100);
      BVar6 = GetCPInfo(CodePage_009b3a78,&local_28);
      if ((BVar6 != 0) && (local_28.MaxCharSize < 3)) {
        cbMultiByte_0097a340 = local_28.MaxCharSize & 0xffff;
        if ((1 < (uint)cbMultiByte_0097a340) && (local_28.LeadByte[0] != '\0')) {
          pBVar7 = local_28.LeadByte + 1;
          do {
            bVar3 = *pBVar7;
            if (bVar3 == 0) break;
            for (uVar8 = (uint)pBVar7[-1]; (int)uVar8 <= (int)(uint)bVar3; uVar8 = uVar8 + 1) {
              local_8[uVar8] = '\0';
              bVar3 = *pBVar7;
            }
            pBVar1 = pBVar7 + 1;
            pBVar7 = pBVar7 + 2;
          } while (*pBVar1 != 0);
        }
        BVar6 = FUN_00868cf7(1,local_8,0x100,puVar5 + 1,0,0,0);
        if (BVar6 != 0) {
          *puVar5 = 0;
          iVar4 = 0;
          pWVar9 = local_c;
          do {
            *pWVar9 = (WCHAR)iVar4;
            pWVar9 = pWVar9 + 1;
            iVar4 = iVar4 + 1;
          } while (iVar4 < 0x100);
          pWVar2 = local_10 + 1;
          BVar6 = FUN_0086d1b2(1,local_c,0x100,pWVar2,0,0);
          if (BVar6 != 0) {
            *local_10 = 0;
            if ((1 < cbMultiByte_0097a340) && (local_28.LeadByte[0] != '\0')) {
              pBVar7 = local_28.LeadByte + 1;
              do {
                if (*pBVar7 == 0) break;
                uVar8 = (uint)pBVar7[-1];
                if (uVar8 <= *pBVar7) {
                  puVar5 = local_14 + uVar8 + 1;
                  do {
                    *puVar5 = 0x8000;
                    uVar8 = uVar8 + 1;
                    puVar5 = puVar5 + 1;
                  } while ((int)uVar8 <= (int)(uint)*pBVar7);
                }
                pBVar1 = pBVar7 + 1;
                pBVar7 = pBVar7 + 2;
              } while (*pBVar1 != 0);
            }
            PTR_DAT_0097a134 = (undefined *)(local_14 + 1);
            PTR_DAT_0097a138 = (undefined *)pWVar2;
            if (DAT_009b3c84 != (undefined2 *)0x0) {
              FUN_0085adc4((undefined *)DAT_009b3c84);
            }
            DAT_009b3c84 = local_14;
            if (DAT_009b3c88 != (undefined2 *)0x0) {
              FUN_0085adc4((undefined *)DAT_009b3c88);
            }
            DAT_009b3c88 = local_10;
            goto LAB_00869eb7;
          }
        }
      }
    }
  }
  FUN_0085adc4((undefined *)local_14);
  FUN_0085adc4((undefined *)local_10);
  uVar10 = 1;
LAB_00869eb7:
  FUN_0085adc4(local_8);
  FUN_0085adc4((undefined *)local_c);
  return uVar10;
}

// ====== 0x00869f30  FUN_00869f30 ======
int __cdecl FUN_00869f30(byte *param_1,byte *param_2)

{
  byte bVar1;
  int iVar2;
  byte abStack_28 [32];
  
  abStack_28[0x1c] = 0;
  abStack_28[0x1d] = 0;
  abStack_28[0x1e] = 0;
  abStack_28[0x1f] = 0;
  abStack_28[0x18] = 0;
  abStack_28[0x19] = 0;
  abStack_28[0x1a] = 0;
  abStack_28[0x1b] = 0;
  abStack_28[0x14] = 0;
  abStack_28[0x15] = 0;
  abStack_28[0x16] = 0;
  abStack_28[0x17] = 0;
  abStack_28[0x10] = 0;
  abStack_28[0x11] = 0;
  abStack_28[0x12] = 0;
  abStack_28[0x13] = 0;
  abStack_28[0xc] = 0;
  abStack_28[0xd] = 0;
  abStack_28[0xe] = 0;
  abStack_28[0xf] = 0;
  abStack_28[8] = 0;
  abStack_28[9] = 0;
  abStack_28[10] = 0;
  abStack_28[0xb] = 0;
  abStack_28[4] = 0;
  abStack_28[5] = 0;
  abStack_28[6] = 0;
  abStack_28[7] = 0;
  abStack_28[0] = 0;
  abStack_28[1] = 0;
  abStack_28[2] = 0;
  abStack_28[3] = 0;
  while( true ) {
    bVar1 = *param_2;
    if (bVar1 == 0) break;
    param_2 = param_2 + 1;
    abStack_28[(int)(uint)bVar1 >> 3] = abStack_28[(int)(uint)bVar1 >> 3] | '\x01' << (bVar1 & 7);
  }
  iVar2 = -1;
  do {
    iVar2 = iVar2 + 1;
    bVar1 = *param_1;
    if (bVar1 == 0) {
      return iVar2;
    }
    param_1 = param_1 + 1;
  } while ((abStack_28[(int)(uint)bVar1 >> 3] >> (bVar1 & 7) & 1) == 0);
  return iVar2;
}

// ====== 0x00869f70  FUN_00869f70 ======
byte * __cdecl FUN_00869f70(byte *param_1,byte *param_2)

{
  byte bVar1;
  byte *pbVar2;
  byte abStack_28 [32];
  
  abStack_28[0x1c] = 0;
  abStack_28[0x1d] = 0;
  abStack_28[0x1e] = 0;
  abStack_28[0x1f] = 0;
  abStack_28[0x18] = 0;
  abStack_28[0x19] = 0;
  abStack_28[0x1a] = 0;
  abStack_28[0x1b] = 0;
  abStack_28[0x14] = 0;
  abStack_28[0x15] = 0;
  abStack_28[0x16] = 0;
  abStack_28[0x17] = 0;
  abStack_28[0x10] = 0;
  abStack_28[0x11] = 0;
  abStack_28[0x12] = 0;
  abStack_28[0x13] = 0;
  abStack_28[0xc] = 0;
  abStack_28[0xd] = 0;
  abStack_28[0xe] = 0;
  abStack_28[0xf] = 0;
  abStack_28[8] = 0;
  abStack_28[9] = 0;
  abStack_28[10] = 0;
  abStack_28[0xb] = 0;
  abStack_28[4] = 0;
  abStack_28[5] = 0;
  abStack_28[6] = 0;
  abStack_28[7] = 0;
  abStack_28[0] = 0;
  abStack_28[1] = 0;
  abStack_28[2] = 0;
  abStack_28[3] = 0;
  while( true ) {
    bVar1 = *param_2;
    if (bVar1 == 0) break;
    param_2 = param_2 + 1;
    abStack_28[(int)(uint)bVar1 >> 3] = abStack_28[(int)(uint)bVar1 >> 3] | '\x01' << (bVar1 & 7);
  }
  do {
    pbVar2 = param_1;
    bVar1 = *pbVar2;
    if (bVar1 == 0) {
      return (byte *)(uint)bVar1;
    }
    param_1 = pbVar2 + 1;
  } while ((abStack_28[(int)(uint)bVar1 >> 3] >> (bVar1 & 7) & 1) == 0);
  return pbVar2;
}

// ====== 0x00869faa  FUN_00869faa ======
undefined4 __thiscall FUN_00869faa(void *this,char *param_1,undefined2 *param_2,int param_3)

{
  int iVar1;
  uint uVar2;
  BOOL BVar3;
  void *extraout_ECX;
  void *extraout_ECX_00;
  
  if (DAT_009b3cd0 == (code *)0x0) {
    iVar1 = FUN_0086a6db();
    this = extraout_ECX;
    if (iVar1 == 0) {
      DAT_009b3cd0 = FUN_0086a711;
    }
    else {
      DAT_009b3cd0 = GetLocaleInfoA_exref;
    }
  }
  if (param_1 != (char *)0x0) {
    DAT_009b3cc0 = param_1;
    if (*param_1 != '\0') {
      FUN_0086a127(this,0x97d4e0,0x40,(byte *)&DAT_009b3cc0);
      this = extraout_ECX_00;
    }
    DAT_009b3cc4 = param_1 + 0x40;
    if ((DAT_009b3cc4 != (char *)0x0) && (*DAT_009b3cc4 != '\0')) {
      FUN_0086a127(this,0x97d428,0x16,(byte *)&DAT_009b3cc4);
    }
    DAT_009b3cc8 = 0;
    if ((DAT_009b3cc0 != (char *)0x0) && (*DAT_009b3cc0 != '\0')) {
      if ((DAT_009b3cc4 == (char *)0x0) || (*DAT_009b3cc4 == '\0')) {
        FUN_0086a40a();
      }
      else {
        FUN_0086a17f();
      }
      goto LAB_0086a067;
    }
    if ((DAT_009b3cc4 != (char *)0x0) && (*DAT_009b3cc4 != '\0')) {
      FUN_0086a51d();
      goto LAB_0086a067;
    }
  }
  FUN_0086a5da();
LAB_0086a067:
  if ((((DAT_009b3cc8 == 0) || (uVar2 = FUN_0086a5f4((byte *)(param_1 + 0x80)), uVar2 == 0)) ||
      (BVar3 = IsValidCodePage(uVar2 & 0xffff), BVar3 == 0)) ||
     (BVar3 = IsValidLocale(Locale_009b3cb0,1), BVar3 == 0)) {
    return 0;
  }
  if (param_2 != (undefined2 *)0x0) {
    *param_2 = (undefined2)Locale_009b3cb0;
    param_2[1] = (undefined2)Locale_009b3ccc;
    param_2[2] = (short)uVar2;
  }
  if (param_3 != 0) {
    iVar1 = (*DAT_009b3cd0)(Locale_009b3cb0,0x1001,param_3,0x40);
    if (iVar1 == 0) {
      return 0;
    }
    iVar1 = (*DAT_009b3cd0)(Locale_009b3ccc,0x1002,param_3 + 0x40,0x40);
    if (iVar1 == 0) {
      return 0;
    }
    FUN_0086d6f5(uVar2,(char *)(param_3 + 0x80),10);
  }
  return 1;
}

// ====== 0x0086a127  FUN_0086a127 ======
void __thiscall FUN_0086a127(void *this,int param_1,int param_2,byte *param_3)

{
  byte *pbVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = 0;
  uVar2 = 1;
  if (-1 < param_2) {
    do {
      if (uVar2 == 0) {
        return;
      }
      iVar4 = (param_2 + iVar3) / 2;
      pbVar1 = *(byte **)(param_1 + iVar4 * 8);
      uVar2 = FUN_0085b2b0(this,*(byte **)param_3,pbVar1);
      this = pbVar1;
      if (uVar2 == 0) {
        *(int *)param_3 = param_1 + iVar4 * 8 + 4;
        this = param_3;
      }
      else if ((int)uVar2 < 0) {
        param_2 = iVar4 + -1;
      }
      else {
        iVar3 = iVar4 + 1;
      }
    } while (iVar3 <= param_2);
  }
  return;
}

// ====== 0x0086a17f  FUN_0086a17f ======
void FUN_0086a17f(void)

{
  size_t sVar1;
  
  sVar1 = _strlen(DAT_009b3cc0);
  DAT_009b3cbc = (uint)(sVar1 == 3);
  sVar1 = _strlen(DAT_009b3cc4);
  DAT_009b3cb4 = (uint)(sVar1 == 3);
  Locale_009b3cb0 = 0;
  if (DAT_009b3cbc == 0) {
    DAT_009b3cb8 = FUN_0086a830(DAT_009b3cc0);
  }
  else {
    DAT_009b3cb8 = 2;
  }
  EnumSystemLocalesA(lpLocaleEnumProc_0086a206,1);
  if ((((DAT_009b3cc8 & 0x100) == 0) || ((DAT_009b3cc8 & 0x200) == 0)) || ((DAT_009b3cc8 & 7) == 0))
  {
    DAT_009b3cc8 = 0;
  }
  return;
}

// ====== 0x0086a206  FUN_0086a206 ======
/* lpLocaleEnumProc parameter of EnumSystemLocalesA
    */

uint lpLocaleEnumProc_0086a206(char *param_1)

{
  LCID LVar1;
  int iVar2;
  uint uVar3;
  void *pvVar4;
  void *this;
  void *this_00;
  void *this_01;
  byte local_7c [120];
  
  LVar1 = FUN_0086a7f7(param_1);
  iVar2 = (*DAT_009b3cd0)(LVar1,(-(uint)(DAT_009b3cb4 != 0) & 0xfffff005) + 0x1002,local_7c,0x78);
  if (iVar2 == 0) {
    DAT_009b3cc8 = 0;
    return 1;
  }
  uVar3 = FUN_0085b2b0(this,DAT_009b3cc4,local_7c);
  if (uVar3 == 0) {
    iVar2 = (*DAT_009b3cd0)(LVar1,(-(uint)(DAT_009b3cbc != 0) & 0xfffff002) + 0x1001,local_7c,0x78);
    if (iVar2 == 0) {
      DAT_009b3cc8 = 0;
      return 1;
    }
    uVar3 = FUN_0085b2b0(this_00,DAT_009b3cc0,local_7c);
    if (uVar3 == 0) {
      DAT_009b3cc8 = DAT_009b3cc8 | 0x304;
      Locale_009b3ccc = LVar1;
LAB_0086a2ac:
      Locale_009b3cb0 = LVar1;
    }
    else if ((DAT_009b3cc8 & 2) == 0) {
      if ((DAT_009b3cb8 == (void *)0x0) ||
         (pvVar4 = FUN_0086d8a0(DAT_009b3cc0,(char *)local_7c,DAT_009b3cb8), pvVar4 != (void *)0x0))
      {
        if (((DAT_009b3cc8 & 1) == 0) && (iVar2 = FUN_0086a65a((short)LVar1), iVar2 != 0)) {
          DAT_009b3cc8 = DAT_009b3cc8 | 1;
          Locale_009b3ccc = LVar1;
        }
      }
      else {
        DAT_009b3cc8 = DAT_009b3cc8 | 2;
        Locale_009b3ccc = LVar1;
        pvVar4 = (void *)_strlen((char *)DAT_009b3cc0);
        if (pvVar4 == DAT_009b3cb8) goto LAB_0086a2ac;
      }
    }
  }
  if ((DAT_009b3cc8 & 0x300) == 0x300) goto LAB_0086a3f6;
  iVar2 = (*DAT_009b3cd0)(LVar1,(-(uint)(DAT_009b3cbc != 0) & 0xfffff002) + 0x1001,local_7c,0x78);
  if (iVar2 == 0) {
    DAT_009b3cc8 = 0;
    return 1;
  }
  uVar3 = FUN_0085b2b0(this_01,DAT_009b3cc0,local_7c);
  if (uVar3 == 0) {
    DAT_009b3cc8 = DAT_009b3cc8 | 0x200;
    if (((DAT_009b3cbc == 0) && (DAT_009b3cb8 != (void *)0x0)) &&
       (pvVar4 = (void *)_strlen((char *)DAT_009b3cc0), pvVar4 == DAT_009b3cb8)) {
      iVar2 = 1;
      goto LAB_0086a3d5;
    }
  }
  else {
    if (((DAT_009b3cbc != 0) || (DAT_009b3cb8 == (void *)0x0)) ||
       (pvVar4 = FUN_0086d8a0(DAT_009b3cc0,(char *)local_7c,DAT_009b3cb8), pvVar4 != (void *)0x0))
    goto LAB_0086a3f6;
    iVar2 = 0;
LAB_0086a3d5:
    iVar2 = FUN_0086a679(LVar1,iVar2);
    if (iVar2 == 0) goto LAB_0086a3f6;
  }
  DAT_009b3cc8 = DAT_009b3cc8 | 0x100;
  if (Locale_009b3cb0 == 0) {
    Locale_009b3cb0 = LVar1;
  }
LAB_0086a3f6:
  return ~DAT_009b3cc8 >> 2 & 1;
}

// ====== 0x0086a40a  FUN_0086a40a ======
void FUN_0086a40a(void)

{
  size_t sVar1;
  
  sVar1 = _strlen(DAT_009b3cc0);
  DAT_009b3cbc = (uint)(sVar1 == 3);
  if (sVar1 == 3) {
    DAT_009b3cb8 = 2;
  }
  else {
    DAT_009b3cb8 = FUN_0086a830(DAT_009b3cc0);
  }
  EnumSystemLocalesA(lpLocaleEnumProc_0086a460,1);
  if ((DAT_009b3cc8 & 4) == 0) {
    DAT_009b3cc8 = 0;
  }
  return;
}

// ====== 0x0086a51d  FUN_0086a51d ======
void FUN_0086a51d(void)

{
  size_t sVar1;
  
  sVar1 = _strlen(DAT_009b3cc4);
  DAT_009b3cb4 = (uint)(sVar1 == 3);
  EnumSystemLocalesA(lpLocaleEnumProc_0086a554,1);
  if ((DAT_009b3cc8 & 4) == 0) {
    DAT_009b3cc8 = 0;
  }
  return;
}

// ====== 0x0086a460  FUN_0086a460 ======
/* lpLocaleEnumProc parameter of EnumSystemLocalesA
    */

uint lpLocaleEnumProc_0086a460(char *param_1)

{
  LCID LVar1;
  int iVar2;
  uint uVar3;
  void *pvVar4;
  void *this;
  byte local_7c [120];
  
  LVar1 = FUN_0086a7f7(param_1);
  iVar2 = (*DAT_009b3cd0)(LVar1,(-(uint)(DAT_009b3cbc != 0) & 0xfffff002) + 0x1001,local_7c,0x78);
  if (iVar2 == 0) {
    DAT_009b3cc8 = 0;
    return 1;
  }
  uVar3 = FUN_0085b2b0(this,DAT_009b3cc0,local_7c);
  if (uVar3 == 0) {
    if (DAT_009b3cbc == 0) {
      iVar2 = 1;
      goto LAB_0086a4ec;
    }
  }
  else {
    if (((DAT_009b3cbc != 0) || (DAT_009b3cb8 == (void *)0x0)) ||
       (pvVar4 = FUN_0086d8a0(DAT_009b3cc0,(char *)local_7c,DAT_009b3cb8), pvVar4 != (void *)0x0))
    goto LAB_0086a50b;
    iVar2 = 0;
LAB_0086a4ec:
    iVar2 = FUN_0086a679(LVar1,iVar2);
    if (iVar2 == 0) goto LAB_0086a50b;
  }
  DAT_009b3cc8 = DAT_009b3cc8 | 4;
  Locale_009b3cb0 = LVar1;
  Locale_009b3ccc = LVar1;
LAB_0086a50b:
  return ~DAT_009b3cc8 >> 2 & 1;
}

// ====== 0x0086a554  FUN_0086a554 ======
/* lpLocaleEnumProc parameter of EnumSystemLocalesA
    */

uint lpLocaleEnumProc_0086a554(char *param_1)

{
  LCID LVar1;
  int iVar2;
  uint uVar3;
  void *this;
  byte local_7c [120];
  
  LVar1 = FUN_0086a7f7(param_1);
  iVar2 = (*DAT_009b3cd0)(LVar1,(-(uint)(DAT_009b3cb4 != 0) & 0xfffff005) + 0x1002,local_7c,0x78);
  if (iVar2 == 0) {
    DAT_009b3cc8 = 0;
    uVar3 = 1;
  }
  else {
    uVar3 = FUN_0085b2b0(this,DAT_009b3cc4,local_7c);
    if (uVar3 == 0) {
      iVar2 = FUN_0086a65a((short)LVar1);
      if (iVar2 != 0) {
        DAT_009b3cc8 = DAT_009b3cc8 | 4;
        Locale_009b3cb0 = LVar1;
        Locale_009b3ccc = LVar1;
      }
    }
    uVar3 = ~DAT_009b3cc8 >> 2 & 1;
  }
  return uVar3;
}

// ====== 0x0086a5da  FUN_0086a5da ======
void FUN_0086a5da(void)

{
  DAT_009b3cc8._0_2_ = (ushort)DAT_009b3cc8 | 0x104;
  Locale_009b3ccc = GetUserDefaultLCID();
  Locale_009b3cb0 = Locale_009b3ccc;
  return;
}

// ====== 0x0086a5f4  FUN_0086a5f4 ======
void __cdecl FUN_0086a5f4(byte *param_1)

{
  int iVar1;
  undefined *extraout_ECX;
  undefined4 uVar2;
  undefined *this;
  byte local_c [8];
  
  if (((param_1 == (byte *)0x0) || (*param_1 == 0)) ||
     (iVar1 = _strcmp((char *)param_1,"ACP"), iVar1 == 0)) {
    uVar2 = 0x1004;
  }
  else {
    this = &DAT_0089c40c;
    iVar1 = _strcmp((char *)param_1,"OCP");
    if (iVar1 != 0) goto LAB_0086a650;
    uVar2 = 0xb;
  }
  iVar1 = (*DAT_009b3cd0)(Locale_009b3ccc,uVar2,local_c,8);
  if (iVar1 == 0) {
    return;
  }
  param_1 = local_c;
  this = extraout_ECX;
LAB_0086a650:
  FUN_0085aed8(this,param_1);
  return;
}

// ====== 0x0086a65a  FUN_0086a65a ======
undefined4 __cdecl FUN_0086a65a(short param_1)

{
  short *psVar1;
  
  psVar1 = &DAT_0097d414;
  do {
    if (param_1 == *psVar1) {
      return 0;
    }
    psVar1 = psVar1 + 1;
  } while ((int)psVar1 < 0x97d428);
  return 1;
}

// ====== 0x0086a679  FUN_0086a679 ======
undefined4 __cdecl FUN_0086a679(int param_1,int param_2)

{
  int iVar1;
  size_t sVar2;
  size_t sVar3;
  char local_7c [120];
  
  iVar1 = (*DAT_009b3cd0)((ushort)param_1 & 0x3ff | 0x400,1,local_7c,0x78);
  if (iVar1 == 0) {
    return 0;
  }
  iVar1 = FUN_0086a7f7(local_7c);
  if ((param_1 != iVar1) && (param_2 != 0)) {
    sVar2 = FUN_0086a830(DAT_009b3cc0);
    sVar3 = _strlen(DAT_009b3cc0);
    if (sVar2 == sVar3) {
      return 0;
    }
  }
  return 1;
}

// ====== 0x0086a6db  FUN_0086a6db ======
undefined4 FUN_0086a6db(void)

{
  BOOL BVar1;
  _OSVERSIONINFOA local_98;
  
  local_98.dwOSVersionInfoSize = 0x94;
  BVar1 = GetVersionExA(&local_98);
  if ((BVar1 != 0) && (local_98.dwPlatformId == 2)) {
    return 1;
  }
  return 0;
}

// ====== 0x0086a711  FUN_0086a711 ======
int FUN_0086a711(uint param_1,LCTYPE param_2,char *param_3,int param_4)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  char *_Source;
  int iVar4;
  
  iVar4 = 0;
  iVar3 = 0x1a;
  do {
    iVar2 = (iVar3 + iVar4) / 2;
    uVar1 = *(uint *)(iVar2 * 0x2c + 0x97cf70);
    if (param_1 == uVar1) {
      if (param_2 == 1) {
        _Source = &DAT_0097cf74 + iVar2 * 0x2c;
      }
      else if (param_2 == 3) {
        _Source = &DAT_0097cf80 + iVar2 * 0x2c;
      }
      else if (param_2 == 7) {
        _Source = &DAT_0097cf88 + iVar2 * 0x2c;
      }
      else if (param_2 == 0xb) {
        _Source = &DAT_0097cf8c + iVar2 * 0x2c;
      }
      else if (param_2 == 0x1001) {
        _Source = *(char **)(iVar2 * 0x2c + 0x97cf7c);
      }
      else if (param_2 == 0x1002) {
        _Source = *(char **)(iVar2 * 0x2c + 0x97cf84);
      }
      else {
        if (param_2 != 0x1004) break;
        _Source = &DAT_0097cf94 + iVar2 * 0x2c;
      }
      if ((_Source != (char *)0x0) && (0 < param_4)) {
        _strncpy(param_3,_Source,param_4 - 1);
        param_3[param_4 + -1] = '\0';
        return 1;
      }
      break;
    }
    if (param_1 < uVar1) {
      iVar3 = iVar2 + -1;
    }
    else {
      iVar4 = iVar2 + 1;
    }
  } while (iVar4 <= iVar3);
  iVar3 = GetLocaleInfoA(param_1,param_2,param_3,param_4);
  return iVar3;
}

// ====== 0x0086a7f7  FUN_0086a7f7 ======
int __cdecl FUN_0086a7f7(char *param_1)

{
  int iVar1;
  char cVar2;
  
  iVar1 = 0;
  while( true ) {
    cVar2 = *param_1;
    param_1 = param_1 + 1;
    if (cVar2 == '\0') break;
    if ((cVar2 < 'a') || ('f' < cVar2)) {
      if (('@' < cVar2) && (cVar2 < 'G')) {
        cVar2 = cVar2 + -7;
      }
    }
    else {
      cVar2 = cVar2 + -0x27;
    }
    iVar1 = (iVar1 + 0xffffffd) * 0x10 + (int)cVar2;
  }
  return iVar1;
}

// ====== 0x0086a830  FUN_0086a830 ======
int __cdecl FUN_0086a830(char *param_1)

{
  char cVar1;
  int iVar2;
  
  iVar2 = 0;
  while( true ) {
    cVar1 = *param_1;
    param_1 = param_1 + 1;
    if (((cVar1 < 'A') || ('Z' < cVar1)) && ((cVar1 < 'a' || ('z' < cVar1)))) break;
    iVar2 = iVar2 + 1;
  }
  return iVar2;
}

// ====== 0x0086a851  FUN_0086a851 ======
int __cdecl
FUN_0086a851(LCID param_1,DWORD param_2,byte *param_3,int param_4,byte *param_5,int param_6,
            UINT param_7)

{
  undefined1 *puVar1;
  int iVar2;
  BOOL BVar3;
  BYTE *pBVar4;
  int iVar5;
  _cpinfo local_40;
  undefined1 *local_2c;
  PCNZWCH local_28;
  int local_24;
  int local_20;
  undefined1 *local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089c418;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  local_1c = &stack0xffffffb0;
  ExceptionList = &local_14;
  puVar1 = &stack0xffffffb0;
  if (DAT_009b3cd4 == 0) {
    ExceptionList = &local_14;
    iVar2 = CompareStringW(0,0,(PCNZWCH)&lpSrcStr_0089b9cc,1,(PCNZWCH)&lpSrcStr_0089b9cc,1);
    if (iVar2 == 0) {
      iVar2 = CompareStringA(0,0,(PCNZCH)&lpSrcStr_0089b9c8,1,(PCNZCH)&lpSrcStr_0089b9c8,1);
      if (iVar2 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_009b3cd4 = 2;
      puVar1 = local_1c;
    }
    else {
      DAT_009b3cd4 = 1;
      puVar1 = local_1c;
    }
  }
  local_1c = puVar1;
  if (0 < param_4) {
    param_4 = FUN_0086aace((char *)param_3,param_4);
  }
  if (0 < param_6) {
    param_6 = FUN_0086aace((char *)param_5,param_6);
  }
  if (DAT_009b3cd4 == 2) {
    iVar2 = CompareStringA(param_1,param_2,(PCNZCH)param_3,param_4,(PCNZCH)param_5,param_6);
    ExceptionList = local_14;
    return iVar2;
  }
  if (DAT_009b3cd4 == 1) {
    if (param_7 == 0) {
      param_7 = CodePage_009b3a78;
    }
    if ((param_4 == 0) || (param_6 == 0)) {
      if (param_4 == param_6) {
        ExceptionList = local_14;
        return 2;
      }
      if (1 < param_6) {
        ExceptionList = local_14;
        return 1;
      }
      if (1 < param_4) {
        ExceptionList = local_14;
        return 3;
      }
      BVar3 = GetCPInfo(param_7,&local_40);
      if (BVar3 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      if (0 < param_4) {
        if (local_40.MaxCharSize < 2) {
          ExceptionList = local_14;
          return 3;
        }
        pBVar4 = local_40.LeadByte;
        while( true ) {
          if (local_40.LeadByte[0] == 0) {
            ExceptionList = local_14;
            return 3;
          }
          if (pBVar4[1] == 0) break;
          if ((*pBVar4 <= *param_3) && (*param_3 <= pBVar4[1])) {
            ExceptionList = local_14;
            return 2;
          }
          pBVar4 = pBVar4 + 2;
          local_40.LeadByte[0] = *pBVar4;
        }
        ExceptionList = local_14;
        return 3;
      }
      if (0 < param_6) {
        if (local_40.MaxCharSize < 2) {
          ExceptionList = local_14;
          return 1;
        }
        pBVar4 = local_40.LeadByte;
        while( true ) {
          if (local_40.LeadByte[0] == 0) {
            ExceptionList = local_14;
            return 1;
          }
          if (pBVar4[1] == 0) break;
          if ((*pBVar4 <= *param_5) && (*param_5 <= pBVar4[1])) {
            ExceptionList = local_14;
            return 2;
          }
          pBVar4 = pBVar4 + 2;
          local_40.LeadByte[0] = *pBVar4;
        }
        ExceptionList = local_14;
        return 1;
      }
    }
    local_20 = MultiByteToWideChar(param_7,9,(LPCSTR)param_3,param_4,(LPWSTR)0x0,0);
    if (local_20 != 0) {
      local_8 = 0;
      FUN_0085f3a0();
      local_8 = 0xffffffff;
      if ((&stack0x00000000 != (undefined1 *)0x50) &&
         (local_28 = (PCNZWCH)&stack0xffffffb0, local_1c = &stack0xffffffb0,
         iVar2 = MultiByteToWideChar(param_7,1,(LPCSTR)param_3,param_4,(LPWSTR)&stack0xffffffb0,
                                     local_20), iVar2 != 0)) {
        iVar2 = MultiByteToWideChar(param_7,9,(LPCSTR)param_5,param_6,(LPWSTR)0x0,0);
        if (iVar2 != 0) {
          local_8 = 1;
          local_24 = iVar2;
          FUN_0085f3a0();
          local_8 = 0xffffffff;
          if ((&stack0x00000000 != (undefined1 *)0x50) &&
             (local_2c = &stack0xffffffb0, local_1c = &stack0xffffffb0,
             iVar5 = MultiByteToWideChar(param_7,1,(LPCSTR)param_5,param_6,(LPWSTR)&stack0xffffffb0,
                                         iVar2), iVar5 != 0)) {
            iVar2 = CompareStringW(param_1,param_2,local_28,local_20,(PCNZWCH)&stack0xffffffb0,iVar2
                                  );
            ExceptionList = local_14;
            return iVar2;
          }
        }
      }
    }
  }
  ExceptionList = local_14;
  return 0;
}

// ====== 0x0086aace  FUN_0086aace ======
int __cdecl FUN_0086aace(char *param_1,int param_2)

{
  char *pcVar1;
  int iVar2;
  
  pcVar1 = param_1;
  iVar2 = param_2;
  if (param_2 != 0) {
    do {
      iVar2 = iVar2 + -1;
      if (*pcVar1 == '\0') break;
      pcVar1 = pcVar1 + 1;
    } while (iVar2 != 0);
  }
  if (*pcVar1 == '\0') {
    return (int)pcVar1 - (int)param_1;
  }
  return param_2;
}

// ====== 0x0086ab6c  FUN_0086ab6c ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1  [10] FUN_0086ab6c(void)

{
  return _DAT_0097a88a;
}

// ====== 0x0086ad05  FUN_0086ad05 ======
int __cdecl FUN_0086ad05(uint param_1,int param_2)

{
  byte bVar1;
  DWORD *pDVar2;
  byte bVar3;
  
  bVar1 = *(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24);
  if (param_2 == 0x8000) {
    bVar3 = bVar1 & 0x7f;
  }
  else {
    if (param_2 != 0x4000) {
      pDVar2 = FUN_0085cbd7();
      *pDVar2 = 0x16;
      return -1;
    }
    bVar3 = bVar1 | 0x80;
  }
  *(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) = bVar3;
  return (-(uint)((bVar1 & 0x80) != 0) & 0xffffc000) + 0x8000;
}

// ====== 0x0086b78b  FUN_0086b78b ======
uint __thiscall FUN_0086b78b(void *this,uint param_1)

{
  uint uVar1;
  
  if (cbMultiByte_0097a340 < 2) {
    uVar1 = (byte)PTR_DAT_0097a134[param_1 * 2] & 4;
  }
  else {
    uVar1 = FUN_0085c91d(this,param_1,4);
  }
  if (uVar1 == 0) {
    param_1 = (param_1 & 0xffffffdf) - 7;
  }
  return param_1;
}

// ====== 0x0086b7c2  FUN_0086b7c2 ======
uint __cdecl FUN_0086b7c2(undefined4 *param_1)

{
  int *piVar1;
  byte bVar2;
  uint uVar3;
  
  piVar1 = param_1 + 1;
  *piVar1 = *piVar1 + -1;
  if (-1 < *piVar1) {
    bVar2 = *(byte *)*param_1;
    *param_1 = (byte *)*param_1 + 1;
    return (uint)bVar2;
  }
  uVar3 = FUN_0086788f(param_1);
  return uVar3;
}

// ====== 0x0086ad66  FUN_0086ad66 ======
int __thiscall FUN_0086ad66(void *this,int *param_1,byte *param_2,undefined4 *param_3)

{
  byte bVar1;
  undefined4 *puVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  uint uVar6;
  void *this_00;
  int *extraout_ECX;
  int *extraout_ECX_00;
  int *extraout_ECX_01;
  void *this_01;
  int *extraout_ECX_02;
  int *extraout_ECX_03;
  int *piVar7;
  byte bVar8;
  byte *pbVar9;
  byte *pbVar10;
  char *pcVar11;
  char *pcVar12;
  WCHAR *pWVar13;
  undefined1 *puVar14;
  int iVar15;
  bool bVar16;
  int *piVar17;
  char local_1c8;
  char local_1c7 [351];
  byte local_68 [32];
  undefined4 *local_48;
  WCHAR local_42;
  uint local_40;
  byte local_3c;
  undefined1 local_3b;
  byte local_39;
  int local_38;
  WCHAR *local_34;
  WCHAR *local_30;
  undefined8 local_2c;
  int local_24;
  int local_20;
  byte local_1c;
  char local_1b;
  char local_1a;
  char local_19;
  int *local_18;
  char local_13;
  char local_12;
  char local_11;
  int local_10;
  char local_9;
  undefined *local_8;
  
  local_19 = '\0';
  bVar1 = *param_2;
  local_8 = (undefined1 *)0x0;
  local_38 = 0;
  pbVar9 = param_2;
  piVar7 = (int *)PTR_DAT_0097a134;
  do {
    PTR_DAT_0097a134 = (undefined *)piVar7;
    if (bVar1 == 0) {
LAB_0086b76c:
      if (local_18 == (int *)0xffffffff) {
LAB_0086b772:
        if ((local_38 == 0) && (local_19 == '\0')) {
          local_38 = -1;
        }
      }
      return local_38;
    }
    if (cbMultiByte_0097a340 < 2) {
      uVar5 = *(byte *)((int)piVar7 + (uint)bVar1 * 2) & 8;
    }
    else {
      piVar7 = (int *)&DAT_00000008;
      uVar5 = FUN_0085c91d(this,(uint)bVar1,8);
    }
    if (uVar5 != 0) {
      local_8 = local_8 + -1;
      piVar7 = param_1;
      uVar5 = FUN_0086b7f3((int *)&local_8,param_1);
      FUN_0086b7dc(uVar5,piVar7);
      uVar5 = FUN_0085fce5(this_00,(uint)pbVar9[1]);
      piVar7 = extraout_ECX;
      pbVar10 = pbVar9;
      while (pbVar9 = pbVar10 + 1, uVar5 != 0) {
        piVar17 = (int *)(uint)pbVar10[2];
        uVar5 = FUN_0085fce5(piVar7,(int)(uint)pbVar10[2]);
        piVar7 = piVar17;
        pbVar10 = pbVar9;
      }
    }
    if (*pbVar9 == 0x25) {
      local_39 = 0;
      local_1c = 0;
      local_1b = '\0';
      local_12 = '\0';
      local_13 = '\0';
      local_1a = '\0';
      puVar14 = (undefined1 *)0x0;
      local_9 = '\0';
      local_20 = 0;
      local_24 = 0;
      local_10 = 0;
      local_11 = '\x01';
      local_34 = (WCHAR *)0x0;
      do {
        uVar5 = (uint)pbVar9[1];
        param_2 = pbVar9 + 1;
        if (cbMultiByte_0097a340 < 2) {
          uVar6 = (byte)PTR_DAT_0097a134[uVar5 * 2] & 4;
          piVar7 = (int *)PTR_DAT_0097a134;
        }
        else {
          piVar17 = (int *)0x4;
          uVar6 = FUN_0085c91d(piVar7,uVar5,4);
          piVar7 = piVar17;
        }
        if (uVar6 == 0) {
          if (uVar5 < 0x4f) {
            if (uVar5 != 0x4e) {
              if (uVar5 == 0x2a) {
                local_12 = local_12 + '\x01';
              }
              else if (uVar5 != 0x46) {
                if (uVar5 == 0x49) {
                  if ((pbVar9[2] != 0x36) || (pbVar9[3] != 0x34)) goto LAB_0086aec1;
                  local_34 = (WCHAR *)((int)local_34 + 1);
                  local_2c = 0;
                  param_2 = pbVar9 + 3;
                }
                else if (uVar5 == 0x4c) {
                  local_11 = local_11 + '\x01';
                }
                else {
LAB_0086aec1:
                  local_13 = local_13 + '\x01';
                }
              }
            }
          }
          else if (uVar5 == 0x68) {
            local_11 = local_11 + -1;
            local_9 = local_9 + -1;
          }
          else {
            if (uVar5 == 0x6c) {
              local_11 = local_11 + '\x01';
            }
            else if (uVar5 != 0x77) goto LAB_0086aec1;
            local_9 = local_9 + '\x01';
          }
        }
        else {
          local_24 = local_24 + 1;
          local_10 = (uVar5 - 0x30) + local_10 * 10;
        }
        pbVar9 = param_2;
      } while (local_13 == '\0');
      puVar2 = param_3;
      if (local_12 == '\0') {
        local_30 = (WCHAR *)*param_3;
        puVar2 = param_3 + 1;
        local_48 = param_3;
      }
      param_3 = puVar2;
      local_13 = '\0';
      if (local_9 == '\0') {
        if ((*param_2 == 0x53) || (*param_2 == 0x43)) {
          local_9 = '\x01';
        }
        else {
          local_9 = -1;
        }
      }
      uVar5 = *param_2 | 0x20;
      local_40 = uVar5;
      if (uVar5 != 0x6e) {
        if ((uVar5 == 99) || (uVar5 == 0x7b)) {
          local_8 = local_8 + 1;
          piVar7 = param_1;
          local_18 = (int *)FUN_0086b7c2(param_1);
        }
        else {
          piVar7 = param_1;
          local_18 = (int *)FUN_0086b7f3((int *)&local_8,param_1);
        }
      }
      if ((local_24 != 0) && (local_10 == 0)) {
LAB_0086b74c:
        local_8 = local_8 + -1;
        FUN_0086b7dc((uint)local_18,param_1);
        goto LAB_0086b76c;
      }
      if (uVar5 < 0x70) {
        if (uVar5 == 0x6f) {
LAB_0086b479:
          if (local_18 == (int *)0x2d) {
            local_1b = '\x01';
          }
          else if (local_18 != (int *)0x2b) goto LAB_0086b4ae;
          local_10 = local_10 + -1;
          if ((local_10 == 0) && (local_24 != 0)) {
            local_13 = '\x01';
          }
          else {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_0086b7c2(param_1);
          }
          goto LAB_0086b4ae;
        }
        if (uVar5 != 99) {
          if (uVar5 == 100) goto LAB_0086b479;
          if (uVar5 < 0x65) {
LAB_0086b1f1:
            if ((int *)(uint)*param_2 != local_18) goto LAB_0086b74c;
            local_19 = local_19 + -1;
            if (local_12 == '\0') {
              param_3 = local_48;
            }
            goto LAB_0086b6cd;
          }
          if (0x67 < uVar5) {
            if (uVar5 == 0x69) {
              uVar5 = 100;
              goto LAB_0086afaf;
            }
            if (uVar5 != 0x6e) goto LAB_0086b1f1;
            puVar14 = local_8;
            if (local_12 != '\0') goto LAB_0086b6cd;
            goto LAB_0086b6a7;
          }
          pcVar11 = &local_1c8;
          if (local_18 == (int *)0x2d) {
            local_1c8 = '-';
            pcVar11 = local_1c7;
LAB_0086afe5:
            local_10 = local_10 + -1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_0086b7c2(param_1);
          }
          else if (local_18 == (int *)0x2b) goto LAB_0086afe5;
          if ((local_24 == 0) || (0x15d < local_10)) {
            local_10 = 0x15d;
          }
          while( true ) {
            piVar17 = local_18;
            if (cbMultiByte_0097a340 < 2) {
              uVar5 = (byte)PTR_DAT_0097a134[(int)local_18 * 2] & 4;
            }
            else {
              uVar5 = FUN_0085c91d(piVar7,(int)local_18,4);
            }
            if ((uVar5 == 0) ||
               (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
            local_20 = local_20 + 1;
            *pcVar11 = (char)piVar17;
            pcVar11 = pcVar11 + 1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_0086b7c2(param_1);
          }
          if ((DAT_0097a344 == (char)piVar17) &&
             (iVar15 = local_10 + -1, bVar16 = local_10 != 0, local_10 = iVar15, bVar16)) {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            piVar17 = (int *)FUN_0086b7c2(param_1);
            *pcVar11 = DAT_0097a344;
            while( true ) {
              pcVar11 = pcVar11 + 1;
              local_18 = piVar17;
              if (cbMultiByte_0097a340 < 2) {
                uVar5 = (byte)PTR_DAT_0097a134[(int)piVar17 * 2] & 4;
              }
              else {
                uVar5 = FUN_0085c91d(piVar7,(int)piVar17,4);
              }
              if ((uVar5 == 0) ||
                 (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
              local_20 = local_20 + 1;
              *pcVar11 = (char)piVar17;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              piVar17 = (int *)FUN_0086b7c2(param_1);
            }
          }
          pcVar12 = pcVar11;
          if ((local_20 != 0) &&
             (((piVar17 == (int *)0x65 || (piVar17 == (int *)0x45)) &&
              (iVar15 = local_10 + -1, bVar16 = local_10 != 0, local_10 = iVar15, bVar16)))) {
            *pcVar11 = 'e';
            pcVar12 = pcVar11 + 1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            piVar17 = (int *)FUN_0086b7c2(param_1);
            local_18 = piVar17;
            if (piVar17 == (int *)0x2d) {
              *pcVar12 = '-';
              pcVar12 = pcVar11 + 2;
LAB_0086b10c:
              bVar16 = local_10 != 0;
              local_10 = local_10 + -1;
              if (bVar16) goto LAB_0086b11b;
              local_10 = 0;
            }
            else if (piVar17 == (int *)0x2b) goto LAB_0086b10c;
            while( true ) {
              if (cbMultiByte_0097a340 < 2) {
                uVar5 = (byte)PTR_DAT_0097a134[(int)piVar17 * 2] & 4;
              }
              else {
                uVar5 = FUN_0085c91d(piVar7,(int)piVar17,4);
              }
              if ((uVar5 == 0) ||
                 (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
              local_20 = local_20 + 1;
              *pcVar12 = (char)piVar17;
              pcVar12 = pcVar12 + 1;
LAB_0086b11b:
              local_8 = local_8 + 1;
              piVar7 = param_1;
              piVar17 = (int *)FUN_0086b7c2(param_1);
              local_18 = piVar17;
            }
          }
          local_8 = local_8 + -1;
          piVar7 = param_1;
          FUN_0086b7dc((uint)piVar17,param_1);
          if (local_20 != 0) {
            if (local_12 == '\0') {
              local_38 = local_38 + 1;
              *pcVar12 = '\0';
              (*(code *)PTR_FUN_0097a860)(local_11 + -1,local_30,&local_1c8);
              piVar7 = extraout_ECX_00;
            }
            goto LAB_0086b6cd;
          }
          goto LAB_0086b76c;
        }
        if (local_24 == 0) {
          local_10 = local_10 + 1;
          local_24 = 1;
        }
        if ('\0' < local_9) {
          local_1a = '\x01';
        }
        pcVar11 = &DAT_0097d814;
LAB_0086b2d2:
        local_1c = 0xff;
        pbVar9 = (byte *)pcVar11;
        pbVar10 = param_2;
LAB_0086b2d6:
        param_2 = pbVar10;
        _memset(local_68,0,0x20);
        if ((local_40 == 0x7b) && (*pbVar9 == 0x5d)) {
          uVar5 = 0x5d;
          local_68[0xb] = 0x20;
          pbVar9 = pbVar9 + 1;
        }
        else {
          uVar5 = (uint)local_39;
        }
        while (pWVar13 = local_30, bVar1 = *pbVar9, bVar1 != 0x5d) {
          if (((bVar1 == 0x2d) && (bVar8 = (byte)uVar5, bVar8 != 0)) &&
             (bVar4 = pbVar9[1], bVar4 != 0x5d)) {
            if (bVar4 <= bVar8) {
              uVar5 = (uint)bVar4;
              bVar4 = bVar8;
            }
            if ((byte)uVar5 <= bVar4) {
              iVar15 = (bVar4 - uVar5) + 1;
              do {
                local_68[uVar5 >> 3] = local_68[uVar5 >> 3] | '\x01' << ((byte)uVar5 & 7);
                uVar5 = uVar5 + 1;
                iVar15 = iVar15 + -1;
              } while (iVar15 != 0);
            }
            uVar5 = 0;
            pbVar9 = pbVar9 + 2;
          }
          else {
            uVar5 = (uint)bVar1;
            local_68[bVar1 >> 3] = local_68[bVar1 >> 3] | '\x01' << (bVar1 & 7);
            pbVar9 = pbVar9 + 1;
          }
        }
        if (*pbVar9 == 0) goto LAB_0086b76c;
        if (local_40 == 0x7b) {
          param_2 = pbVar9;
        }
        local_8 = local_8 + -1;
        local_34 = local_30;
        piVar7 = param_1;
        FUN_0086b7dc((uint)local_18,param_1);
        while( true ) {
          if ((local_24 != 0) &&
             (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16))
          goto LAB_0086b43b;
          local_8 = local_8 + 1;
          local_18 = (int *)FUN_0086b7c2(param_1);
          if (local_18 == (int *)0xffffffff) break;
          bVar1 = (byte)local_18;
          piVar7 = (int *)(int)(char)(local_68[(int)local_18 >> 3] ^ local_1c);
          if (((uint)piVar7 & 1 << (bVar1 & 7)) == 0) break;
          if (local_12 == '\0') {
            if (local_1a == '\0') {
              *(byte *)pWVar13 = bVar1;
              pWVar13 = (WCHAR *)((int)pWVar13 + 1);
              local_30 = pWVar13;
            }
            else {
              local_3c = bVar1;
              if ((PTR_DAT_0097a134[((uint)local_18 & 0xff) * 2 + 1] & 0x80) != 0) {
                local_8 = local_8 + 1;
                uVar5 = FUN_0086b7c2(param_1);
                local_3b = (undefined1)uVar5;
              }
              FUN_0086bda3(&local_42,&local_3c,cbMultiByte_0097a340);
              *pWVar13 = local_42;
              pWVar13 = pWVar13 + 1;
              piVar7 = extraout_ECX_01;
              local_30 = pWVar13;
            }
          }
          else {
            local_34 = (WCHAR *)((int)local_34 + 1);
          }
        }
        local_8 = local_8 + -1;
        piVar7 = param_1;
        FUN_0086b7dc((uint)local_18,param_1);
LAB_0086b43b:
        if (local_34 == pWVar13) goto LAB_0086b76c;
        if ((local_12 == '\0') && (local_38 = local_38 + 1, local_40 != 99)) {
          if (local_1a == '\0') {
            *(byte *)local_30 = 0;
          }
          else {
            *local_30 = L'\0';
          }
        }
      }
      else {
        if (uVar5 == 0x70) {
          local_11 = '\x01';
          goto LAB_0086b479;
        }
        if (uVar5 == 0x73) {
          if ('\0' < local_9) {
            local_1a = '\x01';
          }
          pcVar11 = s_____0097d80c;
          goto LAB_0086b2d2;
        }
        if (uVar5 == 0x75) goto LAB_0086b479;
        if (uVar5 != 0x78) {
          if (uVar5 != 0x7b) goto LAB_0086b1f1;
          if ('\0' < local_9) {
            local_1a = '\x01';
          }
          pbVar9 = param_2 + 1;
          pbVar10 = pbVar9;
          if (*pbVar9 == 0x5e) {
            pcVar11 = (char *)(param_2 + 2);
            param_2 = pbVar9;
            goto LAB_0086b2d2;
          }
          goto LAB_0086b2d6;
        }
LAB_0086afaf:
        if (local_18 == (int *)0x2d) {
          local_1b = '\x01';
LAB_0086b23e:
          local_10 = local_10 + -1;
          if ((local_10 == 0) && (local_24 != 0)) {
            local_13 = '\x01';
          }
          else {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_0086b7c2(param_1);
          }
        }
        else if (local_18 == (int *)0x2b) goto LAB_0086b23e;
        if (local_18 == (int *)0x30) {
          local_8 = local_8 + 1;
          piVar7 = param_1;
          local_18 = (int *)FUN_0086b7c2(param_1);
          if (((char)local_18 == 'x') || ((char)local_18 == 'X')) {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_0086b7c2(param_1);
            uVar5 = 0x78;
          }
          else {
            local_20 = 1;
            if (uVar5 == 0x78) {
              local_8 = local_8 + -1;
              piVar7 = param_1;
              FUN_0086b7dc((uint)local_18,param_1);
              local_18 = (int *)0x30;
            }
            else {
              uVar5 = 0x6f;
            }
          }
        }
LAB_0086b4ae:
        if (local_34 == (WCHAR *)0x0) {
          if (local_13 == '\0') {
            while ((piVar17 = local_18, uVar5 != 0x78 && (uVar5 != 0x70))) {
              if (cbMultiByte_0097a340 < 2) {
                uVar6 = (byte)PTR_DAT_0097a134[(int)local_18 * 2] & 4;
              }
              else {
                piVar3 = (int *)0x4;
                uVar6 = FUN_0085c91d(piVar7,(int)local_18,4);
                piVar7 = piVar3;
              }
              if (uVar6 == 0) goto LAB_0086b675;
              if (uVar5 == 0x6f) {
                if (0x37 < (int)piVar17) goto LAB_0086b675;
                iVar15 = (int)puVar14 << 3;
              }
              else {
                iVar15 = (int)puVar14 * 10;
              }
LAB_0086b64d:
              local_20 = local_20 + 1;
              puVar14 = (undefined1 *)(iVar15 + -0x30 + (int)piVar17);
              if ((local_24 != 0) && (local_10 = local_10 + -1, local_10 == 0)) goto LAB_0086b683;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              local_18 = (int *)FUN_0086b7c2(param_1);
            }
            if (cbMultiByte_0097a340 < 2) {
              uVar6 = (byte)PTR_DAT_0097a134[(int)local_18 * 2] & 0x80;
            }
            else {
              piVar3 = (int *)0x80;
              uVar6 = FUN_0085c91d(piVar7,(int)local_18,0x80);
              piVar7 = piVar3;
            }
            if (uVar6 != 0) {
              iVar15 = (int)puVar14 << 4;
              piVar3 = piVar17;
              piVar17 = (int *)FUN_0086b78b(piVar7,(uint)piVar17);
              piVar7 = piVar3;
              local_18 = piVar17;
              goto LAB_0086b64d;
            }
LAB_0086b675:
            local_8 = local_8 + -1;
            piVar7 = param_1;
            FUN_0086b7dc((uint)piVar17,param_1);
          }
LAB_0086b683:
          if (local_1b != '\0') {
            puVar14 = (undefined1 *)-(int)puVar14;
          }
        }
        else {
          if (local_13 == '\0') {
            while (piVar17 = local_18, uVar5 != 0x78) {
              if (cbMultiByte_0097a340 < 2) {
                uVar6 = (byte)PTR_DAT_0097a134[(int)local_18 * 2] & 4;
              }
              else {
                uVar6 = FUN_0085c91d(piVar7,(int)local_18,4);
              }
              if (uVar6 == 0) goto LAB_0086b597;
              if (uVar5 == 0x6f) {
                if (0x37 < (int)piVar17) goto LAB_0086b597;
                local_2c = __allshl(3,(int)local_2c._4_4_);
                piVar7 = extraout_ECX_02;
              }
              else {
                local_2c = __allmul((uint)local_2c,(int)local_2c._4_4_,10,0);
                piVar7 = extraout_ECX_03;
              }
LAB_0086b569:
              local_20 = local_20 + 1;
              piVar17 = piVar17 + -0xc;
              local_2c = CONCAT44((int)local_2c._4_4_ + ((int)piVar17 >> 0x1f) +
                                  (uint)CARRY4((uint)local_2c,(uint)piVar17),
                                  (undefined1 *)((uint)local_2c + (int)piVar17));
              if ((local_24 != 0) && (local_10 = local_10 + -1, local_10 == 0)) goto LAB_0086b5a5;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              local_18 = (int *)FUN_0086b7c2(param_1);
            }
            if (cbMultiByte_0097a340 < 2) {
              uVar6 = (byte)PTR_DAT_0097a134[(int)local_18 * 2] & 0x80;
            }
            else {
              uVar6 = FUN_0085c91d(piVar7,(int)local_18,0x80);
            }
            if (uVar6 != 0) {
              local_2c = __allshl(4,(int)local_2c._4_4_);
              piVar7 = piVar17;
              piVar17 = (int *)FUN_0086b78b(this_01,(uint)piVar17);
              local_18 = piVar17;
              goto LAB_0086b569;
            }
LAB_0086b597:
            local_8 = local_8 + -1;
            piVar7 = param_1;
            FUN_0086b7dc((uint)piVar17,param_1);
          }
LAB_0086b5a5:
          if (local_1b != '\0') {
            piVar7 = (int *)-((int)local_2c._4_4_ + (uint)((uint)local_2c != 0));
            local_2c = CONCAT44(piVar7,-(uint)local_2c);
          }
        }
        if (uVar5 == 0x46) {
          local_20 = 0;
        }
        if (local_20 == 0) goto LAB_0086b76c;
        if (local_12 == '\0') {
          local_38 = local_38 + 1;
LAB_0086b6a7:
          if (local_34 == (WCHAR *)0x0) {
            if (local_11 == '\0') {
              *local_30 = (WCHAR)puVar14;
            }
            else {
              *(undefined1 **)local_30 = puVar14;
            }
          }
          else {
            *(uint *)local_30 = (uint)local_2c;
            *(int **)(local_30 + 2) = local_2c._4_4_;
            piVar7 = local_2c._4_4_;
          }
        }
      }
LAB_0086b6cd:
      local_19 = local_19 + '\x01';
      param_2 = param_2 + 1;
      this = piVar7;
    }
    else {
      local_8 = local_8 + 1;
      piVar7 = (int *)FUN_0086b7c2(param_1);
      param_2 = pbVar9 + 1;
      local_18 = piVar7;
      if ((int *)(uint)*pbVar9 != piVar7) goto LAB_0086b74c;
      this = PTR_DAT_0097a134;
      if ((PTR_DAT_0097a134[((uint)piVar7 & 0xff) * 2 + 1] & 0x80) != 0) {
        local_8 = local_8 + 1;
        piVar17 = (int *)FUN_0086b7c2(param_1);
        this = (void *)(uint)*param_2;
        param_2 = pbVar9 + 2;
        if ((int *)this != piVar17) {
          local_8 = local_8 + -1;
          FUN_0086b7dc((uint)piVar17,param_1);
          local_8 = local_8 + -1;
          FUN_0086b7dc((uint)piVar7,param_1);
          goto LAB_0086b76c;
        }
        local_8 = local_8 + -1;
      }
    }
    if ((local_18 == (int *)0xffffffff) && ((*param_2 != 0x25 || (param_2[1] != 0x6e))))
    goto LAB_0086b772;
    bVar1 = *param_2;
    pbVar9 = param_2;
    piVar7 = (int *)PTR_DAT_0097a134;
  } while( true );
}

// ====== 0x0086b7dc  FUN_0086b7dc ======
void __cdecl FUN_0086b7dc(uint param_1,int *param_2)

{
  if (param_1 != 0xffffffff) {
    FUN_0086032e(param_1,param_2);
  }
  return;
}

// ====== 0x0086b7f3  FUN_0086b7f3 ======
uint __cdecl FUN_0086b7f3(int *param_1,undefined4 *param_2)

{
  uint uVar1;
  uint uVar2;
  void *this;
  
  do {
    *param_1 = *param_1 + 1;
    uVar1 = FUN_0086b7c2(param_2);
    uVar2 = FUN_0085fce5(this,uVar1);
  } while (uVar2 != 0);
  return uVar1;
}

// ====== 0x0086b817  FUN_0086b817 ======
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0086b817(undefined4 *param_1)

{
  void *pvVar1;
  
  _DAT_009b3968 = _DAT_009b3968 + 1;
  pvVar1 = _malloc(0x1000);
  param_1[2] = pvVar1;
  if (pvVar1 == (void *)0x0) {
    param_1[3] = param_1[3] | 4;
    param_1[2] = param_1 + 5;
    param_1[6] = 2;
  }
  else {
    param_1[3] = param_1[3] | 8;
    param_1[6] = 0x1000;
  }
  param_1[1] = 0;
  *param_1 = param_1[2];
  return;
}

// ====== 0x0086b85b  FUN_0086b85b ======
ulonglong __cdecl FUN_0086b85b(char *param_1)

{
  ulonglong uVar1;
  
  FUN_0085bf73((uint)param_1);
  uVar1 = FUN_0086b883(param_1);
  FUN_0085bfc5((uint)param_1);
  return uVar1;
}

// ====== 0x0086b883  FUN_0086b883 ======
ulonglong __cdecl FUN_0086b883(char *param_1)

{
  uint uVar1;
  byte bVar2;
  ulonglong uVar3;
  char *pcVar4;
  DWORD *pDVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  int iVar10;
  int iVar11;
  longlong lVar12;
  undefined8 local_14;
  uint local_8;
  
  pcVar8 = param_1;
  uVar1 = *(uint *)(param_1 + 0x10);
  if (*(int *)(param_1 + 4) < 0) {
    param_1[4] = '\0';
    param_1[5] = '\0';
    param_1[6] = '\0';
    param_1[7] = '\0';
  }
  local_14 = FUN_0086d9a1(uVar1,0,0,1);
  iVar10 = (int)((ulonglong)local_14 >> 0x20);
  pcVar4 = (char *)local_14;
  if ((iVar10 != 0 && -1 < local_14) || (-1 < local_14)) {
    if ((*(ushort *)(param_1 + 0xc) & 0x108) == 0) {
      return local_14 - *(int *)(param_1 + 4);
    }
    pcVar6 = *(char **)param_1;
    pcVar7 = *(char **)(param_1 + 8);
    local_8 = (int)pcVar6 - (int)pcVar7;
    if ((*(uint *)(param_1 + 0xc) & 3) == 0) {
      if ((*(uint *)(param_1 + 0xc) & 0x80) == 0) {
        pDVar5 = FUN_0085cbd7();
        *pDVar5 = 0x16;
        goto LAB_0086b929;
      }
    }
    else {
      pcVar9 = pcVar7;
      if ((*(byte *)((&DAT_009b4000)[(int)uVar1 >> 5] + 4 + (uVar1 & 0x1f) * 0x24) & 0x80) != 0) {
        for (; pcVar9 < pcVar6; pcVar9 = pcVar9 + 1) {
          if (*pcVar9 == '\n') {
            local_8 = local_8 + 1;
          }
        }
      }
    }
    if (local_14 == 0) {
      uVar3 = (ulonglong)local_8;
    }
    else {
      if ((param_1[0xc] & 1U) != 0) {
        if (*(int *)(param_1 + 4) == 0) {
          local_8 = 0;
        }
        else {
          pcVar6 = pcVar6 + (*(int *)(param_1 + 4) - (int)pcVar7);
          iVar11 = (uVar1 & 0x1f) * 0x24;
          if ((*(byte *)(iVar11 + 4 + (&DAT_009b4000)[(int)uVar1 >> 5]) & 0x80) != 0) {
            lVar12 = FUN_0086d9a1(uVar1,0,0,2);
            if (lVar12 == local_14) {
              pcVar7 = *(char **)(param_1 + 8);
              pcVar9 = pcVar6 + (int)pcVar7;
              param_1 = pcVar6;
              for (; pcVar7 < pcVar9; pcVar7 = pcVar7 + 1) {
                if (*pcVar7 == '\n') {
                  param_1 = param_1 + 1;
                }
              }
              bVar2 = pcVar8[0xd] & 0x20;
            }
            else {
              FUN_0086d9a1(uVar1,(LONG)pcVar4,iVar10,0);
              pcVar8 = (char *)0x200;
              if ((((char *)0x200 < pcVar6) || ((*(uint *)(param_1 + 0xc) & 8) == 0)) ||
                 ((*(uint *)(param_1 + 0xc) & 0x400) != 0)) {
                pcVar8 = *(char **)(param_1 + 0x18);
              }
              bVar2 = *(byte *)(iVar11 + 4 + (&DAT_009b4000)[(int)uVar1 >> 5]) & 4;
              param_1 = pcVar8;
            }
            pcVar6 = param_1;
            if (bVar2 != 0) {
              pcVar6 = param_1 + 1;
            }
          }
          param_1 = pcVar6;
          local_14 = CONCAT44(iVar10 - (uint)(pcVar4 < param_1),(int)pcVar4 - (int)param_1);
        }
      }
      uVar3 = CONCAT44(local_14._4_4_ + (uint)CARRY4(local_8,(uint)local_14),
                       local_8 + (uint)local_14);
    }
  }
  else {
LAB_0086b929:
    uVar3 = 0xffffffffffffffff;
  }
  return uVar3;
}

// ====== 0x0086ba13  FUN_0086ba13 ======
undefined4 __cdecl FUN_0086ba13(int *param_1,LONG param_2,LONG param_3,DWORD param_4)

{
  undefined4 uVar1;
  
  FUN_0085bf73((uint)param_1);
  uVar1 = FUN_0086ba42(param_1,param_2,param_3,param_4);
  FUN_0085bfc5((uint)param_1);
  return uVar1;
}

// ====== 0x0086ba42  FUN_0086ba42 ======
undefined4 __cdecl FUN_0086ba42(int *param_1,LONG param_2,LONG param_3,DWORD param_4)

{
  uint uVar1;
  DWORD *pDVar2;
  ulonglong uVar3;
  longlong lVar4;
  
  lVar4 = CONCAT44(param_3,param_2);
  if (((param_1[3] & 0x83U) == 0) || (((param_4 != 0 && (param_4 != 1)) && (param_4 != 2)))) {
    pDVar2 = FUN_0085cbd7();
    *pDVar2 = 0x16;
  }
  else {
    param_1[3] = param_1[3] & 0xffffffef;
    if (param_4 == 1) {
      uVar3 = FUN_0086b883((char *)param_1);
      lVar4 = uVar3 + lVar4;
      param_4 = 0;
    }
    param_3 = (LONG)((ulonglong)lVar4 >> 0x20);
    param_2 = (LONG)lVar4;
    FUN_0085c6ac(param_1);
    uVar1 = param_1[3];
    if ((uVar1 & 0x80) == 0) {
      if ((((uVar1 & 1) != 0) && ((uVar1 & 8) != 0)) && ((uVar1 & 0x400) == 0)) {
        param_1[6] = 0x200;
      }
    }
    else {
      param_1[3] = uVar1 & 0xfffffffc;
    }
    lVar4 = FUN_0086d9a1(param_1[4],param_2,param_3,param_4);
    if (lVar4 != -1) {
      return 0;
    }
  }
  return 0xffffffff;
}

// ====== 0x0086bad3  FUN_0086bad3 ======
uint __cdecl FUN_0086bad3(uint param_1,int *param_2)

{
  uint uVar1;
  char *pcVar2;
  int *piVar3;
  byte bVar4;
  undefined3 extraout_var;
  undefined *puVar5;
  uint uVar6;
  int *piVar7;
  
  piVar3 = param_2;
  uVar6 = param_2[3];
  uVar1 = param_2[4];
  if (((uVar6 & 0x82) == 0) || ((uVar6 & 0x40) != 0)) {
LAB_0086bbec:
    param_2[3] = uVar6 | 0x20;
  }
  else {
    if ((uVar6 & 1) != 0) {
      param_2[1] = 0;
      if ((uVar6 & 0x10) == 0) goto LAB_0086bbec;
      *param_2 = param_2[2];
      param_2[3] = uVar6 & 0xfffffffe;
    }
    uVar6 = param_2[3];
    param_2[1] = 0;
    param_2 = (int *)0x0;
    piVar3[3] = uVar6 & 0xffffffef | 2;
    if (((uVar6 & 0x10c) == 0) &&
       (((piVar3 != (int *)&DAT_00979ed0 && (piVar3 != (int *)&DAT_00979ef0)) ||
        (bVar4 = FUN_0086c72c(uVar1), CONCAT31(extraout_var,bVar4) == 0)))) {
      FUN_0086b817(piVar3);
    }
    uVar6 = param_1;
    if ((*(ushort *)(piVar3 + 3) & 0x108) == 0) {
      piVar7 = (int *)0x2;
      param_2 = (int *)FUN_00863e30(uVar1,(char *)&param_1,2);
    }
    else {
      pcVar2 = (char *)piVar3[2];
      piVar7 = (int *)(*piVar3 - (int)pcVar2);
      *piVar3 = (int)(pcVar2 + 2);
      piVar3[1] = piVar3[6] + -2;
      if ((int)piVar7 < 1) {
        if (uVar1 == 0xffffffff) {
          puVar5 = &DAT_0097ad98;
        }
        else {
          puVar5 = (undefined *)((&DAT_009b4000)[(int)uVar1 >> 5] + (uVar1 & 0x1f) * 0x24);
        }
        if ((puVar5[4] & 0x20) != 0) {
          FUN_00868150(uVar1,0,2);
        }
      }
      else {
        param_2 = (int *)FUN_00863e30(uVar1,pcVar2,(uint)piVar7);
      }
      *(short *)piVar3[2] = (short)param_1;
      uVar6 = param_1;
    }
    if (param_2 == piVar7) {
      return uVar6 & 0xffff;
    }
    piVar3[3] = piVar3[3] | 0x20;
  }
  return 0xffff;
}

// ====== 0x0086bbfa  FUN_0086bbfa ======
LPSTR __cdecl FUN_0086bbfa(LPSTR param_1,WCHAR param_2)

{
  LPSTR pCVar1;
  bool bVar2;
  
  InterlockedIncrement(&DAT_009b4334);
  bVar2 = DAT_009b4330 != 0;
  if (bVar2) {
    InterlockedDecrement(&DAT_009b4334);
    FUN_00860a61(0x13);
  }
  pCVar1 = FUN_0086bc53(param_1,param_2);
  if (bVar2) {
    FUN_00860ac2(0x13);
  }
  else {
    InterlockedDecrement(&DAT_009b4334);
  }
  return pCVar1;
}

// ====== 0x0086bc53  FUN_0086bc53 ======
LPSTR __cdecl FUN_0086bc53(LPSTR param_1,WCHAR param_2)

{
  LPSTR pCVar1;
  DWORD *pDVar2;
  
  pCVar1 = param_1;
  if (param_1 == (LPSTR)0x0) {
    return param_1;
  }
  if (DAT_009b3a68 == 0) {
    if ((ushort)param_2 < 0x100) {
      *param_1 = (CHAR)param_2;
      return (LPSTR)0x1;
    }
  }
  else {
    param_1 = (LPSTR)0x0;
    pCVar1 = (LPSTR)WideCharToMultiByte(CodePage_009b3a78,0x220,&param_2,1,pCVar1,
                                        cbMultiByte_0097a340,(LPCSTR)0x0,(LPBOOL)&param_1);
    if ((pCVar1 != (LPSTR)0x0) && (param_1 == (LPSTR)0x0)) {
      return pCVar1;
    }
  }
  pDVar2 = FUN_0085cbd7();
  *pDVar2 = 0x2a;
  return (LPSTR)0xffffffff;
}

// ====== 0x0086bcbc  FUN_0086bcbc ======
undefined2 __cdecl FUN_0086bcbc(undefined4 *param_1)

{
  undefined2 uVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  
  uVar2 = param_1[3];
  if (((uVar2 & 0x83) != 0) && ((uVar2 & 0x40) == 0)) {
    if ((uVar2 & 2) == 0) {
      param_1[3] = uVar2 | 1;
      if ((uVar2 & 0x10c) == 0) {
        FUN_0086b817(param_1);
      }
      else {
        *param_1 = param_1[2];
      }
      iVar3 = FUN_00867a9a(param_1[4],(char *)param_1[2],(char *)param_1[6]);
      param_1[1] = iVar3;
      if (((iVar3 != 0) && (iVar3 != 1)) && (iVar3 != -1)) {
        if ((param_1[3] & 0x82) == 0) {
          uVar2 = param_1[4];
          if (uVar2 == 0xffffffff) {
            puVar4 = &DAT_0097ad98;
          }
          else {
            puVar4 = (undefined *)((&DAT_009b4000)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
          }
          if ((puVar4[4] & 0x82) == 0x82) {
            param_1[3] = param_1[3] | 0x2000;
          }
        }
        if (((param_1[6] == 0x200) && ((param_1[3] & 8) != 0)) && ((param_1[3] & 0x400) == 0)) {
          param_1[6] = 0x1000;
        }
        param_1[1] = iVar3 + -2;
        uVar1 = *(undefined2 *)*param_1;
        *param_1 = (undefined2 *)*param_1 + 1;
        return uVar1;
      }
      param_1[3] = param_1[3] | (-(uint)(iVar3 != 0) & 0x10) + 0x10;
      param_1[1] = 0;
    }
    else {
      param_1[3] = uVar2 | 0x20;
    }
  }
  return 0xffff;
}

// ====== 0x0086bda3  FUN_0086bda3 ======
uint __cdecl FUN_0086bda3(LPWSTR param_1,byte *param_2,uint param_3)

{
  uint uVar1;
  bool bVar2;
  
  InterlockedIncrement(&DAT_009b4334);
  bVar2 = DAT_009b4330 != 0;
  if (bVar2) {
    InterlockedDecrement(&DAT_009b4334);
    FUN_00860a61(0x13);
  }
  uVar1 = FUN_0086be00(param_1,param_2,param_3);
  if (bVar2) {
    FUN_00860ac2(0x13);
  }
  else {
    InterlockedDecrement(&DAT_009b4334);
  }
  return uVar1;
}

// ====== 0x0086be00  FUN_0086be00 ======
uint __cdecl FUN_0086be00(LPWSTR param_1,byte *param_2,uint param_3)

{
  byte bVar1;
  int iVar2;
  DWORD *pDVar3;
  
  if ((param_2 != (byte *)0x0) && (param_3 != 0)) {
    bVar1 = *param_2;
    if (bVar1 != 0) {
      if (DAT_009b3a68 == 0) {
        if (param_1 != (LPWSTR)0x0) {
          *param_1 = (ushort)bVar1;
        }
        return 1;
      }
      if ((PTR_DAT_0097a134[(uint)bVar1 * 2 + 1] & 0x80) == 0) {
        iVar2 = MultiByteToWideChar(CodePage_009b3a78,9,(LPCSTR)param_2,1,param_1,
                                    (uint)(param_1 != (LPWSTR)0x0));
        if (iVar2 != 0) {
          return 1;
        }
      }
      else {
        if (1 < cbMultiByte_0097a340) {
          if ((int)param_3 < cbMultiByte_0097a340) goto LAB_0086be92;
          iVar2 = MultiByteToWideChar(CodePage_009b3a78,9,(LPCSTR)param_2,cbMultiByte_0097a340,
                                      param_1,(uint)(param_1 != (LPWSTR)0x0));
          if (iVar2 != 0) {
            return cbMultiByte_0097a340;
          }
        }
        if (((uint)cbMultiByte_0097a340 <= param_3) && (param_2[1] != 0)) {
          return cbMultiByte_0097a340;
        }
      }
LAB_0086be92:
      pDVar3 = FUN_0085cbd7();
      *pDVar3 = 0x2a;
      return 0xffffffff;
    }
    if (param_1 != (LPWSTR)0x0) {
      *param_1 = L'\0';
    }
  }
  return 0;
}

// ====== 0x0086bec9  FUN_0086bec9 ======
bool __cdecl FUN_0086bec9(void *param_1,UINT_PTR param_2)

{
  BOOL BVar1;
  
  BVar1 = IsBadReadPtr(param_1,param_2);
  return BVar1 == 0;
}

// ====== 0x0086bee5  FUN_0086bee5 ======
bool __cdecl FUN_0086bee5(LPVOID param_1,UINT_PTR param_2)

{
  BOOL BVar1;
  
  BVar1 = IsBadWritePtr(param_1,param_2);
  return BVar1 == 0;
}

// ====== 0x0086bf01  FUN_0086bf01 ======
bool __cdecl FUN_0086bf01(FARPROC param_1)

{
  BOOL BVar1;
  
  BVar1 = IsBadCodePtr(param_1);
  return BVar1 == 0;
}

// ====== 0x0086bf19  FUN_0086bf19 ======
void FUN_0086bf19(void)

{
  byte in_FPUStatusWord;
  
  FUN_0086c0d1(in_FPUStatusWord);
  return;
}

// ====== 0x0086bf2c  FUN_0086bf2c ======
void FUN_0086bf2c(void)

{
  byte in_FPUStatusWord;
  
  FUN_0086c0d1(in_FPUStatusWord);
  return;
}

// ====== 0x0086bf40  FUN_0086bf40 ======
uint __thiscall FUN_0086bf40(void *this,uint param_1,uint param_2)

{
  uint uVar1;
  undefined2 in_FPUControlWord;
  undefined4 local_8;
  
  local_8 = CONCAT22((short)((uint)this >> 0x10),in_FPUControlWord);
  uVar1 = FUN_0086bfb6(local_8);
  uVar1 = uVar1 & ~param_2 | param_1 & param_2;
  FUN_0086c048(uVar1);
  return uVar1;
}

// ====== 0x0086bf75  FUN_0086bf75 ======
void __thiscall FUN_0086bf75(void *this,uint param_1,uint param_2)

{
  FUN_0086bf40(this,param_1,param_2 & 0xfff7ffff);
  return;
}

// ====== 0x0086bfb6  FUN_0086bfb6 ======
uint __cdecl FUN_0086bfb6(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = 0;
  if ((param_1 & 1) != 0) {
    uVar1 = 0x10;
  }
  if ((param_1 & 4) != 0) {
    uVar1 = uVar1 | 8;
  }
  if ((param_1 & 8) != 0) {
    uVar1 = uVar1 | 4;
  }
  if ((param_1 & 0x10) != 0) {
    uVar1 = uVar1 | 2;
  }
  if ((param_1 & 0x20) != 0) {
    uVar1 = uVar1 | 1;
  }
  if ((param_1 & 2) != 0) {
    uVar1 = uVar1 | 0x80000;
  }
  uVar2 = param_1 & 0xc00;
  if (uVar2 != 0) {
    if (uVar2 == 0x400) {
      uVar1 = uVar1 | 0x100;
    }
    else if (uVar2 == 0x800) {
      uVar1 = uVar1 | 0x200;
    }
    else if (uVar2 == 0xc00) {
      uVar1 = uVar1 | 0x300;
    }
  }
  if ((param_1 & 0x300) == 0) {
    uVar1 = uVar1 | 0x20000;
  }
  else if ((param_1 & 0x300) == 0x200) {
    uVar1 = uVar1 | 0x10000;
  }
  if ((param_1 & 0x1000) != 0) {
    uVar1 = uVar1 | 0x40000;
  }
  return uVar1;
}

// ====== 0x0086c048  FUN_0086c048 ======
uint __cdecl FUN_0086c048(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = (uint)((param_1 & 0x10) != 0);
  if ((param_1 & 8) != 0) {
    uVar1 = uVar1 | 4;
  }
  if ((param_1 & 4) != 0) {
    uVar1 = uVar1 | 8;
  }
  if ((param_1 & 2) != 0) {
    uVar1 = uVar1 | 0x10;
  }
  if ((param_1 & 1) != 0) {
    uVar1 = uVar1 | 0x20;
  }
  if ((param_1 & 0x80000) != 0) {
    uVar1 = uVar1 | 2;
  }
  uVar2 = param_1 & 0x300;
  if (uVar2 != 0) {
    if (uVar2 == 0x100) {
      uVar1 = uVar1 | 0x400;
    }
    else if (uVar2 == 0x200) {
      uVar1 = uVar1 | 0x800;
    }
    else if (uVar2 == 0x300) {
      uVar1 = uVar1 | 0xc00;
    }
  }
  if ((param_1 & 0x30000) == 0) {
    uVar1 = uVar1 | 0x300;
  }
  else if ((param_1 & 0x30000) == 0x10000) {
    uVar1 = uVar1 | 0x200;
  }
  if ((param_1 & 0x40000) != 0) {
    uVar1 = uVar1 | 0x1000;
  }
  return uVar1;
}

// ====== 0x0086c0d1  FUN_0086c0d1 ======
uint __cdecl FUN_0086c0d1(byte param_1)

{
  uint uVar1;
  
  uVar1 = 0;
  if ((param_1 & 1) != 0) {
    uVar1 = 0x10;
  }
  if ((param_1 & 4) != 0) {
    uVar1 = uVar1 | 8;
  }
  if ((param_1 & 8) != 0) {
    uVar1 = uVar1 | 4;
  }
  if ((param_1 & 0x10) != 0) {
    uVar1 = uVar1 | 2;
  }
  if ((param_1 & 0x20) != 0) {
    uVar1 = uVar1 | 1;
  }
  if ((param_1 & 2) != 0) {
    uVar1 = uVar1 | 0x80000;
  }
  return uVar1;
}

// ====== 0x0086c106  FUN_0086c106 ======
undefined4 __cdecl FUN_0086c106(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  
  if ((*(uint *)(param_1 + (param_2 / 0x20) * 4) & ~(-1 << (0x1fU - (char)(param_2 % 0x20) & 0x1f)))
      != 0) {
    return 0;
  }
  iVar2 = param_2 / 0x20 + 1;
  if (iVar2 < 3) {
    piVar1 = (int *)(param_1 + iVar2 * 4);
    do {
      if (*piVar1 != 0) {
        return 0;
      }
      iVar2 = iVar2 + 1;
      piVar1 = piVar1 + 1;
    } while (iVar2 < 3);
  }
  return 1;
}

// ====== 0x0086c14f  FUN_0086c14f ======
void __cdecl FUN_0086c14f(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  uint *puVar3;
  
  puVar3 = (uint *)(param_1 + (param_2 / 0x20) * 4);
  iVar1 = FUN_0086da97(*puVar3,1 << (0x1fU - (char)(param_2 % 0x20) & 0x1f),puVar3);
  iVar2 = param_2 / 0x20 + -1;
  if (-1 < iVar2) {
    puVar3 = (uint *)(param_1 + iVar2 * 4);
    do {
      if (iVar1 == 0) {
        return;
      }
      iVar1 = FUN_0086da97(*puVar3,1,puVar3);
      iVar2 = iVar2 + -1;
      puVar3 = puVar3 + -1;
    } while (-1 < iVar2);
  }
  return;
}

// ====== 0x0086c1a5  FUN_0086c1a5 ======
undefined4 __cdecl FUN_0086c1a5(int param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  byte bVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 local_8;
  
  local_8 = 0;
  puVar1 = (uint *)(param_1 + (param_2 / 0x20) * 4);
  bVar3 = 0x1f - (char)(param_2 % 0x20);
  if (((*puVar1 & 1 << (bVar3 & 0x1f)) != 0) &&
     (iVar2 = FUN_0086c106(param_1,param_2 + 1), iVar2 == 0)) {
    local_8 = FUN_0086c14f(param_1,param_2 + -1);
  }
  *puVar1 = *puVar1 & -1 << (bVar3 & 0x1f);
  iVar2 = param_2 / 0x20 + 1;
  if (iVar2 < 3) {
    puVar5 = (undefined4 *)(param_1 + iVar2 * 4);
    for (iVar4 = 3 - iVar2; iVar4 != 0; iVar4 = iVar4 + -1) {
      *puVar5 = 0;
      puVar5 = puVar5 + 1;
    }
  }
  return local_8;
}

// ====== 0x0086c231  FUN_0086c231 ======
void __cdecl FUN_0086c231(int param_1,undefined4 *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_1 - (int)param_2;
  iVar2 = 3;
  do {
    *(undefined4 *)(iVar1 + (int)param_2) = *param_2;
    param_2 = param_2 + 1;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  return;
}

// ====== 0x0086c24c  FUN_0086c24c ======
void __cdecl FUN_0086c24c(undefined4 *param_1)

{
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  return;
}

// ====== 0x0086c258  FUN_0086c258 ======
undefined4 __cdecl FUN_0086c258(int *param_1)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    if (*param_1 != 0) {
      return 0;
    }
    iVar1 = iVar1 + 1;
    param_1 = param_1 + 1;
  } while (iVar1 < 3);
  return 1;
}

// ====== 0x0086c273  FUN_0086c273 ======
void __cdecl FUN_0086c273(uint *param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  uint *puVar6;
  int local_8;
  
  local_8 = 3;
  iVar2 = (int)param_2 / 0x20;
  iVar5 = (int)param_2 % 0x20;
  param_2 = 0;
  bVar3 = (byte)iVar5;
  puVar6 = param_1;
  do {
    uVar1 = *puVar6;
    *puVar6 = uVar1 >> (bVar3 & 0x1f) | param_2;
    puVar6 = puVar6 + 1;
    param_2 = (uVar1 & ~(-1 << (bVar3 & 0x1f))) << (0x20 - bVar3 & 0x1f);
    local_8 = local_8 + -1;
  } while (local_8 != 0);
  iVar5 = 2;
  iVar4 = 8;
  do {
    if (iVar5 < iVar2) {
      *(undefined4 *)(iVar4 + (int)param_1) = 0;
    }
    else {
      *(undefined4 *)(iVar4 + (int)param_1) = *(undefined4 *)(iVar4 + iVar2 * -4 + (int)param_1);
    }
    iVar5 = iVar5 + -1;
    iVar4 = iVar4 + -4;
  } while (-1 < iVar4);
  return;
}

// ====== 0x0086c300  FUN_0086c300 ======
undefined4 __cdecl FUN_0086c300(ushort *param_1,uint *param_2,int *param_3)

{
  ushort uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 local_1c [3];
  uint local_10;
  uint local_c;
  int local_8;
  
  uVar1 = param_1[5];
  local_10 = *(uint *)(param_1 + 3);
  local_c = *(uint *)(param_1 + 1);
  uVar3 = uVar1 & 0x7fff;
  iVar4 = uVar3 - 0x3fff;
  local_8 = (uint)*param_1 << 0x10;
  if (iVar4 == -0x3fff) {
    iVar4 = 0;
    iVar2 = FUN_0086c258((int *)&local_10);
    if (iVar2 != 0) {
LAB_0086c42c:
      uVar5 = 0;
      goto LAB_0086c42e;
    }
    FUN_0086c24c(&local_10);
  }
  else {
    FUN_0086c231((int)local_1c,&local_10);
    iVar2 = FUN_0086c1a5((int)&local_10,param_3[2]);
    if (iVar2 != 0) {
      iVar4 = uVar3 - 0x3ffe;
    }
    iVar2 = param_3[1];
    if (iVar4 < iVar2 - param_3[2]) {
      FUN_0086c24c(&local_10);
    }
    else {
      if (iVar2 < iVar4) {
        if (*param_3 <= iVar4) {
          FUN_0086c24c(&local_10);
          local_10 = local_10 | 0x80000000;
          FUN_0086c273(&local_10,param_3[3]);
          iVar4 = param_3[5] + *param_3;
          uVar5 = 1;
          goto LAB_0086c42e;
        }
        local_10 = local_10 & 0x7fffffff;
        iVar4 = param_3[5] + iVar4;
        FUN_0086c273(&local_10,param_3[3]);
        goto LAB_0086c42c;
      }
      FUN_0086c231((int)&local_10,local_1c);
      FUN_0086c273(&local_10,iVar2 - iVar4);
      FUN_0086c1a5((int)&local_10,param_3[2]);
      FUN_0086c273(&local_10,param_3[3] + 1);
    }
  }
  iVar4 = 0;
  uVar5 = 2;
LAB_0086c42e:
  local_10 = iVar4 << (0x1fU - (char)param_3[3] & 0x1f) |
             -(uint)((uVar1 & 0x8000) != 0) & 0x80000000 | local_10;
  if (param_3[4] == 0x40) {
    param_2[1] = local_10;
    *param_2 = local_c;
  }
  else if (param_3[4] == 0x20) {
    *param_2 = local_10;
  }
  return uVar5;
}

// ====== 0x0086c46c  FUN_0086c46c ======
void __cdecl FUN_0086c46c(ushort *param_1,uint *param_2)

{
  FUN_0086c300(param_1,param_2,(int *)&DAT_0097d818);
  return;
}

// ====== 0x0086c482  FUN_0086c482 ======
void __cdecl FUN_0086c482(ushort *param_1,uint *param_2)

{
  FUN_0086c300(param_1,param_2,(int *)&DAT_0097d830);
  return;
}

// ====== 0x0086c498  FUN_0086c498 ======
undefined4 __cdecl FUN_0086c498(ushort *param_1,undefined4 *param_2)

{
  ushort uVar1;
  int iVar2;
  ushort uVar3;
  undefined4 local_14;
  undefined4 local_10;
  int local_c;
  undefined4 local_8;
  
  local_8 = 0;
  uVar1 = param_1[5];
  local_14 = *(undefined4 *)(param_1 + 3);
  local_10 = *(undefined4 *)(param_1 + 1);
  local_c = (uint)*param_1 << 0x10;
  uVar3 = uVar1 & 0x7fff;
  iVar2 = FUN_0086c1a5((int)&local_14,0x40);
  if (iVar2 != 0) {
    local_14 = 0x80000000;
    uVar3 = uVar3 + 1;
  }
  if (uVar3 == 0x7fff) {
    local_8 = 1;
  }
  param_2[1] = local_14;
  *(ushort *)(param_2 + 2) = uVar1 & 0x8000 | uVar3;
  *param_2 = local_10;
  return local_8;
}

// ====== 0x0086c512  FUN_0086c512 ======
void __thiscall FUN_0086c512(void *this,uint *param_1,byte *param_2)

{
  ushort local_10 [6];
  
  FUN_0086cb94(this,local_10,(int *)&param_2,param_2,0,0,0,0);
  FUN_0086c46c(local_10,param_1);
  return;
}

// ====== 0x0086c53f  FUN_0086c53f ======
void __thiscall FUN_0086c53f(void *this,undefined4 *param_1,byte *param_2)

{
  ushort local_10 [6];
  
  FUN_0086cb94(this,local_10,(int *)&param_2,param_2,1,0,0,0);
  FUN_0086c498(local_10,param_1);
  return;
}

// ====== 0x0086c56d  FUN_0086c56d ======
void __thiscall FUN_0086c56d(void *this,uint *param_1,byte *param_2)

{
  ushort local_10 [6];
  
  FUN_0086cb94(this,local_10,(int *)&param_2,param_2,0,0,0,0);
  FUN_0086c482(local_10,param_1);
  return;
}

// ====== 0x0086c59a  FUN_0086c59a ======
void __cdecl FUN_0086c59a(char *param_1,int param_2,int param_3)

{
  char *_Str;
  char *pcVar1;
  char *pcVar2;
  size_t sVar3;
  char *pcVar4;
  char cVar5;
  
  pcVar1 = param_1;
  pcVar4 = *(char **)(param_3 + 0xc);
  _Str = param_1 + 1;
  *param_1 = '0';
  pcVar2 = _Str;
  if (0 < param_2) {
    param_1 = (char *)param_2;
    param_2 = 0;
    do {
      cVar5 = *pcVar4;
      if (cVar5 == '\0') {
        cVar5 = '0';
      }
      else {
        pcVar4 = pcVar4 + 1;
      }
      *pcVar2 = cVar5;
      pcVar2 = pcVar2 + 1;
      param_1 = param_1 + -1;
    } while (param_1 != (char *)0x0);
  }
  *pcVar2 = '\0';
  if ((-1 < param_2) && ('4' < *pcVar4)) {
    while (pcVar2 = pcVar2 + -1, *pcVar2 == '9') {
      *pcVar2 = '0';
    }
    *pcVar2 = *pcVar2 + '\x01';
  }
  if (*pcVar1 == '1') {
    *(int *)(param_3 + 4) = *(int *)(param_3 + 4) + 1;
  }
  else {
    sVar3 = _strlen(_Str);
    FUN_00859530((undefined4 *)pcVar1,(undefined4 *)_Str,sVar3 + 1);
  }
  return;
}

// ====== 0x0086c611  FUN_0086c611 ======
int * __cdecl FUN_0086c611(undefined4 param_1,undefined4 param_2,int *param_3,uint *param_4)

{
  int *piVar1;
  uint *puVar2;
  int iVar3;
  undefined4 in_stack_ffffffbc;
  undefined2 uVar4;
  short local_2c;
  char local_2a;
  uint local_28 [6];
  uint local_10;
  uint uStack_c;
  undefined2 uStack_8;
  
  uVar4 = (undefined2)((uint)in_stack_ffffffbc >> 0x10);
  FUN_0086c66d(&local_10,&param_1);
  iVar3 = FUN_0086dc38(local_10,uStack_c,CONCAT22(uVar4,uStack_8),0x11,0,&local_2c);
  puVar2 = param_4;
  piVar1 = param_3;
  param_3[2] = iVar3;
  *param_3 = (int)local_2a;
  param_3[1] = (int)local_2c;
  FUN_00863840(param_4,local_28);
  piVar1[3] = (int)puVar2;
  return piVar1;
}

// ====== 0x0086c66d  FUN_0086c66d ======
void __cdecl FUN_0086c66d(uint *param_1,uint *param_2)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint local_8;
  
  uVar1 = *(ushort *)((int)param_2 + 6);
  uVar3 = (uVar1 & 0x7ff0) >> 4;
  uVar2 = *param_2;
  local_8 = 0x80000000;
  if (uVar3 == 0) {
    if (((param_2[1] & 0xfffff) == 0) && (uVar2 == 0)) {
      param_1[1] = 0;
      *param_1 = 0;
      *(undefined2 *)(param_1 + 2) = 0;
      return;
    }
    iVar4 = 0x3c01;
    local_8 = 0;
  }
  else if (uVar3 == 0x7ff) {
    iVar4 = 0x7fff;
  }
  else {
    iVar4 = uVar3 + 0x3c00;
  }
  local_8 = uVar2 >> 0x15 | (param_2[1] & 0xfffff) << 0xb | local_8;
  param_1[1] = local_8;
  *param_1 = uVar2 << 0xb;
  while ((local_8 & 0x80000000) == 0) {
    local_8 = *param_1 >> 0x1f | local_8 * 2;
    *param_1 = *param_1 * 2;
    param_1[1] = local_8;
    iVar4 = iVar4 + 0xffff;
  }
  *(ushort *)(param_1 + 2) = uVar1 & 0x8000 | (ushort)iVar4;
  return;
}

// ====== 0x0086c723  FUN_0086c723 ======
void FUN_0086c723(void)

{
  __amsg_exit(2);
  return;
}

// ====== 0x0086c72c  FUN_0086c72c ======
byte __cdecl FUN_0086c72c(uint param_1)

{
  if (uNumber_009b4100 <= param_1) {
    return 0;
  }
  return *(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 0x40;
}

// ====== 0x0086c755  FUN_0086c755 ======
void __cdecl FUN_0086c755(uint param_1,int *param_2,ushort *param_3)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  uint uVar3;
  uint local_5c [10];
  undefined8 local_34;
  uint local_24;
  
  param_3 = (ushort *)(uint)*param_3;
  iVar2 = *param_2;
  if (iVar2 == 1) {
LAB_0086c79a:
    uVar3 = 8;
  }
  else if (iVar2 == 2) {
    uVar3 = 4;
  }
  else if (iVar2 == 3) {
    uVar3 = 0x11;
  }
  else if (iVar2 == 4) {
    uVar3 = 0x12;
  }
  else {
    if (iVar2 == 5) goto LAB_0086c79a;
    if (iVar2 == 7) {
      *param_2 = 1;
      goto LAB_0086c7f0;
    }
    if (iVar2 != 8) goto LAB_0086c7f0;
    uVar3 = 0x10;
  }
  bVar1 = FUN_00864d9a(uVar3,(double *)(param_2 + 6),(uint)param_3);
  if (CONCAT31(extraout_var,bVar1) == 0) {
    if (((param_1 == 0x10) || (param_1 == 0x16)) || (param_1 == 0x1d)) {
      local_34 = *(undefined8 *)(param_2 + 4);
      local_24 = local_24 & 0xffffffe3 | 3;
    }
    else {
      local_24 = local_24 & 0xfffffffe;
    }
    FUN_00864ae7(local_5c,(uint *)&param_3,uVar3,param_1,(undefined8 *)(param_2 + 2),
                 (undefined8 *)(param_2 + 6));
  }
LAB_0086c7f0:
  FUN_0086528a();
  if (((*param_2 != 8) && (DAT_0097d848 == 0)) && (iVar2 = FUN_0086d0a1(), iVar2 != 0)) {
    return;
  }
  FUN_00865039(*param_2);
  return;
}

// ====== 0x0086c83c  FUN_0086c83c ======
uint __cdecl FUN_0086c83c(LPCSTR param_1,uint param_2,uint param_3,uint param_4)

{
  byte *pbVar1;
  uint uVar2;
  uint uVar3;
  DWORD *pDVar4;
  HANDLE hFile;
  DWORD DVar5;
  int iVar6;
  int iVar7;
  bool bVar8;
  _SECURITY_ATTRIBUTES local_20;
  DWORD local_14;
  DWORD local_10;
  DWORD local_c;
  byte local_5;
  
  bVar8 = (param_2 & 0x80) == 0;
  local_20.nLength = 0xc;
  local_20.lpSecurityDescriptor = (LPVOID)0x0;
  if (bVar8) {
    local_5 = 0;
  }
  else {
    local_5 = 0x10;
  }
  local_20.bInheritHandle = (BOOL)bVar8;
  if (((param_2 & 0x8000) == 0) && (((param_2 & 0x4000) != 0 || (DAT_009b3cf4 != 0x8000)))) {
    local_5 = local_5 | 0x80;
  }
  uVar2 = param_2 & 3;
  if (uVar2 == 0) {
    local_10 = 0x80000000;
  }
  else if (uVar2 == 1) {
    local_10 = 0x40000000;
  }
  else {
    if (uVar2 != 2) goto LAB_0086c940;
    local_10 = 0xc0000000;
  }
  if (param_3 == 0x10) {
    local_14 = 0;
  }
  else if (param_3 == 0x20) {
    local_14 = 1;
  }
  else if (param_3 == 0x30) {
    local_14 = 2;
  }
  else {
    if (param_3 != 0x40) goto LAB_0086c940;
    local_14 = 3;
  }
  uVar2 = param_2 & 0x700;
  if (uVar2 < 0x401) {
    if ((uVar2 == 0x400) || (uVar2 == 0)) {
      local_c = 3;
    }
    else if (uVar2 == 0x100) {
      local_c = 4;
    }
    else {
      if (uVar2 == 0x200) goto LAB_0086c95a;
      if (uVar2 != 0x300) goto LAB_0086c940;
      local_c = 2;
    }
  }
  else {
    if (uVar2 != 0x500) {
      if (uVar2 == 0x600) {
LAB_0086c95a:
        local_c = 5;
        goto LAB_0086c96a;
      }
      if (uVar2 != 0x700) {
LAB_0086c940:
        pDVar4 = FUN_0085cbd7();
        *pDVar4 = 0x16;
        pDVar4 = FUN_0085cbe0();
        *pDVar4 = 0;
        return 0xffffffff;
      }
    }
    local_c = 1;
  }
LAB_0086c96a:
  uVar2 = 0x80;
  if (((param_2 & 0x100) != 0) && ((~DAT_009b38f4 & param_4 & 0x80) == 0)) {
    uVar2 = 1;
  }
  if ((param_2 & 0x40) != 0) {
    uVar2 = uVar2 | 0x4000000;
    local_10 = CONCAT13(local_10._3_1_,0x10000);
  }
  if ((param_2 & 0x1000) != 0) {
    uVar2 = uVar2 | 0x100;
  }
  if ((param_2 & 0x20) == 0) {
    if ((param_2 & 0x10) != 0) {
      uVar2 = uVar2 | 0x10000000;
    }
  }
  else {
    uVar2 = uVar2 | 0x8000000;
  }
  uVar3 = FUN_00867dc8();
  if (uVar3 == 0xffffffff) {
    pDVar4 = FUN_0085cbd7();
    *pDVar4 = 0x18;
    pDVar4 = FUN_0085cbe0();
    *pDVar4 = 0;
    return 0xffffffff;
  }
  hFile = CreateFileA(param_1,local_10,local_14,&local_20,local_c,uVar2,(HANDLE)0x0);
  if (hFile != (HANDLE)0xffffffff) {
    DVar5 = GetFileType(hFile);
    if (DVar5 != 0) {
      if (DVar5 == 2) {
        local_5 = local_5 | 0x40;
      }
      else if (DVar5 == 3) {
        local_5 = local_5 | 8;
      }
      FUN_00867eeb(uVar3,hFile);
      iVar7 = (uVar3 & 0x1f) * 0x24;
      param_1._3_1_ = local_5 & 0x48;
      *(byte *)((&DAT_009b4000)[(int)uVar3 >> 5] + 4 + iVar7) = local_5 | 1;
      if ((((local_5 & 0x48) == 0) && ((local_5 & 0x80) != 0)) && ((param_2 & 2) != 0)) {
        local_14 = FUN_008681b5(uVar3,-1,2);
        if (local_14 == 0xffffffff) {
          pDVar4 = FUN_0085cbe0();
          if (*pDVar4 == 0x83) goto LAB_0086cae4;
        }
        else {
          param_3 = param_3 & 0xffffff;
          iVar6 = FUN_00867aff(uVar3,(char *)((int)&param_3 + 3),(char *)0x1);
          if ((((iVar6 != 0) || (param_3._3_1_ != '\x1a')) ||
              (iVar6 = FUN_0085f8cb(uVar3,local_14), iVar6 != -1)) &&
             (DVar5 = FUN_008681b5(uVar3,0,0), DVar5 != 0xffffffff)) goto LAB_0086cae4;
        }
        FUN_00863930(uVar3);
        uVar2 = 0xffffffff;
      }
      else {
LAB_0086cae4:
        uVar2 = uVar3;
        if ((param_1._3_1_ == 0) && ((param_2 & 8) != 0)) {
          pbVar1 = (byte *)((&DAT_009b4000)[(int)uVar3 >> 5] + 4 + iVar7);
          *pbVar1 = *pbVar1 | 0x20;
        }
      }
      goto LAB_0086cafd;
    }
    CloseHandle(hFile);
  }
  DVar5 = GetLastError();
  FUN_0085cb64(DVar5);
  uVar2 = 0xffffffff;
LAB_0086cafd:
  FUN_0086812e(uVar3);
  return uVar2;
}

// ====== 0x0086cb0b  FUN_0086cb0b ======
int __cdecl FUN_0086cb0b(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  HMODULE hModule;
  int iVar1;
  
  iVar1 = 0;
  if (DAT_009b3cdc == (FARPROC)0x0) {
    hModule = LoadLibraryA("user32.dll");
    if (hModule != (HMODULE)0x0) {
      DAT_009b3cdc = GetProcAddress(hModule,"MessageBoxA");
      if (DAT_009b3cdc != (FARPROC)0x0) {
        DAT_009b3ce0 = GetProcAddress(hModule,"GetActiveWindow");
        DAT_009b3ce4 = GetProcAddress(hModule,"GetLastActivePopup");
        goto LAB_0086cb5a;
      }
    }
    iVar1 = 0;
  }
  else {
LAB_0086cb5a:
    if (DAT_009b3ce0 != (FARPROC)0x0) {
      iVar1 = (*DAT_009b3ce0)();
      if ((iVar1 != 0) && (DAT_009b3ce4 != (FARPROC)0x0)) {
        iVar1 = (*DAT_009b3ce4)(iVar1);
      }
    }
    iVar1 = (*DAT_009b3cdc)(iVar1,param_1,param_2,param_3);
  }
  return iVar1;
}

// ====== 0x0086d065  FUN_0086d065 ======
uint __thiscall FUN_0086d065(void *this,undefined4 *param_1,int *param_2,byte *param_3,int param_4)

{
  uint uVar1;
  int iVar2;
  ushort local_10 [6];
  
  uVar1 = FUN_0086cb94(this,local_10,param_2,param_3,param_4,0,0,0);
  iVar2 = FUN_0086c498(local_10,param_1);
  if (iVar2 == 1) {
    uVar1 = uVar1 | 2;
  }
  return uVar1;
}

// ====== 0x0086cb94  FUN_0086cb94 ======
undefined4 __thiscall
FUN_0086cb94(void *this,ushort *param_1,int *param_2,byte *param_3,int param_4,int param_5,
            int param_6,int param_7)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  char *pcVar4;
  int iVar5;
  byte bVar6;
  byte *pbVar7;
  byte *pbVar8;
  int iVar9;
  byte *pbVar10;
  char local_60 [23];
  char local_49;
  ushort local_44;
  undefined2 uStack_42;
  undefined2 uStack_40;
  byte *local_3e;
  ushort local_3a;
  int local_34;
  int local_30;
  undefined4 local_2c;
  int local_28;
  int local_24;
  byte *local_20;
  int local_1c;
  undefined4 local_18;
  int local_14;
  char *local_10;
  int local_c;
  uint local_8;
  
  local_10 = local_60;
  local_2c = 0;
  local_1c = 1;
  local_8 = 0;
  local_14 = 0;
  local_28 = 0;
  local_24 = 0;
  local_30 = 0;
  local_34 = 0;
  local_20 = (byte *)0x0;
  local_c = 0;
  local_18 = 0;
  pbVar8 = param_3;
  while( true ) {
    bVar6 = *pbVar8;
    this = (void *)CONCAT31((int3)((uint)this >> 8),bVar6);
    if ((((bVar6 != 0x20) && (bVar6 != 9)) && (bVar6 != 10)) && (bVar6 != 0xd)) break;
    pbVar8 = pbVar8 + 1;
  }
  iVar1 = 4;
  iVar9 = 0;
  iVar5 = local_14;
LAB_0086cbeb:
  local_14 = iVar5;
  pbVar7 = pbVar8;
  iVar5 = 1;
  bVar6 = *pbVar7;
  pbVar8 = pbVar7 + 1;
  iVar2 = local_14;
  switch(iVar9) {
  case 0:
    if (('0' < (char)bVar6) && ((char)bVar6 < ':')) {
LAB_0086cc08:
      local_14 = iVar2;
      iVar9 = 3;
      goto LAB_0086ce2d;
    }
    if (bVar6 == DAT_0097a344) goto LAB_0086cc17;
    if (bVar6 == 0x2b) {
      local_2c = 0;
      iVar9 = 2;
      iVar5 = local_14;
    }
    else if (bVar6 == 0x2d) {
      local_2c = 0x8000;
      iVar9 = 2;
      iVar5 = local_14;
    }
    else {
      iVar9 = iVar5;
      iVar5 = local_14;
      if (bVar6 != 0x30) goto LAB_0086cf07;
    }
    goto LAB_0086cbeb;
  case 1:
    local_14 = 1;
    if (('0' < (char)bVar6) && (iVar2 = iVar5, (char)bVar6 < ':')) goto LAB_0086cc08;
    iVar9 = iVar1;
    if (bVar6 != DAT_0097a344) {
      iVar9 = iVar5;
      if ((bVar6 == 0x2b) || (iVar9 = local_14, bVar6 == 0x2d)) goto LAB_0086cc9c;
      iVar9 = iVar5;
      local_14 = iVar5;
      if (bVar6 != 0x30) goto LAB_0086cc75;
    }
    goto LAB_0086cbeb;
  case 2:
    if (('0' < (char)bVar6) && ((char)bVar6 < ':')) goto LAB_0086cc08;
    if (bVar6 == DAT_0097a344) {
LAB_0086cc17:
      iVar9 = 5;
      iVar5 = local_14;
    }
    else {
      iVar9 = iVar5;
      pbVar7 = param_3;
      iVar5 = local_14;
      if (bVar6 != 0x30) goto LAB_0086cf0c;
    }
    goto LAB_0086cbeb;
  case 3:
    local_14 = iVar5;
    while( true ) {
      if (cbMultiByte_0097a340 < 2) {
        uVar3 = (byte)PTR_DAT_0097a134[(uint)bVar6 * 2] & 4;
        this = PTR_DAT_0097a134;
      }
      else {
        pbVar7 = (byte *)0x4;
        uVar3 = FUN_0085c91d(this,(uint)bVar6,4);
        this = pbVar7;
      }
      if (uVar3 == 0) break;
      if (local_8 < 0x19) {
        local_8 = local_8 + 1;
        pcVar4 = local_10 + 1;
        *local_10 = bVar6 - 0x30;
        local_10 = pcVar4;
      }
      else {
        local_c = local_c + 1;
      }
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
    }
    iVar9 = iVar1;
    iVar5 = local_14;
    if (bVar6 != DAT_0097a344) goto LAB_0086cd89;
    goto LAB_0086cbeb;
  case 4:
    local_14 = 1;
    local_28 = 1;
    iVar9 = iVar5;
    if (local_8 == 0) {
      while (iVar5 = local_28, iVar9 = local_14, bVar6 == 0x30) {
        local_c = local_c + -1;
        bVar6 = *pbVar8;
        pbVar8 = pbVar8 + 1;
      }
    }
    while( true ) {
      local_14 = iVar9;
      local_28 = iVar5;
      if (cbMultiByte_0097a340 < 2) {
        uVar3 = (byte)PTR_DAT_0097a134[(uint)bVar6 * 2] & 4;
        this = PTR_DAT_0097a134;
      }
      else {
        pbVar7 = (byte *)0x4;
        uVar3 = FUN_0085c91d(this,(uint)bVar6,4);
        this = pbVar7;
      }
      if (uVar3 == 0) break;
      if (local_8 < 0x19) {
        local_8 = local_8 + 1;
        local_c = local_c + -1;
        pcVar4 = local_10 + 1;
        *local_10 = bVar6 - 0x30;
        local_10 = pcVar4;
      }
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
      iVar5 = local_28;
      iVar9 = local_14;
    }
LAB_0086cd89:
    iVar9 = local_14;
    if ((bVar6 == 0x2b) || (bVar6 == 0x2d)) {
LAB_0086cc9c:
      local_14 = iVar9;
      iVar9 = 0xb;
      pbVar8 = pbVar8 + -1;
      iVar5 = local_14;
    }
    else {
LAB_0086cc75:
      if (((char)bVar6 < 'D') ||
         (('E' < (char)bVar6 && (((char)bVar6 < 'd' || ('e' < (char)bVar6)))))) goto LAB_0086cf07;
      iVar9 = 6;
      iVar5 = local_14;
    }
    goto LAB_0086cbeb;
  case 5:
    local_28 = iVar5;
    if (cbMultiByte_0097a340 < 2) {
      uVar3 = (byte)PTR_DAT_0097a134[(uint)bVar6 * 2] & 4;
      this = PTR_DAT_0097a134;
    }
    else {
      pbVar7 = (byte *)0x4;
      uVar3 = FUN_0085c91d(this,(uint)bVar6,4);
      this = pbVar7;
    }
    iVar9 = iVar1;
    pbVar7 = param_3;
    if (uVar3 != 0) goto LAB_0086ce2d;
    goto LAB_0086cf0c;
  case 6:
    pbVar7 = pbVar7 + -1;
    this = pbVar7;
    param_3 = pbVar7;
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) {
      if (bVar6 == 0x2b) goto LAB_0086ce62;
      if (bVar6 == 0x2d) goto LAB_0086ce56;
      if (bVar6 != 0x30) goto LAB_0086cf0c;
LAB_0086cdfb:
      iVar9 = 8;
      iVar5 = local_14;
      goto LAB_0086cbeb;
    }
    break;
  case 7:
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) {
      pbVar7 = param_3;
      if (bVar6 == 0x30) goto LAB_0086cdfb;
      goto LAB_0086cf0c;
    }
    break;
  case 8:
    local_24 = 1;
    while (bVar6 == 0x30) {
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
    }
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) goto LAB_0086cf07;
    break;
  case 9:
    local_24 = 1;
    pbVar7 = (byte *)0x0;
    goto LAB_0086ce8d;
  default:
    goto switchD_0086cbf7_caseD_a;
  case 0xb:
    if (param_7 != 0) {
      if (bVar6 == 0x2b) {
LAB_0086ce62:
        iVar9 = 7;
        this = pbVar7;
        param_3 = pbVar7;
        iVar5 = local_14;
      }
      else {
        param_3 = pbVar7;
        if (bVar6 != 0x2d) goto LAB_0086cf0c;
LAB_0086ce56:
        local_1c = -1;
        iVar9 = 7;
        this = pbVar7;
        param_3 = pbVar7;
        iVar5 = local_14;
      }
      goto LAB_0086cbeb;
    }
    iVar9 = 10;
    pbVar8 = pbVar7;
switchD_0086cbf7_caseD_a:
    pbVar7 = pbVar8;
    iVar5 = local_14;
    if (iVar9 != 10) goto LAB_0086cbeb;
    goto LAB_0086cf0c;
  }
  iVar9 = 9;
LAB_0086ce2d:
  pbVar8 = pbVar8 + -1;
  iVar5 = local_14;
  goto LAB_0086cbeb;
LAB_0086ce8d:
  if (cbMultiByte_0097a340 < 2) {
    uVar3 = (byte)PTR_DAT_0097a134[(uint)bVar6 * 2] & 4;
    this = PTR_DAT_0097a134;
  }
  else {
    pbVar10 = (byte *)0x4;
    uVar3 = FUN_0085c91d(this,(uint)bVar6,4);
    this = pbVar10;
  }
  if (uVar3 == 0) goto LAB_0086ced7;
  this = (void *)(int)(char)bVar6;
  pbVar7 = (byte *)((int)this + (int)pbVar7 * 10 + -0x30);
  if (0x1450 < (int)pbVar7) goto LAB_0086cecf;
  bVar6 = *pbVar8;
  pbVar8 = pbVar8 + 1;
  goto LAB_0086ce8d;
LAB_0086cecf:
  pbVar7 = (byte *)0x1451;
LAB_0086ced7:
  while( true ) {
    local_20 = pbVar7;
    if (cbMultiByte_0097a340 < 2) {
      uVar3 = (byte)PTR_DAT_0097a134[(uint)bVar6 * 2] & 4;
      this = PTR_DAT_0097a134;
    }
    else {
      pbVar7 = (byte *)0x4;
      uVar3 = FUN_0085c91d(this,(uint)bVar6,4);
      this = pbVar7;
    }
    if (uVar3 == 0) break;
    bVar6 = *pbVar8;
    pbVar8 = pbVar8 + 1;
    pbVar7 = local_20;
  }
LAB_0086cf07:
  pbVar7 = pbVar8 + -1;
LAB_0086cf0c:
  *param_2 = (int)pbVar7;
  if (local_14 == 0) {
    local_44 = 0;
    local_3a = 0;
    local_3e = (byte *)0x0;
    param_3 = (byte *)0x0;
    local_18 = 4;
    goto LAB_0086d01a;
  }
  pcVar4 = local_10;
  if (0x18 < local_8) {
    if ('\x04' < local_49) {
      local_49 = local_49 + '\x01';
    }
    local_8 = 0x18;
    local_c = local_c + 1;
    pcVar4 = local_10 + -1;
  }
  if (local_8 == 0) {
    local_44 = 0;
    local_3a = 0;
    local_3e = (byte *)0x0;
    param_3 = (byte *)0x0;
  }
  else {
    while (pcVar4 = pcVar4 + -1, *pcVar4 == '\0') {
      local_8 = local_8 - 1;
      local_c = local_c + 1;
    }
    FUN_0086db71(local_60,local_8,(uint *)&local_44);
    pbVar8 = local_20;
    if (local_1c < 0) {
      pbVar8 = (byte *)-(int)local_20;
    }
    pbVar8 = pbVar8 + local_c;
    if (local_24 == 0) {
      pbVar8 = pbVar8 + param_5;
    }
    if (local_28 == 0) {
      pbVar8 = pbVar8 + -param_6;
    }
    if ((int)pbVar8 < 0x1451) {
      if (-0x1451 < (int)pbVar8) {
        FUN_0086e0eb((int *)&local_44,(uint)pbVar8,param_4);
        param_3 = (byte *)CONCAT22(uStack_40,uStack_42);
        goto LAB_0086cf9f;
      }
      local_34 = 1;
    }
    else {
      local_30 = 1;
    }
    local_3a = (ushort)param_3;
    local_3e = param_3;
    local_44 = local_3a;
  }
LAB_0086cf9f:
  if (local_30 == 0) {
    if (local_34 != 0) {
      local_44 = 0;
      local_3a = 0;
      local_3e = (byte *)0x0;
      param_3 = (byte *)0x0;
      local_18 = 1;
    }
  }
  else {
    param_3 = (byte *)0x0;
    local_3a = 0x7fff;
    local_3e = (byte *)0x80000000;
    local_44 = 0;
    local_18 = 2;
  }
LAB_0086d01a:
  *(byte **)(param_1 + 3) = local_3e;
  *(byte **)(param_1 + 1) = param_3;
  param_1[5] = local_3a | (ushort)local_2c;
  *param_1 = local_44;
  return local_18;
}

// ====== 0x0086d0a1  FUN_0086d0a1 ======
undefined4 FUN_0086d0a1(void)

{
  return 0;
}

// ====== 0x0086d138  FUN_0086d138 ======
void __cdecl FUN_0086d138(undefined4 param_1)

{
  FUN_0086d181(param_1,0,4);
  return;
}

// ====== 0x0086d181  FUN_0086d181 ======
undefined4 FUN_0086d181(byte param_1,uint param_2,byte param_3)

{
  if (((&DAT_009b4221)[param_1] & param_3) == 0) {
    if (param_2 == 0) {
      param_2 = 0;
    }
    else {
      param_2 = *(ushort *)(&DAT_0097a13e + (uint)param_1 * 2) & param_2;
    }
    if (param_2 == 0) {
      return 0;
    }
  }
  return 1;
}

// ====== 0x0086d1b2  FUN_0086d1b2 ======
BOOL __cdecl
FUN_0086d1b2(DWORD param_1,LPCWSTR param_2,int param_3,LPWORD param_4,UINT param_5,LCID param_6)

{
  undefined1 *puVar1;
  BOOL BVar2;
  size_t _Size;
  int iVar3;
  WORD local_20 [2];
  undefined1 *local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089c470;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  local_1c = &stack0xffffffc4;
  iVar3 = DAT_009b3ce8;
  ExceptionList = &local_14;
  puVar1 = &stack0xffffffc4;
  if (DAT_009b3ce8 == 0) {
    ExceptionList = &local_14;
    BVar2 = GetStringTypeW(1,(LPCWSTR)&lpSrcStr_0089b9cc,1,local_20);
    iVar3 = 1;
    puVar1 = local_1c;
    if (BVar2 == 0) {
      BVar2 = GetStringTypeA(0,1,(LPCSTR)&lpSrcStr_0089b9c8,1,local_20);
      if (BVar2 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      iVar3 = 2;
      puVar1 = local_1c;
    }
  }
  local_1c = puVar1;
  DAT_009b3ce8 = iVar3;
  if (DAT_009b3ce8 != 1) {
    if (DAT_009b3ce8 == 2) {
      if (param_5 == 0) {
        param_5 = CodePage_009b3a78;
      }
      _Size = WideCharToMultiByte(param_5,0x220,param_2,param_3,(LPSTR)0x0,0,(LPCSTR)0x0,(LPBOOL)0x0
                                 );
      if (_Size != 0) {
        local_8 = 0;
        FUN_0085f3a0();
        local_1c = &stack0xffffffc4;
        _memset(&stack0xffffffc4,0,_Size);
        local_8 = 0xffffffff;
        if (&stack0x00000000 != (undefined1 *)0x3c) {
          iVar3 = WideCharToMultiByte(param_5,0x220,param_2,param_3,&stack0xffffffc4,_Size,
                                      (LPCSTR)0x0,(LPBOOL)0x0);
          if (iVar3 != 0) {
            local_8 = 1;
            FUN_0085f3a0();
            local_8 = 0xffffffff;
            if (&stack0x00000000 != (undefined1 *)0x3c) {
              if (param_6 == 0) {
                param_6 = DAT_009b3a68;
              }
              local_1c = &stack0xffffffc4;
              *(short *)(&stack0xffffffc4 + param_3 * 2) = -1;
              local_20[param_3 + -0xf] = 0xffff;
              BVar2 = GetStringTypeA(param_6,param_1,&stack0xffffffc4,_Size,(LPWORD)&stack0xffffffc4
                                    );
              if ((local_20[param_3 + -0xf] != 0xffff) &&
                 (*(short *)(&stack0xffffffc4 + param_3 * 2) == -1)) {
                FUN_00859530((undefined4 *)param_4,(undefined4 *)&stack0xffffffc4,param_3 * 2);
                ExceptionList = local_14;
                return BVar2;
              }
            }
          }
        }
      }
    }
    ExceptionList = local_14;
    return 0;
  }
  BVar2 = GetStringTypeW(param_1,param_2,param_3,param_4);
  ExceptionList = local_14;
  return BVar2;
}

// ====== 0x0086d377  FUN_0086d377 ======
undefined4 __cdecl FUN_0086d377(uint *param_1,int param_2)

{
  byte *pbVar1;
  uint *puVar2;
  int iVar3;
  byte *pbVar4;
  size_t sVar5;
  uint *lpName;
  byte *pbVar6;
  bool bVar7;
  
  if (param_1 == (uint *)0x0) {
    return 0xffffffff;
  }
  puVar2 = (uint *)FUN_0085a6b8((byte *)param_1,0x3d);
  if (puVar2 == (uint *)0x0) {
    return 0xffffffff;
  }
  if (param_1 == puVar2) {
    return 0xffffffff;
  }
  bVar7 = *(byte *)((int)puVar2 + 1) == 0;
  if (DAT_009b3914 == DAT_009b3918) {
    DAT_009b3914 = (byte *)FUN_0086d556((int *)DAT_009b3914);
  }
  if (DAT_009b3914 == (byte *)0x0) {
    if ((param_2 == 0) || (DAT_009b391c == (undefined4 *)0x0)) {
      if (bVar7) {
        return 0;
      }
      DAT_009b3914 = (byte *)_malloc(4);
      if (DAT_009b3914 == (byte *)0x0) {
        return 0xffffffff;
      }
      pbVar4 = DAT_009b3914 + 1;
      pbVar6 = DAT_009b3914 + 2;
      pbVar1 = DAT_009b3914 + 3;
      DAT_009b3914[0] = 0;
      *pbVar4 = 0;
      *pbVar6 = 0;
      *pbVar1 = 0;
      if (DAT_009b391c == (undefined4 *)0x0) {
        DAT_009b391c = (undefined4 *)_malloc(4);
        if (DAT_009b391c == (undefined4 *)0x0) {
          return 0xffffffff;
        }
        *DAT_009b391c = 0;
      }
    }
    else {
      iVar3 = FUN_00868c89();
      if (iVar3 != 0) {
        return 0xffffffff;
      }
    }
  }
  pbVar4 = DAT_009b3914;
  iVar3 = FUN_0086d4fe((uchar *)param_1,(int)puVar2 - (int)param_1);
  if ((iVar3 < 0) || (*(int *)pbVar4 == 0)) {
    if (bVar7) {
      return 0;
    }
    if (iVar3 < 0) {
      iVar3 = -iVar3;
    }
    pbVar4 = FUN_0085b536(pbVar4,(uint *)(iVar3 * 4 + 8));
    if (pbVar4 == (byte *)0x0) {
      return 0xffffffff;
    }
    *(uint **)(pbVar4 + iVar3 * 4) = param_1;
    pbVar6 = pbVar4 + iVar3 * 4 + 4;
    pbVar6[0] = 0;
    pbVar6[1] = 0;
    pbVar6[2] = 0;
    pbVar6[3] = 0;
  }
  else {
    if (!bVar7) {
      *(uint **)(pbVar4 + iVar3 * 4) = param_1;
      goto LAB_0086d4ab;
    }
    pbVar6 = pbVar4 + iVar3 * 4;
    FUN_0085adc4(*(undefined **)(pbVar4 + iVar3 * 4));
    for (; *(int *)pbVar6 != 0; pbVar6 = pbVar6 + 4) {
      iVar3 = iVar3 + 1;
      *(int *)pbVar6 = *(int *)(pbVar6 + 4);
    }
    pbVar4 = FUN_0085b536(pbVar4,(uint *)(iVar3 << 2));
    if (pbVar4 == (byte *)0x0) goto LAB_0086d4ab;
  }
  DAT_009b3914 = pbVar4;
LAB_0086d4ab:
  if (param_2 != 0) {
    sVar5 = _strlen((char *)param_1);
    lpName = (uint *)_malloc(sVar5 + 2);
    if (lpName != (uint *)0x0) {
      FUN_00863840(lpName,param_1);
      pbVar4 = (byte *)(((int)lpName - (int)param_1) + (int)puVar2);
      *pbVar4 = 0;
      SetEnvironmentVariableA((LPCSTR)lpName,(LPCSTR)(~-(uint)bVar7 & (uint)(pbVar4 + 1)));
      FUN_0085adc4((undefined *)lpName);
    }
  }
  return 0;
}

// ====== 0x0086d4fe  FUN_0086d4fe ======
int __cdecl FUN_0086d4fe(uchar *param_1,size_t param_2)

{
  uchar *_Str2;
  int iVar1;
  int *piVar2;
  
  _Str2 = (uchar *)*DAT_009b3914;
  piVar2 = DAT_009b3914;
  while( true ) {
    if (_Str2 == (uchar *)0x0) {
      return -((int)piVar2 - (int)DAT_009b3914 >> 2);
    }
    iVar1 = __mbsnbicoll(param_1,_Str2,param_2);
    if ((iVar1 == 0) &&
       ((*(char *)(*piVar2 + param_2) == '=' || (*(char *)(*piVar2 + param_2) == '\0')))) break;
    _Str2 = (uchar *)piVar2[1];
    piVar2 = piVar2 + 1;
  }
  return (int)piVar2 - (int)DAT_009b3914 >> 2;
}

// ====== 0x0086d556  FUN_0086d556 ======
undefined4 * __cdecl FUN_0086d556(int *param_1)

{
  int iVar1;
  int *piVar2;
  undefined4 *puVar3;
  uint *puVar4;
  int iVar5;
  undefined4 *puVar6;
  
  iVar5 = 0;
  if (param_1 != (int *)0x0) {
    iVar1 = *param_1;
    piVar2 = param_1;
    while (iVar1 != 0) {
      piVar2 = piVar2 + 1;
      iVar5 = iVar5 + 1;
      iVar1 = *piVar2;
    }
    puVar3 = (undefined4 *)_malloc(iVar5 * 4 + 4);
    if (puVar3 == (undefined4 *)0x0) {
      __amsg_exit(9);
    }
    puVar4 = (uint *)*param_1;
    puVar6 = puVar3;
    while (puVar4 != (uint *)0x0) {
      param_1 = param_1 + 1;
      puVar4 = FUN_0085aead(puVar4);
      *puVar6 = puVar4;
      puVar6 = puVar6 + 1;
      puVar4 = (uint *)*param_1;
    }
    *puVar6 = 0;
    return puVar3;
  }
  return (undefined4 *)0x0;
}

// ====== 0x0086d5bd  FUN_0086d5bd ======
undefined4 __cdecl FUN_0086d5bd(int param_1,LCID param_2,LCTYPE param_3,char *param_4)

{
  byte bVar1;
  bool bVar2;
  size_t sVar3;
  DWORD DVar4;
  CHAR *_Source;
  char *_Dest;
  int iVar5;
  uint uVar6;
  void *extraout_ECX;
  undefined *puVar7;
  void *this;
  byte *pbVar8;
  CHAR local_84 [128];
  
  if (param_1 != 1) {
    if (param_1 != 0) {
      return 0xffffffff;
    }
    pbVar8 = &DAT_009b3cec;
    iVar5 = FUN_0086e167(param_2,param_3,(LPWSTR)&DAT_009b3cec,4,0);
    if (iVar5 != 0) {
      *param_4 = '\0';
      this = extraout_ECX;
      while( true ) {
        bVar1 = *pbVar8;
        if (cbMultiByte_0097a340 < 2) {
          uVar6 = (byte)PTR_DAT_0097a134[(uint)bVar1 * 2] & 4;
          puVar7 = PTR_DAT_0097a134;
        }
        else {
          puVar7 = (undefined *)0x0;
          uVar6 = FUN_0085c91d(this,(uint)bVar1,4);
        }
        if (uVar6 == 0) break;
        this = (void *)CONCAT31((int3)((uint)puVar7 >> 8),10);
        pbVar8 = pbVar8 + 2;
        *param_4 = *param_4 * '\n' + bVar1 + -0x30;
        if (0x9b3cf3 < (int)pbVar8) {
          return 0;
        }
      }
      return 0;
    }
    return 0xffffffff;
  }
  _Source = local_84;
  bVar2 = false;
  sVar3 = FUN_0086e27a(param_2,param_3,local_84,0x80,0);
  if (sVar3 == 0) {
    DVar4 = GetLastError();
    if (DVar4 != 0x7a) {
      return 0xffffffff;
    }
    sVar3 = FUN_0086e27a(param_2,param_3,(LPSTR)0x0,0,0);
    if (sVar3 == 0) {
      return 0xffffffff;
    }
    _Source = (CHAR *)_malloc(sVar3);
    if (_Source == (LPSTR)0x0) {
      return 0xffffffff;
    }
    bVar2 = true;
    sVar3 = FUN_0086e27a(param_2,param_3,_Source,sVar3,0);
    if (sVar3 == 0) goto LAB_0086d65b;
  }
  _Dest = (char *)_malloc(sVar3);
  *(char **)param_4 = _Dest;
  if (_Dest != (char *)0x0) {
    _strncpy(_Dest,_Source,sVar3);
    if (bVar2) {
      FUN_0085adc4(_Source);
    }
    return 0;
  }
  if (!bVar2) {
    return 0xffffffff;
  }
LAB_0086d65b:
  FUN_0085adc4(_Source);
  return 0xffffffff;
}

// ====== 0x0086d6f5  FUN_0086d6f5 ======
char * __cdecl FUN_0086d6f5(uint param_1,char *param_2,uint param_3)

{
  int iVar1;
  
  if ((param_3 == 10) && ((int)param_1 < 0)) {
    iVar1 = 1;
    param_3 = 10;
  }
  else {
    iVar1 = 0;
  }
  FUN_0086d722(param_1,param_2,param_3,iVar1);
  return param_2;
}

// ====== 0x0086d722  FUN_0086d722 ======
void __cdecl FUN_0086d722(uint param_1,char *param_2,uint param_3,int param_4)

{
  ulonglong uVar1;
  char *pcVar2;
  char *pcVar3;
  char cVar4;
  
  pcVar2 = param_2;
  if (param_4 != 0) {
    *param_2 = '-';
    param_2 = param_2 + 1;
    param_1 = -param_1;
    pcVar2 = param_2;
  }
  do {
    pcVar3 = pcVar2;
    uVar1 = (ulonglong)param_1;
    param_1 = param_1 / param_3;
    cVar4 = (char)(uVar1 % (ulonglong)param_3);
    if ((uint)(uVar1 % (ulonglong)param_3) < 10) {
      cVar4 = cVar4 + '0';
    }
    else {
      cVar4 = cVar4 + 'W';
    }
    *pcVar3 = cVar4;
    pcVar2 = pcVar3 + 1;
  } while (param_1 != 0);
  pcVar3[1] = '\0';
  do {
    cVar4 = *pcVar3;
    *pcVar3 = *param_2;
    *param_2 = cVar4;
    pcVar3 = pcVar3 + -1;
    param_2 = param_2 + 1;
  } while (param_2 < pcVar3);
  return;
}

// ====== 0x0086d77e  FUN_0086d77e ======
char * __cdecl FUN_0086d77e(uint param_1,char *param_2,uint param_3)

{
  int iVar1;
  
  iVar1 = 0;
  if ((param_3 == 10) && ((int)param_1 < 0)) {
    iVar1 = 1;
  }
  FUN_0086d722(param_1,param_2,param_3,iVar1);
  return param_2;
}

// ====== 0x0086d7c3  FUN_0086d7c3 ======
char * __cdecl FUN_0086d7c3(int param_1,int param_2,char *param_3,uint param_4)

{
  int iVar1;
  
  iVar1 = 0;
  if (((param_4 == 10) && (param_2 < 1)) && (param_2 < 0)) {
    iVar1 = 1;
  }
  FUN_0086d7f4(param_1,param_2,param_3,param_4,iVar1);
  return param_3;
}

// ====== 0x0086d7f4  FUN_0086d7f4 ======
void FUN_0086d7f4(int param_1,int param_2,char *param_3,uint param_4,int param_5)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  bool bVar4;
  undefined8 uVar5;
  longlong lVar6;
  uint uVar7;
  
  if (param_5 != 0) {
    *param_3 = '-';
    param_3 = param_3 + 1;
    bVar4 = param_1 != 0;
    param_1 = -param_1;
    param_2 = -(param_2 + (uint)bVar4);
  }
  lVar6 = CONCAT44(param_2,param_1);
  pcVar1 = param_3;
  do {
    pcVar3 = pcVar1;
    uVar7 = (uint)((ulonglong)lVar6 >> 0x20);
    uVar5 = __aullrem((uint)lVar6,uVar7,param_4,0);
    lVar6 = __aulldiv((uint)lVar6,uVar7,param_4,0);
    if ((uint)uVar5 < 10) {
      cVar2 = (char)uVar5 + '0';
    }
    else {
      cVar2 = (char)uVar5 + 'W';
    }
    *pcVar3 = cVar2;
    pcVar1 = pcVar3 + 1;
  } while (lVar6 != 0);
  pcVar3[1] = '\0';
  do {
    cVar2 = *pcVar3;
    *pcVar3 = *param_3;
    *param_3 = cVar2;
    pcVar3 = pcVar3 + -1;
    param_3 = param_3 + 1;
  } while (param_3 < pcVar3);
  return;
}

// ====== 0x0086d87a  FUN_0086d87a ======
char * __cdecl FUN_0086d87a(int param_1,int param_2,char *param_3,uint param_4)

{
  FUN_0086d7f4(param_1,param_2,param_3,param_4,0);
  return param_3;
}

// ====== 0x0086d8a0  FUN_0086d8a0 ======
void * __cdecl FUN_0086d8a0(byte *param_1,char *param_2,void *param_3)

{
  char cVar1;
  int iVar2;
  byte bVar3;
  ushort uVar4;
  uint uVar5;
  void *this;
  uint uVar6;
  bool bVar7;
  uint uVar8;
  
  iVar2 = DAT_009b4334;
  if (param_3 != (void *)0x0) {
    if (DAT_009b3a68 == 0) {
      do {
        bVar3 = *param_1;
        cVar1 = *param_2;
        uVar4 = CONCAT11(bVar3,cVar1);
        if (bVar3 == 0) break;
        uVar4 = CONCAT11(bVar3,cVar1);
        uVar6 = (uint)uVar4;
        if (cVar1 == '\0') break;
        param_1 = param_1 + 1;
        param_2 = param_2 + 1;
        if ((0x40 < bVar3) && (bVar3 < 0x5b)) {
          uVar6 = (uint)CONCAT11(bVar3 + 0x20,cVar1);
        }
        uVar4 = (ushort)uVar6;
        bVar3 = (byte)uVar6;
        if ((0x40 < bVar3) && (bVar3 < 0x5b)) {
          uVar4 = (ushort)CONCAT31((int3)(uVar6 >> 8),bVar3 + 0x20);
        }
        bVar3 = (byte)(uVar4 >> 8);
        bVar7 = bVar3 < (byte)uVar4;
        if (bVar3 != (byte)uVar4) goto LAB_0086d8ff;
        param_3 = (void *)((int)param_3 + -1);
      } while (param_3 != (void *)0x0);
      param_3 = (void *)0x0;
      bVar3 = (byte)(uVar4 >> 8);
      bVar7 = bVar3 < (byte)uVar4;
      if (bVar3 != (byte)uVar4) {
LAB_0086d8ff:
        param_3 = (void *)0xffffffff;
        if (!bVar7) {
          param_3 = (void *)0x1;
        }
      }
    }
    else {
      LOCK();
      DAT_009b4334 = DAT_009b4334 + 1;
      UNLOCK();
      bVar7 = 0 < DAT_009b4330;
      if (bVar7) {
        LOCK();
        UNLOCK();
        DAT_009b4334 = iVar2;
        FUN_00860a61(0x13);
      }
      uVar8 = (uint)bVar7;
      uVar5 = 0;
      uVar6 = 0;
      do {
        uVar5 = CONCAT31((int3)(uVar5 >> 8),*param_1);
        uVar6 = CONCAT31((int3)(uVar6 >> 8),*param_2);
        if ((uVar5 == 0) || (uVar6 == 0)) break;
        param_1 = param_1 + 1;
        param_2 = param_2 + 1;
        uVar6 = FUN_0085b1d9(param_3,uVar6);
        uVar5 = FUN_0085b1d9(this,uVar5);
        bVar7 = uVar5 < uVar6;
        if (uVar5 != uVar6) goto LAB_0086d975;
        param_3 = (void *)((int)param_3 + -1);
      } while (param_3 != (void *)0x0);
      param_3 = (void *)0x0;
      bVar7 = uVar5 < uVar6;
      if (uVar5 != uVar6) {
LAB_0086d975:
        param_3 = (void *)0xffffffff;
        if (!bVar7) {
          param_3 = (void *)0x1;
        }
      }
      if (uVar8 == 0) {
        LOCK();
        DAT_009b4334 = DAT_009b4334 + -1;
        UNLOCK();
      }
      else {
        FUN_00860ac2(0x13);
      }
    }
  }
  return param_3;
}

// ====== 0x0086d9a1  FUN_0086d9a1 ======
undefined8 __cdecl FUN_0086d9a1(uint param_1,LONG param_2,LONG param_3,DWORD param_4)

{
  DWORD *pDVar1;
  undefined8 uVar2;
  
  if ((param_1 < uNumber_009b4100) &&
     ((*(byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0)) {
    FUN_008680cf(param_1);
    uVar2 = FUN_0086da12(param_1,param_2,param_3,param_4);
    FUN_0086812e(param_1);
    return uVar2;
  }
  pDVar1 = FUN_0085cbd7();
  *pDVar1 = 9;
  pDVar1 = FUN_0085cbe0();
  *pDVar1 = 0;
  return 0xffffffffffffffff;
}

// ====== 0x0086da12  FUN_0086da12 ======
undefined8 __cdecl FUN_0086da12(uint param_1,LONG param_2,LONG param_3,DWORD param_4)

{
  byte *pbVar1;
  HANDLE hFile;
  DWORD *pDVar2;
  DWORD DVar3;
  DWORD DVar4;
  LONG local_8;
  
  local_8 = param_3;
  hFile = (HANDLE)FUN_00867fe6(param_1);
  if (hFile == (HANDLE)0xffffffff) {
    pDVar2 = FUN_0085cbd7();
    *pDVar2 = 9;
LAB_0086da6c:
    DVar4 = 0xffffffff;
    local_8 = -1;
  }
  else {
    DVar4 = SetFilePointer(hFile,param_2,&local_8,param_4);
    if (DVar4 == 0xffffffff) {
      DVar3 = GetLastError();
      if (DVar3 != 0) {
        FUN_0085cb64(DVar3);
        goto LAB_0086da6c;
      }
    }
    pbVar1 = (byte *)((&DAT_009b4000)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24);
    *pbVar1 = *pbVar1 & 0xfd;
  }
  return CONCAT44(local_8,DVar4);
}

// ====== 0x0086da97  FUN_0086da97 ======
undefined4 __cdecl FUN_0086da97(uint param_1,uint param_2,uint *param_3)

{
  uint uVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  uVar1 = param_1 + param_2;
  if ((uVar1 < param_1) || (uVar1 < param_2)) {
    uVar2 = 1;
  }
  *param_3 = uVar1;
  return uVar2;
}

// ====== 0x0086dab8  ___add_12 ======
/* Library Function - Single Match
    ___add_12
   
   Library: Visual Studio 2003 Release */

void __cdecl ___add_12(uint *param_1,uint *param_2)

{
  int iVar1;
  
  iVar1 = FUN_0086da97(*param_1,*param_2,param_1);
  if (iVar1 != 0) {
    iVar1 = FUN_0086da97(param_1[1],1,param_1 + 1);
    if (iVar1 != 0) {
      param_1[2] = param_1[2] + 1;
    }
  }
  iVar1 = FUN_0086da97(param_1[1],param_2[1],param_1 + 1);
  if (iVar1 != 0) {
    param_1[2] = param_1[2] + 1;
  }
  FUN_0086da97(param_1[2],param_2[2],param_1 + 2);
  return;
}

// ====== 0x0086db16  FUN_0086db16 ======
void __cdecl FUN_0086db16(uint *param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = *param_1;
  uVar2 = param_1[1];
  *param_1 = uVar1 * 2;
  param_1[1] = uVar2 * 2 | uVar1 >> 0x1f;
  param_1[2] = param_1[2] << 1 | uVar2 >> 0x1f;
  return;
}

// ====== 0x0086db44  FUN_0086db44 ======
void __cdecl FUN_0086db44(uint *param_1)

{
  uint uVar1;
  
  uVar1 = param_1[1];
  param_1[1] = uVar1 >> 1 | param_1[2] << 0x1f;
  param_1[2] = param_1[2] >> 1;
  *param_1 = *param_1 >> 1 | uVar1 << 0x1f;
  return;
}

// ====== 0x0086db71  FUN_0086db71 ======
void __cdecl FUN_0086db71(char *param_1,int param_2,uint *param_3)

{
  uint *puVar1;
  uint local_14;
  uint local_10;
  uint local_c;
  int local_8;
  
  puVar1 = param_3;
  local_8 = 0x404e;
  *param_3 = 0;
  param_3[1] = 0;
  param_3[2] = 0;
  if (param_2 != 0) {
    param_3 = (uint *)param_2;
    do {
      local_14 = *puVar1;
      local_10 = puVar1[1];
      local_c = puVar1[2];
      FUN_0086db16(puVar1);
      FUN_0086db16(puVar1);
      ___add_12(puVar1,&local_14);
      FUN_0086db16(puVar1);
      local_10 = 0;
      local_c = 0;
      local_14 = (uint)*param_1;
      ___add_12(puVar1,&local_14);
      param_1 = param_1 + 1;
      param_3 = (uint *)((int)param_3 + -1);
    } while (param_3 != (uint *)0x0);
  }
  while (puVar1[2] == 0) {
    puVar1[2] = puVar1[1] >> 0x10;
    local_8 = local_8 + 0xfff0;
    puVar1[1] = *puVar1 >> 0x10 | puVar1[1] << 0x10;
    *puVar1 = *puVar1 << 0x10;
  }
  while ((puVar1[2] & 0x8000) == 0) {
    FUN_0086db16(puVar1);
    local_8 = local_8 + 0xffff;
  }
  *(undefined2 *)((int)puVar1 + 10) = (undefined2)local_8;
  return;
}

// ====== 0x0086dc38  FUN_0086dc38 ======
undefined4 __cdecl
FUN_0086dc38(uint param_1,uint param_2,uint param_3,int param_4,byte param_5,short *param_6)

{
  short *psVar1;
  uint uVar2;
  short *psVar3;
  char cVar4;
  uint uVar5;
  short *psVar6;
  short *psVar7;
  short sVar8;
  int iVar9;
  int iVar10;
  char *pcVar11;
  undefined1 local_20;
  undefined1 local_1f;
  undefined1 local_1e;
  undefined1 local_1d;
  undefined1 local_1c;
  undefined1 local_1b;
  undefined1 local_1a;
  undefined1 local_19;
  undefined1 local_18;
  undefined1 local_17;
  undefined1 local_16;
  undefined1 local_15;
  undefined2 local_14;
  undefined4 local_12;
  undefined4 local_e;
  undefined1 local_a;
  char cStack_9;
  undefined4 local_8;
  
  psVar3 = param_6;
  uVar5 = param_3 & 0x7fff;
  local_20 = 0xcc;
  local_1f = 0xcc;
  local_1e = 0xcc;
  local_1d = 0xcc;
  local_1c = 0xcc;
  local_1b = 0xcc;
  local_1a = 0xcc;
  local_19 = 0xcc;
  local_18 = 0xcc;
  local_17 = 0xcc;
  local_16 = 0xfb;
  local_15 = 0x3f;
  local_8 = 1;
  if ((param_3 & 0x8000) == 0) {
    *(undefined1 *)(param_6 + 1) = 0x20;
  }
  else {
    *(undefined1 *)(param_6 + 1) = 0x2d;
  }
  if ((((short)uVar5 != 0) || (param_2 != 0)) || (param_1 != 0)) {
    if ((short)uVar5 == 0x7fff) {
      *param_6 = 1;
      if (((param_2 == 0x80000000) && (param_1 == 0)) || ((param_2 & 0x40000000) != 0)) {
        if (((param_3 & 0x8000) == 0) || (param_2 != 0xc0000000)) {
          if ((param_2 != 0x80000000) || (param_1 != 0)) goto LAB_0086dd2d;
          pcVar11 = "1#INF";
        }
        else {
          if (param_1 != 0) {
LAB_0086dd2d:
            pcVar11 = "1#QNAN";
            goto LAB_0086dd32;
          }
          pcVar11 = "1#IND";
        }
        FUN_00863840((uint *)(param_6 + 2),(uint *)pcVar11);
        *(undefined1 *)((int)psVar3 + 3) = 5;
      }
      else {
        pcVar11 = "1#SNAN";
LAB_0086dd32:
        FUN_00863840((uint *)(param_6 + 2),(uint *)pcVar11);
        *(undefined1 *)((int)psVar3 + 3) = 6;
      }
      return 0;
    }
    local_14 = 0;
    local_a = (undefined1)uVar5;
    cStack_9 = (char)(uVar5 >> 8);
    sVar8 = (short)(((uVar5 >> 8) + (param_2 >> 0x18) * 2) * 0x4d + -0x134312f4 + uVar5 * 0x4d10 >>
                   0x10);
    local_e = param_2;
    local_12 = param_1;
    FUN_0086e0eb((int *)&local_14,-(int)sVar8,1);
    if (0x3ffe < CONCAT11(cStack_9,local_a)) {
      sVar8 = sVar8 + 1;
      FUN_0086decb((int *)&local_14,(int *)&local_20);
    }
    *psVar3 = sVar8;
    iVar10 = param_4;
    if (((param_5 & 1) == 0) || (iVar10 = param_4 + sVar8, 0 < param_4 + sVar8)) {
      if (0x15 < iVar10) {
        iVar10 = 0x15;
      }
      iVar9 = CONCAT11(cStack_9,local_a) - 0x3ffe;
      local_a = 0;
      cStack_9 = '\0';
      param_6 = (short *)&DAT_00000008;
      do {
        FUN_0086db16((uint *)&local_14);
        param_6 = (short *)((int)param_6 + -1);
      } while (param_6 != (short *)0x0);
      if (iVar9 < 0) {
        param_6 = (short *)0x0;
        for (uVar5 = -iVar9 & 0xff; uVar5 != 0; uVar5 = uVar5 - 1) {
          FUN_0086db44((uint *)&local_14);
        }
      }
      param_4 = iVar10 + 1;
      psVar6 = psVar3 + 2;
      param_6 = psVar6;
      uVar5 = local_12;
      uVar2 = local_e;
      if (0 < param_4) {
        do {
          local_e._2_2_ = (undefined2)(uVar2 >> 0x10);
          local_e._0_2_ = (undefined2)uVar2;
          local_12._2_2_ = (undefined2)(uVar5 >> 0x10);
          local_12._0_2_ = (undefined2)uVar5;
          param_1 = CONCAT22((undefined2)local_12,local_14);
          param_2 = CONCAT22((undefined2)local_e,local_12._2_2_);
          param_3 = CONCAT13(cStack_9,CONCAT12(local_a,local_e._2_2_));
          local_12 = uVar5;
          local_e = uVar2;
          FUN_0086db16((uint *)&local_14);
          FUN_0086db16((uint *)&local_14);
          ___add_12((uint *)&local_14,&param_1);
          FUN_0086db16((uint *)&local_14);
          cVar4 = cStack_9;
          cStack_9 = '\0';
          psVar6 = (short *)((int)param_6 + 1);
          param_4 = param_4 + -1;
          *(char *)param_6 = cVar4 + '0';
          param_6 = psVar6;
          uVar5 = local_12;
          uVar2 = local_e;
        } while (param_4 != 0);
      }
      psVar7 = psVar6 + -1;
      psVar1 = psVar3 + 2;
      if ('4' < *(char *)((int)psVar6 + -1)) {
        for (; psVar1 <= psVar7; psVar7 = (short *)((int)psVar7 + -1)) {
          if ((char)*psVar7 != '9') {
            if (psVar1 <= psVar7) goto LAB_0086de8a;
            break;
          }
          *(char *)psVar7 = '0';
        }
        psVar7 = (short *)((int)psVar7 + 1);
        *psVar3 = *psVar3 + 1;
LAB_0086de8a:
        *(char *)psVar7 = (char)*psVar7 + '\x01';
LAB_0086de8c:
        cVar4 = ((char)psVar7 - (char)psVar3) + -3;
        *(char *)((int)psVar3 + 3) = cVar4;
        *(undefined1 *)(cVar4 + 4 + (int)psVar3) = 0;
        return local_8;
      }
      for (; psVar1 <= psVar7; psVar7 = (short *)((int)psVar7 + -1)) {
        if ((char)*psVar7 != '0') {
          if (psVar1 <= psVar7) goto LAB_0086de8c;
          break;
        }
      }
      *psVar3 = 0;
      *(undefined1 *)(psVar3 + 1) = 0x20;
      *(undefined1 *)((int)psVar3 + 3) = 1;
      *(char *)psVar1 = '0';
      goto LAB_0086dec2;
    }
  }
  *psVar3 = 0;
  *(undefined1 *)(psVar3 + 1) = 0x20;
  *(undefined1 *)((int)psVar3 + 3) = 1;
  *(undefined1 *)(psVar3 + 2) = 0x30;
LAB_0086dec2:
  *(undefined1 *)((int)psVar3 + 5) = 0;
  return 1;
}

// ====== 0x0086decb  FUN_0086decb ======
void __cdecl FUN_0086decb(int *param_1,int *param_2)

{
  int *piVar1;
  short sVar2;
  int iVar3;
  int *piVar4;
  int *piVar5;
  ushort uVar6;
  uint uVar7;
  int iVar8;
  ushort uVar9;
  uint uVar10;
  ushort uVar11;
  byte local_28;
  undefined1 uStack_27;
  undefined2 uStack_26;
  short local_24;
  undefined2 uStack_22;
  undefined2 local_20;
  undefined1 uStack_1e;
  byte bStack_1d;
  int *local_1c;
  int local_18;
  int local_14;
  ushort *local_10;
  ushort *local_c;
  short *local_8;
  
  piVar5 = param_2;
  piVar4 = param_1;
  local_18 = 0;
  local_28 = 0;
  uStack_27 = 0;
  uStack_26 = 0;
  local_24 = 0;
  uStack_22 = 0;
  local_20 = 0;
  uStack_1e = 0;
  bStack_1d = 0;
  uVar7 = *(ushort *)((int)param_1 + 10) & 0x7fff;
  uVar10 = *(ushort *)((int)param_2 + 10) & 0x7fff;
  uVar11 = (*(ushort *)((int)param_2 + 10) ^ *(ushort *)((int)param_1 + 10)) & 0x8000;
  uVar6 = (ushort)uVar7;
  piVar1 = (int *)(uVar10 + uVar7);
  if (((uVar6 < 0x7fff) && (uVar9 = (ushort)uVar10, uVar9 < 0x7fff)) && ((ushort)piVar1 < 0xbffe)) {
    if ((ushort)piVar1 < 0x3fc0) {
LAB_0086df6e:
      piVar4[2] = 0;
      piVar4[1] = 0;
      *piVar4 = 0;
      return;
    }
    if (((uVar6 != 0) || (piVar1 = (int *)((int)piVar1 + 1), (param_1[2] & 0x7fffffffU) != 0)) ||
       ((uVar6 = 0, param_1[1] != 0 || (*param_1 != 0)))) {
      param_1 = piVar1;
      if (((uVar9 == 0) && (param_1 = (int *)((int)param_1 + 1), (param_2[2] & 0x7fffffffU) == 0))
         && ((param_2[1] == 0 && (*param_2 == 0)))) goto LAB_0086df6e;
      local_14 = 0;
      local_8 = &local_24;
      param_2 = (int *)&DAT_00000005;
      do {
        if (0 < (int)param_2) {
          local_c = (ushort *)(local_14 * 2 + (int)piVar4);
          local_10 = (ushort *)(piVar5 + 2);
          local_1c = param_2;
          do {
            iVar8 = FUN_0086da97(*(uint *)(local_8 + -2),(uint)*local_c * (uint)*local_10,
                                 (uint *)(local_8 + -2));
            if (iVar8 != 0) {
              *local_8 = *local_8 + 1;
            }
            local_c = local_c + 1;
            local_10 = local_10 + -1;
            local_1c = (int *)((int)local_1c + -1);
          } while (local_1c != (int *)0x0);
        }
        local_8 = local_8 + 1;
        local_14 = local_14 + 1;
        param_2 = (int *)((int)param_2 + -1);
      } while (0 < (int)param_2);
      param_1 = (int *)((int)param_1 + 0xc002);
      if ((short)(ushort)param_1 < 1) {
LAB_0086e022:
        param_1._0_2_ = (ushort)param_1 - 1;
        if ((short)(ushort)param_1 < 0) {
          iVar8 = -(int)(short)(ushort)param_1;
          param_1._0_2_ = (ushort)param_1 + (short)iVar8;
          do {
            if ((local_28 & 1) != 0) {
              local_18 = local_18 + 1;
            }
            FUN_0086db44((uint *)&local_28);
            iVar8 = iVar8 + -1;
          } while (iVar8 != 0);
          if (local_18 != 0) {
            local_28 = local_28 | 1;
          }
        }
      }
      else {
        do {
          if ((bStack_1d & 0x80) != 0) break;
          FUN_0086db16((uint *)&local_28);
          param_1 = (int *)((int)param_1 + 0xffff);
        } while (0 < (short)(ushort)param_1);
        if ((short)(ushort)param_1 < 1) goto LAB_0086e022;
      }
      if ((0x8000 < CONCAT11(uStack_27,local_28)) ||
         (sVar2 = CONCAT11(bStack_1d,uStack_1e), iVar3 = CONCAT22(local_20,uStack_22),
         iVar8 = CONCAT22(local_24,uStack_26),
         (CONCAT22(uStack_26,CONCAT11(uStack_27,local_28)) & 0x1ffff) == 0x18000)) {
        if (CONCAT22(local_24,uStack_26) == -1) {
          iVar8 = 0;
          if (CONCAT22(local_20,uStack_22) == -1) {
            if (CONCAT11(bStack_1d,uStack_1e) == -1) {
              param_1._0_2_ = (ushort)param_1 + 1;
              sVar2 = -0x8000;
              iVar3 = 0;
              iVar8 = 0;
            }
            else {
              sVar2 = CONCAT11(bStack_1d,uStack_1e) + 1;
              iVar3 = 0;
              iVar8 = 0;
            }
          }
          else {
            sVar2 = CONCAT11(bStack_1d,uStack_1e);
            iVar3 = CONCAT22(local_20,uStack_22) + 1;
          }
        }
        else {
          iVar8 = CONCAT22(local_24,uStack_26) + 1;
          sVar2 = CONCAT11(bStack_1d,uStack_1e);
          iVar3 = CONCAT22(local_20,uStack_22);
        }
      }
      local_24 = (short)((uint)iVar8 >> 0x10);
      uStack_26 = (undefined2)iVar8;
      local_20 = (undefined2)((uint)iVar3 >> 0x10);
      uStack_22 = (undefined2)iVar3;
      bStack_1d = (byte)((ushort)sVar2 >> 8);
      uStack_1e = (undefined1)sVar2;
      if (0x7ffe < (ushort)param_1) goto LAB_0086e0cb;
      uVar6 = (ushort)param_1 | uVar11;
      *(undefined2 *)piVar4 = uStack_26;
      *(uint *)((int)piVar4 + 2) = CONCAT22(uStack_22,local_24);
      *(uint *)((int)piVar4 + 6) = CONCAT13(bStack_1d,CONCAT12(uStack_1e,local_20));
    }
    *(ushort *)((int)piVar4 + 10) = uVar6;
  }
  else {
LAB_0086e0cb:
    piVar4[1] = 0;
    *piVar4 = 0;
    piVar4[2] = (-(uint)(uVar11 != 0) & 0x80000000) + 0x7fff8000;
  }
  return;
}

// ====== 0x0086e0eb  FUN_0086e0eb ======
void __cdecl FUN_0086e0eb(int *param_1,uint param_2,int param_3)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  undefined2 local_10;
  undefined4 local_e;
  undefined2 uStack_a;
  int iStack_8;
  
  iVar3 = 0x97d7f0;
  if (param_2 != 0) {
    if ((int)param_2 < 0) {
      param_2 = -param_2;
      iVar3 = 0x97d950;
    }
    if (param_3 == 0) {
      *(undefined2 *)param_1 = 0;
    }
    while (param_2 != 0) {
      iVar3 = iVar3 + 0x54;
      uVar1 = (int)param_2 >> 3;
      uVar2 = param_2 & 7;
      param_2 = uVar1;
      if (uVar2 != 0) {
        piVar4 = (int *)(iVar3 + uVar2 * 0xc);
        if (0x7fff < *(ushort *)(iVar3 + uVar2 * 0xc)) {
          local_10 = (undefined2)*piVar4;
          local_e._0_2_ = (undefined2)((uint)*piVar4 >> 0x10);
          local_e._2_2_ = (undefined2)piVar4[1];
          uStack_a = (undefined2)((uint)piVar4[1] >> 0x10);
          iStack_8 = piVar4[2];
          local_e = CONCAT22(local_e._2_2_,(undefined2)local_e) + -1;
          piVar4 = (int *)&local_10;
        }
        FUN_0086decb(param_1,piVar4);
      }
    }
  }
  return;
}

// ====== 0x0086e167  FUN_0086e167 ======
int __cdecl FUN_0086e167(LCID param_1,LCTYPE param_2,LPWSTR param_3,int param_4,UINT param_5)

{
  int iVar1;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089c4a8;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (DAT_009b3cf8 == 0) {
    ExceptionList = &local_14;
    iVar1 = GetLocaleInfoW(0,1,(LPWSTR)0x0,0);
    if (iVar1 == 0) {
      iVar1 = GetLocaleInfoA(0,1,(LPSTR)0x0,0);
      if (iVar1 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_009b3cf8 = 2;
    }
    else {
      DAT_009b3cf8 = 1;
    }
  }
  if (DAT_009b3cf8 != 1) {
    if (DAT_009b3cf8 == 2) {
      if (param_5 == 0) {
        param_5 = CodePage_009b3a78;
      }
      iVar1 = GetLocaleInfoA(param_1,param_2,(LPSTR)0x0,0);
      if (iVar1 != 0) {
        local_8 = 0;
        FUN_0085f3a0();
        local_8 = 0xffffffff;
        if ((&stack0x00000000 != (undefined1 *)0x34) &&
           (iVar1 = GetLocaleInfoA(param_1,param_2,&stack0xffffffcc,iVar1), iVar1 != 0)) {
          if (param_4 == 0) {
            param_4 = 0;
            param_3 = (LPWSTR)0x0;
          }
          iVar1 = MultiByteToWideChar(param_5,1,&stack0xffffffcc,-1,param_3,param_4);
          ExceptionList = local_14;
          return iVar1;
        }
      }
    }
    ExceptionList = local_14;
    return 0;
  }
  iVar1 = GetLocaleInfoW(param_1,param_2,param_3,param_4);
  ExceptionList = local_14;
  return iVar1;
}

// ====== 0x0086e27a  FUN_0086e27a ======
int __cdecl FUN_0086e27a(LCID param_1,LCTYPE param_2,LPSTR param_3,int param_4,UINT param_5)

{
  int iVar1;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0089c4b8;
  puStack_10 = &LAB_0085fed0;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (DAT_009b3cfc == 0) {
    ExceptionList = &local_14;
    iVar1 = GetLocaleInfoW(0,1,(LPWSTR)0x0,0);
    if (iVar1 == 0) {
      iVar1 = GetLocaleInfoA(0,1,(LPSTR)0x0,0);
      if (iVar1 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_009b3cfc = 2;
    }
    else {
      DAT_009b3cfc = 1;
    }
  }
  if (DAT_009b3cfc != 2) {
    if (DAT_009b3cfc == 1) {
      if (param_5 == 0) {
        param_5 = CodePage_009b3a78;
      }
      iVar1 = GetLocaleInfoW(param_1,param_2,(LPWSTR)0x0,0);
      if (iVar1 != 0) {
        local_8 = 0;
        FUN_0085f3a0();
        local_8 = 0xffffffff;
        if ((&stack0x00000000 != (undefined1 *)0x34) &&
           (iVar1 = GetLocaleInfoW(param_1,param_2,(LPWSTR)&stack0xffffffcc,iVar1), iVar1 != 0)) {
          if (param_4 == 0) {
            param_4 = 0;
            param_3 = (LPSTR)0x0;
          }
          iVar1 = WideCharToMultiByte(param_5,0x220,(LPCWSTR)&stack0xffffffcc,-1,param_3,param_4,
                                      (LPCSTR)0x0,(LPBOOL)0x0);
          ExceptionList = local_14;
          return iVar1;
        }
      }
    }
    ExceptionList = local_14;
    return 0;
  }
  iVar1 = GetLocaleInfoA(param_1,param_2,param_3,param_4);
  ExceptionList = local_14;
  return iVar1;
}

// ====== 0x0086e3a0  FUN_0086e3a0 ======
float10 FUN_0086e3a0(void)

{
  LARGE_INTEGER LStack_10;
  LARGE_INTEGER local_8;
  
  QueryPerformanceFrequency(&local_8);
  QueryPerformanceCounter(&LStack_10);
  return (float10)(longlong)LStack_10 / (float10)(longlong)local_8;
}

// ====== 0x0086e3f0  FUN_0086e3f0 ======
void __cdecl FUN_0086e3f0(LPCSTR param_1)

{
  OutputDebugStringA(param_1);
  return;
}

// ====== 0x0086e400  FUN_0086e400 ======
void __cdecl FUN_0086e400(void *param_1,byte *param_2)

{
  FUN_0085b2b0(param_1,(byte *)param_1,param_2);
  return;
}

// ====== 0x0086e420  FUN_0086e420 ======
void __cdecl FUN_0086e420(byte *param_1,char *param_2,void *param_3)

{
  FUN_0086d8a0(param_1,param_2,param_3);
  return;
}

// ====== 0x0086e440  FUN_0086e440 ======
void __cdecl FUN_0086e440(LPCSTR param_1,LPCSTR param_2)

{
  MessageBoxA((HWND)0x0,param_1,param_2,0);
  return;
}

// ====== 0x0086e470  FUN_0086e470 ======
void __cdecl FUN_0086e470(LPCSTR param_1,byte param_2)

{
  FUN_0086fede(param_1,param_2);
  return;
}

// ====== 0x0086e490  FUN_0086e490 ======
void FUN_0086e490(void)

{
  return;
}

// ====== 0x0086e4a0  FUN_0086e4a0 ======
uint __cdecl FUN_0086e4a0(byte *param_1)

{
  int iVar1;
  int local_24 [5];
  uint local_10;
  
  iVar1 = FUN_0086fa7f(param_1,local_24);
  return ~-(uint)(iVar1 != 0) & local_10;
}

// ====== 0x0086e550  FUN_0086e550 ======
undefined4 * __thiscall FUN_0086e550(void *this,undefined4 param_1,int param_2,uint param_3)

{
  undefined *puVar1;
  int iVar2;
  undefined4 uVar3;
  void *local_c;
  undefined1 *puStack_8;
  undefined4 local_4;
  
  puStack_8 = &LAB_008879c8;
  local_c = ExceptionList;
  local_4 = 0;
  ExceptionList = &local_c;
  *(bool *)((int)this + 0x1c) = param_2 == 0;
  *(undefined ***)this = &PTR_FUN_0089c4d0;
  puVar1 = &DAT_008da89c;
  if (param_2 != 0) {
    puVar1 = &DAT_008da87c;
  }
  iVar2 = FUN_0085a0f5(param_1,puVar1);
  *(int *)((int)this + 4) = iVar2;
  *(bool *)((int)this + 0x1d) = iVar2 != 0;
  *(uint *)((int)this + 0xc) = param_3;
  *(undefined4 *)((int)this + 0x10) = 0;
  *(undefined4 *)((int)this + 0x18) = 0;
  if ((iVar2 != 0) && (param_3 != 0)) {
    uVar3 = FUN_00718cb0(param_3);
    *(undefined4 *)((int)this + 8) = uVar3;
    ExceptionList = local_c;
    return (undefined4 *)this;
  }
  *(undefined4 *)((int)this + 8) = 0;
  ExceptionList = local_c;
  return (undefined4 *)this;
}

// ====== 0x0086e600  FUN_0086e600 ======
undefined4 * __thiscall FUN_0086e600(void *this,byte param_1)

{
  FUN_0086e620((undefined4 *)this);
  if ((param_1 & 1) != 0) {
    FUN_00718cf0((int)this);
  }
  return (undefined4 *)this;
}

// ====== 0x0086e620  FUN_0086e620 ======
void __fastcall FUN_0086e620(undefined4 *param_1)

{
  uint uVar1;
  
  *param_1 = &PTR_FUN_0089c4d0;
  if (*(char *)((int)param_1 + 0x1d) == '\0') goto LAB_0086e651;
  if (*(char *)(param_1 + 7) == '\0') {
    if (param_1[6] == 0) goto LAB_0086e63e;
    uVar1 = FUN_0085a1e0((char *)param_1[2],1,param_1[6],(int *)param_1[1]);
    if (uVar1 == param_1[6]) goto LAB_0086e63e;
    *(undefined1 *)((int)param_1 + 0x1d) = 0;
  }
  else {
    param_1[4] = 0;
LAB_0086e63e:
    param_1[6] = 0;
  }
  FUN_0085a047((FILE *)param_1[1]);
LAB_0086e651:
  FUN_00718cf0(param_1[2]);
  FUN_0086ec10(param_1);
  return;
}

// ====== 0x0086e6a0  FUN_0086e6a0 ======
void __thiscall FUN_0086e6a0(void *this,int param_1,DWORD param_2)

{
  int iVar1;
  uint uVar2;
  
  if (*(char *)((int)this + 0x1d) == '\0') {
    return;
  }
  if (param_2 == 1) {
    iVar1 = *(int *)((int)this + 0x18) + param_1;
    if ((-1 < iVar1) && (iVar1 < *(int *)((int)this + 0x10))) {
      *(int *)((int)this + 0x18) = iVar1;
      return;
    }
    param_1 = param_1 + (*(int *)((int)this + 0x18) - *(int *)((int)this + 0x10));
  }
  if (*(char *)((int)this + 0x1c) == '\0') {
    if ((*(uint *)((int)this + 0x18) != 0) &&
       (uVar2 = FUN_0085a1e0(*(char **)((int)this + 8),1,*(uint *)((int)this + 0x18),
                             *(int **)((int)this + 4)), uVar2 != *(uint *)((int)this + 0x18))) {
      *(undefined1 *)((int)this + 0x1d) = 0;
      goto LAB_0086e6f1;
    }
  }
  else {
    *(undefined4 *)((int)this + 0x10) = 0;
  }
  *(undefined4 *)((int)this + 0x18) = 0;
LAB_0086e6f1:
  iVar1 = FUN_0085bbc4(*(int **)((int)this + 4),param_1,param_2);
  *(bool *)((int)this + 0x1d) = iVar1 == 0;
  return;
}

// ====== 0x0086e9a0  FUN_0086e9a0 ======
undefined4 __fastcall FUN_0086e9a0(int param_1)

{
  undefined4 in_EAX;
  uint uVar1;
  
  uVar1 = CONCAT31((int3)((uint)in_EAX >> 8),*(char *)(param_1 + 0x1c));
  if (*(char *)(param_1 + 0x1c) == '\0') {
    uVar1 = *(uint *)(param_1 + 0x18);
    if (uVar1 != 0) {
      uVar1 = FUN_0085a1e0(*(char **)(param_1 + 8),1,uVar1,*(int **)(param_1 + 4));
      if (uVar1 != *(uint *)(param_1 + 0x18)) {
        *(undefined1 *)(param_1 + 0x1d) = 0;
        return uVar1 & 0xffffff00;
      }
    }
  }
  else {
    *(undefined4 *)(param_1 + 0x10) = 0;
  }
  *(undefined4 *)(param_1 + 0x18) = 0;
  return CONCAT31((int3)(uVar1 >> 8),1);
}

// ====== 0x0086ea70  FUN_0086ea70 ======
undefined4 * __thiscall FUN_0086ea70(void *this,byte *param_1)

{
  undefined4 uVar1;
  byte *pbVar2;
  
  uVar1 = FUN_00718cb0(0x100);
  *(undefined4 *)this = uVar1;
  uVar1 = FUN_00718cb0(3);
  *(undefined4 *)((int)this + 4) = uVar1;
  uVar1 = FUN_00718cb0(0x100);
  *(undefined4 *)((int)this + 8) = uVar1;
  pbVar2 = (byte *)FUN_00718cb0(0x100);
                    /* WARNING: Load size is inaccurate */
  *(byte **)((int)this + 0xc) = pbVar2;
  FUN_0085c146(param_1,*(byte **)((int)this + 4),*this,pbVar2,*(byte **)((int)this + 8));
  return (undefined4 *)this;
}

// ====== 0x0086ead0  FUN_0086ead0 ======
void __fastcall FUN_0086ead0(int *param_1)

{
  FUN_00718cf0(*param_1);
  FUN_00718cf0(param_1[1]);
  FUN_00718cf0(param_1[2]);
  FUN_00718cf0(param_1[3]);
  return;
}

// ====== 0x0086eb00  FUN_0086eb00 ======
void __thiscall FUN_0086eb00(void *this,byte *param_1)

{
                    /* WARNING: Load size is inaccurate */
  FUN_00870757(param_1,*(byte **)((int)this + 4),*this,*(byte **)((int)this + 0xc),
               *(byte **)((int)this + 8));
  return;
}

// ====== 0x0086eb20  FUN_0086eb20 ======
undefined2 FUN_0086eb20(void)

{
  return 0x104;
}

// ====== 0x0086ec10  FUN_0086ec10 ======
void __fastcall FUN_0086ec10(undefined4 *param_1)

{
  *param_1 = &PTR_LAB_0089c4e0;
  return;
}

// ====== 0x0086ec40  FUN_0086ec40 ======
int __thiscall FUN_0086ec40(void *this,char *param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  
  iVar3 = 0;
  if (param_2 < (char *)0x2) {
    param_1[-1] = '\0';
    return 0;
  }
  pcVar4 = param_1;
  while( true ) {
                    /* WARNING: Load size is inaccurate */
    iVar2 = (**(code **)(*this + 8))(pcVar4,1);
    if (iVar2 != 1) break;
    cVar1 = *pcVar4;
    iVar3 = iVar3 + 1;
    pcVar4 = pcVar4 + 1;
    if ((cVar1 == '\n') || (param_2 <= pcVar4 + (1 - (int)param_1))) break;
  }
  param_1[iVar3 + -1] = '\0';
  return iVar3;
}

// ====== 0x0086ecb0  FUN_0086ecb0 ======
int __thiscall FUN_0086ecb0(void *this,char *param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  cVar1 = *param_1;
  while( true ) {
    if (cVar1 == '\0') {
      return iVar3;
    }
                    /* WARNING: Load size is inaccurate */
    iVar2 = (**(code **)(*this + 0xc))(param_1,1);
    if (iVar2 != 1) break;
    cVar1 = param_1[1];
    iVar3 = iVar3 + 1;
    param_1 = param_1 + 1;
  }
  return iVar3;
}

// ====== 0x0086ed70  FUN_0086ed70 ======
void __thiscall FUN_0086ed70(void *this,undefined4 param_1,undefined4 param_2)

{
  *(undefined4 *)((int)this + 4) = param_1;
  *(undefined ***)this = &PTR_FUN_0089c4f0;
  *(undefined4 *)((int)this + 8) = 0;
  *(undefined4 *)((int)this + 0xc) = param_2;
  *(undefined4 *)((int)this + 0x10) = 0;
  *(undefined1 *)((int)this + 0x15) = 0;
  return;
}

// ====== 0x0086eda0  FUN_0086eda0 ======
undefined4 * __thiscall FUN_0086eda0(void *this,byte param_1)

{
  FUN_0086ee20((undefined4 *)this);
  if ((param_1 & 1) != 0) {
    FUN_00718cf0((int)this);
  }
  return (undefined4 *)this;
}

// ====== 0x0086edc0  FUN_0086edc0 ======
undefined4 * __fastcall FUN_0086edc0(undefined4 *param_1)

{
  undefined4 uVar1;
  void *local_c;
  undefined1 *puStack_8;
  undefined4 local_4;
  
  puStack_8 = &LAB_008879e8;
  local_c = ExceptionList;
  local_4 = 0;
  ExceptionList = &local_c;
  *param_1 = &PTR_FUN_0089c4f0;
  param_1[4] = 0x400;
  uVar1 = FUN_00718cb0(0x400);
  param_1[1] = uVar1;
  param_1[3] = 0;
  param_1[2] = 0;
  *(undefined1 *)((int)param_1 + 0x15) = 0;
  ExceptionList = local_c;
  return param_1;
}

// ====== 0x0086ee20  FUN_0086ee20 ======
void __fastcall FUN_0086ee20(undefined4 *param_1)

{
  *param_1 = &PTR_FUN_0089c4f0;
  if ((param_1[4] != 0) && (*(char *)((int)param_1 + 0x15) == '\0')) {
    FUN_00718cf0(param_1[1]);
  }
  FUN_0086ec10(param_1);
  return;
}

// ====== 0x0086ef40  FUN_0086ef40 ======
undefined4 __fastcall FUN_0086ef40(int param_1)

{
  *(undefined1 *)(param_1 + 0x15) = 1;
  return *(undefined4 *)(param_1 + 4);
}

// ====== 0x0086efe0  DirectDrawEnumerateA ======
void DirectDrawEnumerateA(void)

{
                    /* WARNING: Could not recover jumptable at 0x0086efe0. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  DirectDrawEnumerateA();
  return;
}

// ====== 0x0086eff0  FUN_0086eff0 ======
undefined4 FUN_0086eff0(HINSTANCE param_1,undefined4 param_2,char *param_3,undefined4 param_4)

{
  uint uVar1;
  char cVar2;
  void *this;
  int *piVar3;
  char *pcVar4;
  int iVar5;
  undefined4 uVar6;
  uint uVar7;
  int iVar8;
  undefined4 uStack_130;
  uint local_12c;
  WNDCLASSA aWStack_128 [7];
  
  uVar7 = DAT_009a1478;
  local_12c = DAT_009a1478;
  if (DAT_009a09d0 != 0) {
    FUN_0086e440(s_Application_already_active_0097dc08,s_NetImmerse_Application_009766ac);
    return 0;
  }
  this = (void *)FUN_00718cb0(0x20);
  if (this == (void *)0x0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar3 = FUN_0086e550(this,s___cmdline_txt_0097dbf8,0,0x2800);
    if ((piVar3 != (int *)0x0) && (cVar2 = (**(code **)(*piVar3 + 4))(), cVar2 != '\0')) {
      pcVar4 = (char *)FUN_00718cb0(0x400);
      iVar8 = 0;
      do {
        iVar5 = (**(code **)(*piVar3 + 8))((int)&uStack_130 + 3,1);
        if ((iVar5 == 0) && (uStack_130._3_1_ != '\0')) break;
        if ((uStack_130._3_1_ == '\n') || (cVar2 = uStack_130._3_1_, uStack_130._3_1_ == '\r')) {
          cVar2 = ' ';
          uStack_130 = CONCAT13(0x20,(undefined3)uStack_130);
        }
        pcVar4[iVar8] = cVar2;
        iVar8 = iVar8 + 1;
      } while (iVar8 < 0x3ff);
      pcVar4[iVar8] = '\0';
      FUN_007b74d0(pcVar4);
      FUN_00718cf0((int)pcVar4);
      uVar7 = local_12c;
      goto LAB_0086f0d2;
    }
  }
  FUN_007b74d0(param_3);
LAB_0086f0d2:
  if (piVar3 != (int *)0x0) {
    (**(code **)*piVar3)(1);
  }
  piVar3 = FUN_00437f50();
  if (piVar3 == (int *)0x0) {
    FUN_0086e440(s_Unable_to_create_application_0097dbd8,s_NetImmerse_Application_009766ac);
    return 0;
  }
  DAT_009a09d4 = param_1;
  FUN_007b7540();
  aWStack_128[0].style = 3;
  aWStack_128[0].lpfnWndProc = (WNDPROC)&LAB_007ba5e0;
  aWStack_128[0].cbClsExtra = 0;
  aWStack_128[0].cbWndExtra = 0;
  aWStack_128[0].hInstance = param_1;
  aWStack_128[0].hIcon = LoadIconA((HINSTANCE)0x0,(LPCSTR)0x7f00);
  aWStack_128[0].hCursor = LoadCursorA((HINSTANCE)0x0,(LPCSTR)0x7f00);
  aWStack_128[0].hbrBackground = (HBRUSH)GetStockObject(4);
  aWStack_128[0].lpszClassName = s_NetImmerse_Application_009766ac;
  if (piVar3[6] == 0) {
    aWStack_128[0].lpszMenuName = (LPCSTR)0x0;
  }
  else {
    aWStack_128[0].lpszMenuName = (LPCSTR)(piVar3[6] & 0xffff);
  }
  RegisterClassA(aWStack_128);
  (*(code *)**(undefined4 **)piVar3[4])(param_4);
  cVar2 = (**(code **)(*piVar3 + 4))();
  uVar6 = uStack_130;
  if (cVar2 != '\0') {
    uVar6 = FUN_007ba5a0();
  }
  (**(code **)(*piVar3 + 8))();
  (**(code **)*piVar3)(1);
  uVar1 = DAT_009a1478;
  FUN_008599b9((undefined1 *)&aWStack_128[0].lpszMenuName,
               (byte *)s_NetImmerse_NiObject_counts__init_0097db9c);
  FUN_0086e3f0((LPCSTR)&aWStack_128[0].lpszMenuName);
  if (uVar1 <= uVar7) {
    FUN_0086e3f0(s_Application_has_no_object_leaks__0097db54);
    return uVar6;
  }
  FUN_008599b9((undefined1 *)&aWStack_128[0].lpszMenuName,
               (byte *)s_Application_is_leaking__u_object_0097db78);
  FUN_0086e3f0((LPCSTR)&aWStack_128[0].lpszMenuName);
  return uVar6;
}

// ====== 0x0086f760  RtlUnwind ======
void RtlUnwind(PVOID TargetFrame,PVOID TargetIp,PEXCEPTION_RECORD ExceptionRecord,PVOID ReturnValue)

{
                    /* WARNING: Could not recover jumptable at 0x0086f760. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  RtlUnwind(TargetFrame,TargetIp,ExceptionRecord,ReturnValue);
  return;
}

// ====== 0x0086f8e0  FUN_0086f8e0 ======
int __cdecl FUN_0086f8e0(ushort *param_1,ushort *param_2)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  ushort *puVar4;
  bool bVar5;
  bool bVar6;
  
  if (DAT_009b3a68 == 0) {
    do {
      uVar1 = *param_1;
      puVar3 = (ushort *)(uint)uVar1;
      if ((uVar1 < 0x5b) && (0x40 < uVar1)) {
        puVar3 = puVar3 + 0x10;
      }
      uVar1 = *param_2;
      puVar2 = (ushort *)(uint)uVar1;
      if ((uVar1 < 0x5b) && (0x40 < uVar1)) {
        puVar2 = puVar2 + 0x10;
      }
      puVar4 = param_1 + 1;
      param_2 = param_2 + 1;
    } while (((short)puVar3 != 0) &&
            (param_1._0_2_ = (short)puVar2, bVar5 = (short)puVar3 == (short)param_1,
            param_1 = puVar4, bVar5));
  }
  else {
    puVar2 = (ushort *)InterlockedIncrement(&DAT_009b4334);
    bVar5 = DAT_009b4330 == 0;
    if (!bVar5) {
      InterlockedDecrement(&DAT_009b4334);
      puVar2 = (ushort *)FUN_00860a61(0x13);
    }
    do {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      puVar3 = (ushort *)FUN_00870862(CONCAT22((short)((uint)puVar2 >> 0x10),uVar1));
      puVar4 = param_2 + 1;
      puVar2 = (ushort *)FUN_00870862(CONCAT22((short)((uint)puVar3 >> 0x10),*param_2));
      param_2._0_2_ = (short)puVar3;
      if ((short)param_2 == 0) break;
      bVar6 = (short)param_2 == (short)puVar2;
      param_2 = puVar4;
    } while (bVar6);
    if (bVar5) {
      InterlockedDecrement(&DAT_009b4334);
    }
    else {
      FUN_00860ac2(0x13);
    }
  }
  param_2 = puVar3;
  param_1 = puVar2;
  return ((uint)param_2 & 0xffff) - ((uint)param_1 & 0xffff);
}

// ====== 0x0086f9bf  FUN_0086f9bf ======
undefined4 __cdecl FUN_0086f9bf(int param_1)

{
  return *(undefined4 *)(param_1 + 0x10);
}

// ====== 0x0086f9c7  FUN_0086f9c7 ======
uint __cdecl FUN_0086f9c7(byte param_1,byte *param_2)

{
  byte bVar1;
  byte *pbVar2;
  uint uVar3;
  uint uVar4;
  void *this;
  undefined *puVar5;
  undefined *this_00;
  
  pbVar2 = param_2;
  if (param_2[1] == 0x3a) {
    pbVar2 = param_2 + 2;
  }
  bVar1 = *pbVar2;
  if ((((bVar1 == 0x5c) || (bVar1 == 0x2f)) && (pbVar2[1] == 0)) ||
     (((param_1 & 0x10) != 0 || (uVar4 = 0x8000, bVar1 == 0)))) {
    uVar4 = 0x4040;
  }
  this = (void *)0x2e;
  uVar4 = uVar4 | (uint)(~param_1 & 1 | 2) << 7;
  pbVar2 = FUN_0085a60b(param_2,0x2e);
  if (pbVar2 != (byte *)0x0) {
    puVar5 = &DAT_0089df58;
    uVar3 = FUN_008708d7(this,pbVar2,&DAT_0089df58);
    if (uVar3 != 0) {
      this_00 = &DAT_0089df50;
      uVar3 = FUN_008708d7(puVar5,pbVar2,&DAT_0089df50);
      if (uVar3 != 0) {
        puVar5 = &DAT_0089df48;
        uVar3 = FUN_008708d7(this_00,pbVar2,&DAT_0089df48);
        if (uVar3 != 0) {
          uVar3 = FUN_008708d7(puVar5,pbVar2,&DAT_0089df40);
          if (uVar3 != 0) goto LAB_0086fa68;
        }
      }
    }
    uVar4 = uVar4 | 0x40;
  }
LAB_0086fa68:
  return (uVar4 & 0x1c0) >> 6 | uVar4 | uVar4 >> 3 & 0x38;
}

// ====== 0x0086fa7f  FUN_0086fa7f ======
undefined4 __cdecl FUN_0086fa7f(byte *param_1,int *param_2)

{
  byte *pbVar1;
  DWORD *pDVar2;
  uint uVar3;
  uint *_Str;
  size_t sVar4;
  int iVar5;
  UINT UVar6;
  BOOL BVar7;
  DWORD DVar8;
  uint local_268 [65];
  _WIN32_FIND_DATAA local_164;
  int local_24;
  _FILETIME local_20;
  HANDLE local_18;
  _SYSTEMTIME local_14;
  
  pbVar1 = FUN_00870c42(param_1,&DAT_0089df64);
  if (pbVar1 != (byte *)0x0) {
LAB_0086fab2:
    pDVar2 = FUN_0085cbd7();
    *pDVar2 = 2;
    pDVar2 = FUN_0085cbe0();
    *pDVar2 = 2;
    return 0xffffffff;
  }
  if (param_1[1] == 0x3a) {
    if ((*param_1 != 0) && (param_1[2] == 0)) goto LAB_0086fab2;
    uVar3 = FUN_00870bc7((int)(char)*param_1);
    local_24 = uVar3 - 0x60;
  }
  else {
    local_24 = FUN_00870b11();
  }
  local_18 = FindFirstFileA((LPCSTR)param_1,&local_164);
  if (local_18 == (HANDLE)0xffffffff) {
    pbVar1 = FUN_00870c42(param_1,&DAT_0089df60);
    if ((((pbVar1 == (byte *)0x0) ||
         (_Str = FUN_00870a6c(local_268,(LPCSTR)param_1,0x104), _Str == (uint *)0x0)) ||
        ((sVar4 = _strlen((char *)_Str), sVar4 != 3 &&
         (iVar5 = FUN_0086fd3a((char *)_Str), iVar5 == 0)))) ||
       (UVar6 = GetDriveTypeA((LPCSTR)_Str), UVar6 < 2)) {
      pDVar2 = FUN_0085cbd7();
      *pDVar2 = 2;
      pDVar2 = FUN_0085cbe0();
      *pDVar2 = 2;
      return 0xffffffff;
    }
    local_164.dwFileAttributes = 0x10;
    local_164.nFileSizeHigh = 0;
    local_164.nFileSizeLow = 0;
    local_164.cFileName[0] = '\0';
    iVar5 = FUN_008679d8(0x7bc,1,1,0,0,0,-1);
    param_2[7] = iVar5;
    param_2[6] = iVar5;
    param_2[8] = iVar5;
  }
  else {
    BVar7 = FileTimeToLocalFileTime(&local_164.ftLastWriteTime,&local_20);
    if ((BVar7 == 0) || (BVar7 = FileTimeToSystemTime(&local_20,&local_14), BVar7 == 0)) {
LAB_0086fd1d:
      DVar8 = GetLastError();
      FUN_0085cb64(DVar8);
      FindClose(local_18);
      return 0xffffffff;
    }
    iVar5 = FUN_008679d8((uint)local_14.wYear,(uint)local_14.wMonth,(uint)local_14.wDay,
                         (uint)local_14.wHour,(uint)local_14.wMinute,(uint)local_14.wSecond,-1);
    param_2[7] = iVar5;
    if ((local_164.ftLastAccessTime.dwLowDateTime != 0) ||
       (local_164.ftLastAccessTime.dwHighDateTime != 0)) {
      BVar7 = FileTimeToLocalFileTime(&local_164.ftLastAccessTime,&local_20);
      if ((BVar7 == 0) || (BVar7 = FileTimeToSystemTime(&local_20,&local_14), BVar7 == 0))
      goto LAB_0086fd1d;
      iVar5 = FUN_008679d8((uint)local_14.wYear,(uint)local_14.wMonth,(uint)local_14.wDay,
                           (uint)local_14.wHour,(uint)local_14.wMinute,(uint)local_14.wSecond,-1);
    }
    param_2[6] = iVar5;
    if ((local_164.ftCreationTime.dwLowDateTime == 0) &&
       (local_164.ftCreationTime.dwHighDateTime == 0)) {
      iVar5 = param_2[7];
    }
    else {
      BVar7 = FileTimeToLocalFileTime(&local_164.ftCreationTime,&local_20);
      if ((BVar7 == 0) || (BVar7 = FileTimeToSystemTime(&local_20,&local_14), BVar7 == 0))
      goto LAB_0086fd1d;
      iVar5 = FUN_008679d8((uint)local_14.wYear,(uint)local_14.wMonth,(uint)local_14.wDay,
                           (uint)local_14.wHour,(uint)local_14.wMinute,(uint)local_14.wSecond,-1);
    }
    param_2[8] = iVar5;
    FindClose(local_18);
  }
  uVar3 = FUN_0086f9c7((byte)local_164.dwFileAttributes,param_1);
  *(short *)((int)param_2 + 6) = (short)uVar3;
  param_2[5] = local_164.nFileSizeLow;
  *param_2 = local_24 + -1;
  param_2[4] = local_24 + -1;
  *(undefined2 *)(param_2 + 2) = 1;
  *(undefined2 *)(param_2 + 1) = 0;
  *(undefined2 *)(param_2 + 3) = 0;
  *(undefined2 *)((int)param_2 + 10) = 0;
  return 0;
}

// ====== 0x0086fd3a  FUN_0086fd3a ======
undefined4 __cdecl FUN_0086fd3a(char *param_1)

{
  char *pcVar1;
  size_t sVar2;
  char *pcVar3;
  char cVar4;
  
  sVar2 = _strlen(param_1);
  if (((4 < sVar2) && ((*param_1 == '\\' || (*param_1 == '/')))) &&
     ((param_1[1] == '\\' || (param_1[1] == '/')))) {
    pcVar3 = param_1 + 3;
    cVar4 = param_1[3];
    while (((cVar4 != '\0' && (cVar4 != '\\')) && (cVar4 != '/'))) {
      pcVar1 = pcVar3 + 1;
      pcVar3 = pcVar3 + 1;
      cVar4 = *pcVar1;
    }
    if ((*pcVar3 != '\0') && (pcVar3 = pcVar3 + 1, *pcVar3 != '\0')) {
      for (; (cVar4 = *pcVar3, cVar4 != '\0' && ((cVar4 != '\\' && (cVar4 != '/'))));
          pcVar3 = pcVar3 + 1) {
      }
      if ((*pcVar3 == '\0') || (pcVar3[1] == '\0')) {
        return 1;
      }
    }
  }
  return 0;
}

// ====== 0x0086fdaa  FUN_0086fdaa ======
uint * __cdecl FUN_0086fdaa(uint *param_1)

{
  char cVar1;
  size_t _Size;
  int iVar2;
  uint *puVar3;
  bool bVar4;
  LPWSTR local_c;
  
  local_c = (LPWSTR)0x0;
  if (DAT_009b3a68 == 0) {
    cVar1 = (char)*param_1;
    puVar3 = param_1;
    while (cVar1 != '\0') {
      cVar1 = (char)*puVar3;
      if (('`' < cVar1) && (cVar1 < '{')) {
        *(char *)puVar3 = cVar1 + -0x20;
      }
      puVar3 = (uint *)((int)puVar3 + 1);
      cVar1 = *(char *)puVar3;
    }
  }
  else {
    InterlockedIncrement(&DAT_009b4334);
    bVar4 = DAT_009b4330 == 0;
    if (!bVar4) {
      InterlockedDecrement(&DAT_009b4334);
      FUN_00860a61(0x13);
    }
    if (DAT_009b3a68 == 0) {
      if (bVar4) {
        InterlockedDecrement(&DAT_009b4334);
      }
      else {
        FUN_00860ac2(0x13);
      }
      cVar1 = (char)*param_1;
      puVar3 = param_1;
      while (cVar1 != '\0') {
        cVar1 = (char)*puVar3;
        if (('`' < cVar1) && (cVar1 < '{')) {
          *(char *)puVar3 = cVar1 + -0x20;
        }
        puVar3 = (uint *)((int)puVar3 + 1);
        cVar1 = *(char *)puVar3;
      }
    }
    else {
      _Size = FUN_00867640(DAT_009b3a68,0x200,(char *)param_1,-1,(LPWSTR)0x0,0,0,1);
      if (((_Size != 0) && (local_c = (LPWSTR)_malloc(_Size), local_c != (LPWSTR)0x0)) &&
         (iVar2 = FUN_00867640(DAT_009b3a68,0x200,(char *)param_1,-1,local_c,_Size,0,1), iVar2 != 0)
         ) {
        FUN_00863840(param_1,(uint *)local_c);
      }
      if (bVar4) {
        InterlockedDecrement(&DAT_009b4334);
      }
      else {
        FUN_00860ac2(0x13);
      }
      FUN_0085adc4((undefined *)local_c);
    }
  }
  return param_1;
}

// ====== 0x0086fede  FUN_0086fede ======
undefined4 __cdecl FUN_0086fede(LPCSTR param_1,byte param_2)

{
  DWORD DVar1;
  DWORD *pDVar2;
  
  DVar1 = GetFileAttributesA(param_1);
  if (DVar1 == 0xffffffff) {
    DVar1 = GetLastError();
    FUN_0085cb64(DVar1);
  }
  else {
    if (((DVar1 & 1) == 0) || ((param_2 & 2) == 0)) {
      return 0;
    }
    pDVar2 = FUN_0085cbd7();
    *pDVar2 = 0xd;
    pDVar2 = FUN_0085cbe0();
    *pDVar2 = 5;
  }
  return 0xffffffff;
}

// ====== 0x0086ffb1  FUN_0086ffb1 ======
undefined4 __cdecl FUN_0086ffb1(uint param_1,int *param_2)

{
  WORD *pWVar1;
  BOOL BVar2;
  HANDLE hFile;
  DWORD *pDVar3;
  FILETIME *lpCreationTime;
  _FILETIME *lpLastAccessTime;
  _FILETIME *lpLastWriteTime;
  SYSTEMTIME local_34;
  _FILETIME local_24;
  _FILETIME local_1c;
  _FILETIME local_14;
  int local_c;
  int local_8;
  
  if (param_2 == (int *)0x0) {
    FUN_0085b45a(&local_8);
    local_c = local_8;
    param_2 = &local_c;
  }
  pWVar1 = (WORD *)FUN_0085d83d(param_2 + 1);
  if (pWVar1 != (WORD *)0x0) {
    local_34.wYear = pWVar1[10] + 0x76c;
    local_34.wMonth = pWVar1[8] + 1;
    local_34.wDay = pWVar1[6];
    local_34.wHour = pWVar1[4];
    local_34.wMinute = pWVar1[2];
    local_34.wSecond = *pWVar1;
    local_34.wMilliseconds = 0;
    BVar2 = SystemTimeToFileTime(&local_34,&local_14);
    if (((BVar2 != 0) && (BVar2 = LocalFileTimeToFileTime(&local_14,&local_1c), BVar2 != 0)) &&
       (pWVar1 = (WORD *)FUN_0085d83d(param_2), pWVar1 != (WORD *)0x0)) {
      local_34.wYear = pWVar1[10] + 0x76c;
      local_34.wMonth = pWVar1[8] + 1;
      local_34.wDay = pWVar1[6];
      local_34.wHour = pWVar1[4];
      local_34.wMinute = pWVar1[2];
      local_34.wSecond = *pWVar1;
      local_34.wMilliseconds = 0;
      BVar2 = SystemTimeToFileTime(&local_34,&local_14);
      if ((BVar2 != 0) && (BVar2 = LocalFileTimeToFileTime(&local_14,&local_24), BVar2 != 0)) {
        lpLastWriteTime = &local_1c;
        lpLastAccessTime = &local_24;
        lpCreationTime = (FILETIME *)0x0;
        hFile = (HANDLE)FUN_00867fe6(param_1);
        BVar2 = SetFileTime(hFile,lpCreationTime,lpLastAccessTime,lpLastWriteTime);
        if (BVar2 != 0) {
          return 0;
        }
      }
    }
  }
  pDVar3 = FUN_0085cbd7();
  *pDVar3 = 0x16;
  return 0xffffffff;
}
